<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>进阶教程 5. 正则基础 | Bin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="一、方括号的细节问题 [] 正则中的方括号：表示方括号中的元字符中的任意一个  特殊元字符：在正则中有特殊含义的字符串如 . ，在正则中表示匹配除 \n 之外的任意其他字符，原义是 小数点 1. 在方括号中的部分特殊元字符代表的是该字符的原义，不再具有特殊含义如： [.] [?] [*] [+] 123456let reg = /./;let reg1 = /[.]/; // 方括号中的 . 表示">
<meta name="keywords" content="javascript">
<meta property="og:type" content="article">
<meta property="og:title" content="进阶教程 5. 正则基础">
<meta property="og:url" content="http://yoursite.com/2018/12/24/JavaScript进阶教程5/index.html">
<meta property="og:site_name" content="Bin">
<meta property="og:description" content="一、方括号的细节问题 [] 正则中的方括号：表示方括号中的元字符中的任意一个  特殊元字符：在正则中有特殊含义的字符串如 . ，在正则中表示匹配除 \n 之外的任意其他字符，原义是 小数点 1. 在方括号中的部分特殊元字符代表的是该字符的原义，不再具有特殊含义如： [.] [?] [*] [+] 123456let reg = /./;let reg1 = /[.]/; // 方括号中的 . 表示">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-11-01T03:45:18.398Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="进阶教程 5. 正则基础">
<meta name="twitter:description" content="一、方括号的细节问题 [] 正则中的方括号：表示方括号中的元字符中的任意一个  特殊元字符：在正则中有特殊含义的字符串如 . ，在正则中表示匹配除 \n 之外的任意其他字符，原义是 小数点 1. 在方括号中的部分特殊元字符代表的是该字符的原义，不再具有特殊含义如： [.] [?] [*] [+] 123456let reg = /./;let reg1 = /[.]/; // 方括号中的 . 表示">
  
    <link rel="alternate" href="/atom.xml" title="Bin" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Bin</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">发上等愿，结中等缘，享下等福；择高处立，寻平处住，向宽处行；</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-JavaScript进阶教程5" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/24/JavaScript进阶教程5/" class="article-date">
  <time datetime="2018-12-24T12:45:03.000Z" itemprop="datePublished">2018-12-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      进阶教程 5. 正则基础
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="一、方括号的细节问题"><a href="#一、方括号的细节问题" class="headerlink" title="一、方括号的细节问题"></a>一、方括号的细节问题</h3><ul>
<li>[] 正则中的方括号：表示方括号中的元字符中的任意一个</li>
</ul>
<p>特殊元字符：在正则中有特殊含义的字符串如 . ，在正则中表示匹配除 \n 之外的任意其他字符，原义是 小数点</p>
<h4 id="1-在方括号中的部分特殊元字符代表的是该字符的原义，不再具有特殊含义"><a href="#1-在方括号中的部分特殊元字符代表的是该字符的原义，不再具有特殊含义" class="headerlink" title="1. 在方括号中的部分特殊元字符代表的是该字符的原义，不再具有特殊含义"></a>1. 在方括号中的部分特殊元字符代表的是该字符的原义，不再具有特殊含义</h4><p>如： [.] [?] [*] [+]</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/./</span>;</span><br><span class="line"><span class="keyword">let</span> reg1 = <span class="regexp">/[.]/</span>; <span class="comment">// 方括号中的 . 表示普通小数点</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.test(<span class="string">'abc'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.test(<span class="string">'.'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg1.test(<span class="string">'abc'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg1.test(<span class="string">'.'</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/[?]/</span>; <span class="comment">// 方括号中的?表示问号，不是两次元字符</span></span><br><span class="line"><span class="built_in">console</span>.log(reg2.test(<span class="string">'?'</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> reg3 = <span class="regexp">/[*]/</span>; <span class="comment">// 方括号中的*表示星号，不是量词源字符串</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.test(<span class="string">'*'</span>)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> reg4 = <span class="regexp">/[+]/</span>; <span class="comment">// 方括号中的+表示加号，不是量词元字符</span></span><br><span class="line"><span class="built_in">console</span>.log(reg4.test(<span class="string">'+'</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="2-方括号不能识别多位数"><a href="#2-方括号不能识别多位数" class="headerlink" title="2. 方括号不能识别多位数"></a>2. 方括号不能识别多位数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg5x = <span class="regexp">/^183$/</span>; <span class="comment">// 只能匹配183</span></span><br><span class="line"><span class="keyword">let</span> reg5 = <span class="regexp">/^[183]$/</span>; <span class="comment">// 代表1或者8或者3中的任意一个数字</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'1'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'8'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'3'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'18'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'13'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'183'</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>中括号限制范围 [0-9] [a-z] [A-Z]</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg6 = <span class="regexp">/^[23-68]$/</span>; <span class="comment">// 这个正则表示匹配 2 或 3-6 或 8</span></span><br><span class="line"><span class="built_in">console</span>.log(reg6.test(<span class="string">'23'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg6.test(<span class="string">'34'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg6.test(<span class="string">'67'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg6.test(<span class="string">'2'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg6.test(<span class="string">'4'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg6.test(<span class="string">'9'</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p><code>? 思考：为什么会有这种情况？因为中括号中连续出现的多位数不是表示一个多位数，而是表示多个一位数字；</code></p>
<ul>
<li>? 思考：此时真的需要一个数字范围的话怎么办？</li>
</ul>
<blockquote>
<p>我们可以把这个范围拆分，如23-68， 然后再两位数分别表示这些段<br>23 - 29 2[3-9]<br>30-59 [3-5][0-9]<br>60-68 6[0-8]</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg7 = <span class="regexp">/^(2[3-9]|[3-5]\d|6[0-8])$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'22'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'23'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'34'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'67'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'2'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'4'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'9'</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="二、正则捕获"><a href="#二、正则捕获" class="headerlink" title="二、正则捕获"></a>二、正则捕获</h3><h4 id="正则的捕获：把正则匹配到内容捕获到："><a href="#正则的捕获：把正则匹配到内容捕获到：" class="headerlink" title="正则的捕获：把正则匹配到内容捕获到："></a>正则的捕获：把正则匹配到内容捕获到：</h4><blockquote>
<p>RegExp.prototype.exec() 方法</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">'hello2019 zhufeng2019 zhufeng9021'</span>;</span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/zhufeng\d+/</span>;</span><br><span class="line"><span class="keyword">let</span> execs = reg.exec(str);</span><br><span class="line"><span class="built_in">console</span>.log(execs);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* [</span></span><br><span class="line"><span class="comment">*   "zhufeng2019", 捕获到的内容</span></span><br><span class="line"><span class="comment">*   index: 10, 捕获的起始索引位置</span></span><br><span class="line"><span class="comment">*   input: "hello2019 zhufeng2019 zhufeng9021", 原始字符串</span></span><br><span class="line"><span class="comment"> *   groups: undefined 命名匹配</span></span><br><span class="line"><span class="comment"> * ]</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/xxxx/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg2.exec(str)); <span class="comment">// null</span></span><br><span class="line"><span class="comment">// 如果捕获不到不到会返回null</span></span><br></pre></td></tr></table></figure>

<h4 id="正则捕获的懒惰性"><a href="#正则捕获的懒惰性" class="headerlink" title="正则捕获的懒惰性"></a>正则捕获的懒惰性</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(reg.exec(str)); <span class="comment">// ["zhufeng2019", index: 10, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(str)); <span class="comment">// ["zhufeng2019", index: 10, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>正则的懒惰性</li>
</ul>
<p>如果不做特殊处理，正则每次捕获的时候都是从索引0开始，捕获到第一个符合条件的就停止捕获，后面有多少都不去捕获。<br>// 解决方案：在正则后加修饰符g</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg3 = <span class="regexp">/zhufeng\d+/g</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// ["zhufeng2019", index: 10, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// ["zhufeng9021", index: 22, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// ["zhufeng2019", index: 10, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// ["zhufeng9021", index: 22, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// null</span></span><br></pre></td></tr></table></figure>

<p><code>? 为啥捕获到最后一次会是null呢？</code></p>
<h4 id="lastIndex属性"><a href="#lastIndex属性" class="headerlink" title="lastIndex属性"></a>lastIndex属性</h4><p>正则对象有一个lastIndex的属性，记录着下一次匹配或者捕获的起始位置，下一次再匹配或者捕获，它会从这个索引位置开始往后查找。</p>
<p>上面之所以是最后一次，是因为最后一次从索引33开始查找，后面没有了，所以会返回null</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// ["zhufeng2019", index: 10,....]</span></span><br><span class="line">console.log(reg3.lastIndex); #### 21</span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str));<span class="comment">// ["zhufeng9102", index: 22, ....]</span></span><br><span class="line">console.log(reg3.lastIndex); #### 33</span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// ["zhufeng2019", index: 10,....]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>lastIndex属性记录着下一次匹配的开始位置。当匹配或者捕获到达末尾后，下一次再匹配或者捕获会从头再来；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str2 = <span class="string">'hello zhufeng2019 zhufeng9201'</span>;</span><br><span class="line"><span class="keyword">let</span> reg5 = <span class="regexp">/zhufeng\d+/g</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(str2)); <span class="comment">// true</span></span><br><span class="line">console.log(reg5.lastIndex); #### 17</span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(str2)); <span class="comment">// true</span></span><br><span class="line">console.log(reg5.lastIndex); #### 29</span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(str2)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<ul>
<li>使用匹配时，也是从lastIndex开始的位置去匹配；最后一次是false是因为从索引29向后查找时没有查找到符合规则的字符串，所以返回false；</li>
</ul>
<h4 id="match-方法配合正则"><a href="#match-方法配合正则" class="headerlink" title="match 方法配合正则"></a>match 方法配合正则</h4><blockquote>
<p>String.prototype.match()</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mstr = str.match(reg5);</span><br><span class="line"><span class="built_in">console</span>.log(mstr); <span class="comment">//  ["zhufeng2019", "zhufeng9021"]</span></span><br><span class="line"><span class="keyword">let</span> mstrs = str.match(<span class="regexp">/xxxx/</span>); <span class="comment">// null</span></span><br><span class="line"><span class="comment">// match 方法匹配不到是返回null而不是空数组</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg6 = <span class="regexp">/zhufeng\d+/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.match(reg6)); <span class="comment">// ["zhufeng2019", index: 10, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br><span class="line"><span class="built_in">console</span>.log(str.match(reg6)); <span class="comment">// ["zhufeng2019", index: 10, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br></pre></td></tr></table></figure>

<p>/+ match使用的正则不加g时返回值和exec一样的。但是如果有g时，match方法会一次性把所有符合条件的都匹配到，而exec每次只能匹配到一个；</p>
<h3 id="三、正则分组捕获"><a href="#三、正则分组捕获" class="headerlink" title="三、正则分组捕获"></a>三、正则分组捕获</h3><p>+正则捕获：正则除了匹配还可以把符合条件的捕获到；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">'hello2019 zhufeng2019 zhufeng9021'</span>;</span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/zhufeng(\d+)/g</span>; <span class="comment">// () 是分组，相当于小正则</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 正则捕获方法：RegExp.prototype.exec() 方法</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(str));</span><br><span class="line"><span class="comment">//  ["zhufeng2019", "2019", index: 10, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(str)); <span class="comment">// ["zhufeng9021", "9021", index: 22, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>捕获到的内容是一个数组，数组的第一项是大正则匹配到的内容，如果有分组的话从第二项开始就是分组正则捕获到的内容；所以捕获的内容返回值： [“大正则捕获到的”, “分组1捕获内容”, “分组2捕获内容”…..]</li>
</ul>
<ul>
<li>字符串的match方法，匹配符合规则的字符串， 但是match方法不能进行分组匹配</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(str.match(reg)); <span class="comment">// ["zhufeng2019", "zhufeng9021"]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>取消分组：(?:) 表示当前小括号改变优先级，而不用作用分组捕获</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/zhufeng(?:\d+)/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg2.exec(str)); <span class="comment">// ["zhufeng2019", index: 10, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined] 取消分组捕获后，exec的返回值中不再包含分组捕获的内容</span></span><br></pre></td></tr></table></figure>

<h4 id="的作用"><a href="#的作用" class="headerlink" title="? 的作用"></a>? 的作用</h4><ul>
<li>? 表示量词元字符 出现0次到1次 可以有可以没有</li>
<li>(?:) 取消分组捕获</li>
</ul>
<h3 id="四、小括号的细节问题"><a href="#四、小括号的细节问题" class="headerlink" title="四、小括号的细节问题"></a>四、小括号的细节问题</h3><h4 id="1-分组捕获"><a href="#1-分组捕获" class="headerlink" title="1. 分组捕获"></a>1. 分组捕获</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">'hello2019 zhufeng2019 zhufeng9021'</span>;</span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/zhufeng(\d+)/g</span>; <span class="comment">// () 是分组，相当于小正则</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(str)); <span class="comment">// 使用exec方法符合条件的字符串捕获到</span></span><br></pre></td></tr></table></figure>

<h4 id="2-分组引用-数字-表示引用前面分组某个分组的内容"><a href="#2-分组引用-数字-表示引用前面分组某个分组的内容" class="headerlink" title="2. 分组引用 \数字 表示引用前面分组某个分组的内容"></a>2. 分组引用 \数字 表示引用前面分组某个分组的内容</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/^(\d)\1$/</span>; <span class="comment">// 匹配一个数字，个位数和十位数相同; \1 表示引用第一个分组中的内容</span></span><br><span class="line"><span class="built_in">console</span>.log(reg2.test(<span class="string">'11'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(reg2.test(<span class="string">'99'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(reg2.test(<span class="string">'12'</span>));</span><br></pre></td></tr></table></figure>

<ul>
<li>练习：写一个正则匹配四个字母的单词，其中第二个和第四个字母相同；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg3 = <span class="regexp">/[a-z]([a-z])[a-z]\1/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg3.test(<span class="string">'tara'</span>));</span><br></pre></td></tr></table></figure>

<h4 id="3-改变优先级"><a href="#3-改变优先级" class="headerlink" title="3. 改变优先级"></a>3. 改变优先级</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 写一个正则匹配18或者19</span></span><br><span class="line"><span class="keyword">let</span> reg4 = <span class="regexp">/^18|19$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg4.test(<span class="string">'18'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg4.test(<span class="string">'19'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg4.test(<span class="string">'189'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg4.test(<span class="string">'1819'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg4.test(<span class="string">'181223419'</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<ul>
<li>? 思考：为什么会这样？因为这个正则不是被识别成一18开头或者以19结尾；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> reg5 = <span class="regexp">/^(18|19)$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'18'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'19'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'189'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'1819'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'181223419'</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="五、正则捕获的贪婪性"><a href="#五、正则捕获的贪婪性" class="headerlink" title="五、正则捕获的贪婪性"></a>五、正则捕获的贪婪性</h3><ul>
<li>正则捕获的贪婪性：如果正则匹配到符合规则的字符串，那么捕获的时候会按照最长的捕获；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">'12345678'</span></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/\d&#123;2,8&#125;/g</span>;</span><br><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/\d+/</span>;</span><br><span class="line"><span class="keyword">let</span> reg3= <span class="regexp">/\d*/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(str)); <span class="comment">// ["12345678", index: 0, input: "12345678", groups: undefined]</span></span><br><span class="line"><span class="built_in">console</span>.log(reg2.exec(str)); <span class="comment">// ["12345678", index: 0, input: "12345678", groups: undefined]</span></span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// ["12345678", index: 0, input: "12345678", groups: undefined]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如何解决贪婪性？<br>在两次元字符后面增加 ? 增加问号后会按照最少的匹配</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg4 = <span class="regexp">/\d&#123;2,8&#125;?/g</span>;</span><br><span class="line"><span class="keyword">let</span> reg5 = <span class="regexp">/\d+?/</span>;</span><br><span class="line"><span class="keyword">let</span> reg6= <span class="regexp">/\d*?/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg4.exec(str)); <span class="comment">// ["12", index: 0, input: "12345678", groups: undefined]</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.exec(str)); <span class="comment">// ["1", index: 0, input: "12345678", groups: undefined]</span></span><br><span class="line"><span class="built_in">console</span>.log(reg6.exec(str)); <span class="comment">// ["", index: 0, input: "12345678", groups: undefined]</span></span><br></pre></td></tr></table></figure>

<h3 id="六、正则简单应用"><a href="#六、正则简单应用" class="headerlink" title="六、正则简单应用"></a>六、正则简单应用</h3><h4 id="1-验证中国大陆手机号-以1开头的11位数字"><a href="#1-验证中国大陆手机号-以1开头的11位数字" class="headerlink" title="1. 验证中国大陆手机号 以1开头的11位数字"></a>1. 验证中国大陆手机号 以1开头的11位数字</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg1 = <span class="regexp">/^1\d&#123;10&#125;$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg1.test(<span class="string">'16601046931'</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="2-验证某些号段的手机号验证，例如188-170-156"><a href="#2-验证某些号段的手机号验证，例如188-170-156" class="headerlink" title="2. 验证某些号段的手机号验证，例如188 170 156"></a>2. 验证某些号段的手机号验证，例如188 170 156</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/^1(88|70|56)\d&#123;8&#125;$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg2.test(<span class="string">'18801046931'</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="3-匹配尾号是连续的三围豹子号-666-777-111"><a href="#3-匹配尾号是连续的三围豹子号-666-777-111" class="headerlink" title="3. 匹配尾号是连续的三围豹子号 666 777 111"></a>3. 匹配尾号是连续的三围豹子号 666 777 111</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg3 = <span class="regexp">/^1\d&#123;7&#125;(\d)(\1&#123;2&#125;)$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg3.test(<span class="string">'15912345666'</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="4-靓号-中间四位相同后面四位相同"><a href="#4-靓号-中间四位相同后面四位相同" class="headerlink" title="4. 靓号 中间四位相同后面四位相同"></a>4. 靓号 中间四位相同后面四位相同</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg5 = <span class="regexp">/^1\d&#123;2&#125;(\d)\1&#123;3&#125;(\d)\2&#123;3&#125;$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'17733332222'</span>));</span><br></pre></td></tr></table></figure>

<h4 id="5-有效数字验证："><a href="#5-有效数字验证：" class="headerlink" title="5. 有效数字验证："></a>5. 有效数字验证：</h4><p>10 +10 -10 0.12 10.02</p>
<ul>
<li>+或-最多出现一次</li>
<li>如果是一位数字可以是0-9</li>
<li>多位数不能以0开头</li>
<li>如果有小数点，后面必须跟至少一位小数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg6 = <span class="regexp">/^[+-]?(\d|[1-9]\d+)(\.\d+)?$/</span>;</span><br></pre></td></tr></table></figure>

<h4 id="5-验证数字在某个范围内-18-60"><a href="#5-验证数字在某个范围内-18-60" class="headerlink" title="5. 验证数字在某个范围内 18 - 60"></a>5. 验证数字在某个范围内 18 - 60</h4><ul>
<li>18 - 19 1[89]|</li>
<li>20-59  2[0-9]</li>
<li>60 60</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg7 = <span class="regexp">/^(1[89]|[2-5]\d|60)$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'17'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'18'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'19'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'59'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'60'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'61'</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="6-匹配中文姓名"><a href="#6-匹配中文姓名" class="headerlink" title="6. 匹配中文姓名"></a>6. 匹配中文姓名</h4><ul>
<li>中文的Unicode编码范围 \u4e00-\u9fa5</li>
<li>出现2位到6位</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg8 = <span class="regexp">/^[\u4d00-\u9fa5]&#123;2,6&#125;$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg8.test(<span class="string">'马宾'</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="6-邮箱验证-简单验证"><a href="#6-邮箱验证-简单验证" class="headerlink" title="6. 邮箱验证(简单验证)"></a>6. 邮箱验证(简单验证)</h4><ul>
<li><p>雅虎邮箱：<a href="mailto:xxxx@yahoo.com.cn" target="_blank" rel="noopener">xxxx@yahoo.com.cn</a></p>
</li>
<li><p>google <a href="mailto:xxx@gmain.com" target="_blank" rel="noopener">xxx@gmain.com</a></p>
</li>
<li><p>qq邮箱 <a href="mailto:xxx@qq.com" target="_blank" rel="noopener">xxx@qq.com</a></p>
</li>
<li><p>网易 <a href="mailto:xxx@163.com" target="_blank" rel="noopener">xxx@163.com</a></p>
</li>
<li><p>网易 <a href="mailto:xxx@126.com" target="_blank" rel="noopener">xxx@126.com</a></p>
</li>
<li><p>开头部分 [a-zA-Z\d]+</p>
</li>
<li><p>中间部分 [-\w]+</p>
</li>
<li><p>结尾部分 [a-zA-Z\d]</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg9 = <span class="regexp">/^[a-zA-Z\d]+@[a-zA-Z\d]+(\.[a-z]+)&#123;1,2&#125;$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg9.test(<span class="string">'mabinbingo@163.com'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg9.test(<span class="string">'mabinbingo@163@.com'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg9.test(<span class="string">'1164664451@qq.com'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg9.test(<span class="string">'1164664451@sina.com.cn'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg9.test(<span class="string">'1164664451@sina.com.cn.cn'</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h4 id="7-数据类型检测"><a href="#7-数据类型检测" class="headerlink" title="7. 数据类型检测"></a>7. 数据类型检测</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.isTypeOf = <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> res = <span class="built_in">Object</span>.prototype.toString.call(val); <span class="comment">// "[object Xxxx]"</span></span><br><span class="line">	<span class="keyword">let</span> reg = <span class="regexp">/^\[object ([a-zA-Z]+)\]$/</span>; <span class="comment">// 在正则使用某些特殊元字符的原义时需要转义</span></span><br><span class="line">	<span class="keyword">let</span> exec = reg.exec(res)[<span class="number">1</span>];</span><br><span class="line">	<span class="keyword">return</span> exec.toLowerCase();</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.isTypeOf(<span class="number">1</span>));</span><br></pre></td></tr></table></figure>

<h3 id="七、正向预查和负向预查"><a href="#七、正向预查和负向预查" class="headerlink" title="七、正向预查和负向预查"></a>七、正向预查和负向预查</h3><ul>
<li>正向预查：(?=元字符) 不发生分组捕获</li>
<li>负向预查: (?!元字符) 不发生分组捕获</li>
</ul>
<h4 id="正向预查：-x-y-匹配x，仅当x后面紧跟着y（匹配后面跟着y的x）；"><a href="#正向预查：-x-y-匹配x，仅当x后面紧跟着y（匹配后面跟着y的x）；" class="headerlink" title="正向预查：/x(?=y)/ 匹配x，仅当x后面紧跟着y（匹配后面跟着y的x）；"></a>正向预查：/x(?=y)/ 匹配x，仅当x后面紧跟着y（匹配后面跟着y的x）；</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg1 = <span class="regexp">/[a-z](?=3|4)/g</span>;</span><br><span class="line"><span class="keyword">let</span> str1 = <span class="string">'a1 b2 c3 d4'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str1.match(reg1)); <span class="comment">// ["c", "d"]</span></span><br></pre></td></tr></table></figure>

<h4 id="负向预查：-x-y-匹配x，仅当x后面不是y（匹配后面不是y的x）；"><a href="#负向预查：-x-y-匹配x，仅当x后面不是y（匹配后面不是y的x）；" class="headerlink" title="负向预查：/x(?!y)/ 匹配x，仅当x后面不是y（匹配后面不是y的x）；"></a>负向预查：/x(?!y)/ 匹配x，仅当x后面不是y（匹配后面不是y的x）；</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/[a-z](?!3|4)/g</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str1.match(reg2));</span><br></pre></td></tr></table></figure>

<h2 id="八、正则捕获"><a href="#八、正则捕获" class="headerlink" title="八、正则捕获"></a>八、正则捕获</h2><blockquote>
<p>js正则捕获：把符合某个规则的字符串获取到；</p>
</blockquote>
<p>+常见的捕获方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">RegExp</span>.prototype.exec(str);</span><br><span class="line"><span class="built_in">String</span>.prototype.match();</span><br></pre></td></tr></table></figure>

<h4 id="懒惰性"><a href="#懒惰性" class="headerlink" title="懒惰性"></a>懒惰性</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/\d+/</span>;</span><br><span class="line"><span class="keyword">let</span> str = <span class="string">'hello111 hello222 hello333'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(str)); [<span class="string">'111'</span>, index.....]</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(str)); [<span class="string">'111'</span>, index.....]</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(str)); [<span class="string">'111'</span>, index.....]</span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex); <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str.match(reg)); [<span class="string">'1111'</span>]</span><br><span class="line"><span class="built_in">console</span>.log(str.match(reg)); [<span class="string">'1111'</span>]</span><br><span class="line"><span class="built_in">console</span>.log(str.match(reg)); [<span class="string">'1111'</span>]</span><br></pre></td></tr></table></figure>

<p> <strong>取消懒惰性：给正则增加修饰g</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/\d+/g</span>;</span><br><span class="line"><span class="keyword">let</span> str2 = <span class="string">'hello111 hello222 hello333'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg2.exec(str2));</span><br><span class="line"><span class="built_in">console</span>.log(reg2.exec(str2));</span><br><span class="line"><span class="built_in">console</span>.log(reg2.exec(str2));</span><br><span class="line"><span class="built_in">console</span>.log(reg2.lastIndex);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str2.match(str2));</span><br></pre></td></tr></table></figure>

<h4 id="贪婪性：按照匹配做多的去捕获，"><a href="#贪婪性：按照匹配做多的去捕获，" class="headerlink" title="贪婪性：按照匹配做多的去捕获，"></a>贪婪性：按照匹配做多的去捕获，</h4><p><strong>解决贪婪性：给量词元字符后面加 ?</strong></p>
<h4 id="分组捕获："><a href="#分组捕获：" class="headerlink" title="分组捕获："></a>分组捕获：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg3 = <span class="regexp">/hello(\d+)/g</span>; 使用小括号表示正则分组</span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)[<span class="number">1</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)[<span class="number">1</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)[<span class="number">1</span>]);</span><br></pre></td></tr></table></figure>

<ul>
<li>除了通过[索引]访问分组，在RegExp上有几个属性记录正则分组捕获的内容</li>
<li>RegExp.$1 表示第1个分组的捕获内容; 在RegExp上有 $1-$9表示第1到第9个分组内容</li>
<li>RegExp[‘$&amp;’] 表示整个正则捕获到的内容</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.$<span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">RegExp</span>[<span class="string">'$&amp;'</span>]);</span><br></pre></td></tr></table></figure>

<p>九、正则的高级应用</p>
<h3 id="1-配合replace使用"><a href="#1-配合replace使用" class="headerlink" title="1. 配合replace使用"></a>1. 配合replace使用</h3><blockquote>
<p>String.prototype.replace(匹配内容, ‘替换内容’);</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">'zhufeng2018 zhufeng2019'</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>把字符串中的 zhufeng 替换成 江外</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> result = str.replace(<span class="string">'zhufeng'</span>, <span class="string">'江外'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// 江外2018 zhufeng2019</span></span><br></pre></td></tr></table></figure>

<ul>
<li>一次只能替换一个，那么有没有什么办法一次都替换掉呢？</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">replace(正则, callback); replace配合正则使用时</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/(zhufeng)/g</span>;</span><br><span class="line"><span class="keyword">let</span> r2 = str.replace(reg, <span class="function"><span class="keyword">function</span> (<span class="params">...arg</span>) </span>&#123;</span><br><span class="line">	<span class="comment">// 回调函数的参数：</span></span><br><span class="line">	<span class="comment">// 第一个：整个正则匹配到的内容</span></span><br><span class="line">	<span class="comment">// 如果有分组，会从第二个参数</span></span><br><span class="line">	<span class="comment">// 倒数第二个参数是 本次捕获的的起始索引位置</span></span><br><span class="line">	<span class="comment">// 最后一个参数是当前原始字符串</span></span><br><span class="line">	i++;</span><br><span class="line">	<span class="built_in">console</span>.log(arg);</span><br><span class="line">	<span class="keyword">return</span> <span class="string">'江外'</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(r2);</span><br><span class="line"><span class="built_in">console</span>.log(i); <span class="comment">// 2 说明回调函数执行了2次；</span></span><br></pre></td></tr></table></figure>

<h4 id="2-格式化时间字符串-按照时间模板格式时间字符串"><a href="#2-格式化时间字符串-按照时间模板格式时间字符串" class="headerlink" title="2. 格式化时间字符串: 按照时间模板格式时间字符串"></a>2. 格式化时间字符串: 按照时间模板格式时间字符串</h4><ul>
<li><p>“2019/6/30 17:50:23” =&gt; ‘06-30 17:50’</p>
</li>
<li><p>2.1 获取时间字符串中所有时间数字</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str2 = <span class="string">"2019/6/30 17:50:23"</span>;</span><br><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/\d+/g</span>;</span><br><span class="line"><span class="keyword">let</span> ary = str2.match(reg2);</span><br><span class="line"><span class="built_in">console</span>.log(ary);</span><br></pre></td></tr></table></figure>

<ul>
<li>2.2 判断如果这些数字比10小，需要补0</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> addZero = ary.map(<span class="function"><span class="params">item</span> =&gt;</span> +item &lt; <span class="number">10</span> ? <span class="string">'0'</span> + item : item);</span><br><span class="line"><span class="built_in">console</span>.log(addZero);</span><br></pre></td></tr></table></figure>

<ul>
<li>2.3 根据模板把时间格式化</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> tmp = <span class="string">'&#123;0&#125;年&#123;1&#125;月&#123;2&#125;日 &#123;3&#125;时&#123;4&#125;分&#123;5&#125;秒'</span>;</span><br><span class="line"><span class="keyword">let</span> tmpReg = <span class="regexp">/\&#123;(\d)\&#125;/g</span>;</span><br><span class="line"><span class="keyword">let</span> result2 = tmp.replace(tmpReg, <span class="function"><span class="keyword">function</span> (<span class="params">[, index]</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> ary[index];</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(result2);</span><br></pre></td></tr></table></figure>

<ul>
<li>扩展到原型上</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.myFormatTime = <span class="function"><span class="keyword">function</span> (<span class="params">tmp = <span class="string">'&#123;0&#125;年&#123;1&#125;月&#123;2&#125;日 &#123;3&#125;时&#123;4&#125;分&#123;5&#125;秒'</span></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> ary = <span class="keyword">this</span>.match(<span class="regexp">/\d+/g</span>).map(<span class="function"><span class="params">item</span> =&gt;</span> +item &lt; <span class="number">10</span> ? <span class="string">'0'</span> + item : item);</span><br><span class="line">	<span class="keyword">return</span> tmp.replace(<span class="regexp">/\&#123;(\d)\&#125;/g</span>, (...[, index]) =&gt; ary[index]);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"2018/4/30 17:50:23"</span>.myFormatTime(<span class="string">'&#123;1&#125;-&#123;2&#125; &#123;3&#125;:&#123;4&#125;:&#123;5&#125;'</span>));</span><br></pre></td></tr></table></figure>

<h4 id="3-url查询参数格式化"><a href="#3-url查询参数格式化" class="headerlink" title="3. url查询参数格式化"></a>3. url查询参数格式化</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="string">'http://www.zhufeng.cn?name=mabin&amp;age=18&amp;form=zf&amp;addre=hebei'</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>把上面的url参数的转换成一个对象：{name: ‘mabin’, age: ‘18’}</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> params = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> reg3 = <span class="regexp">/([^?=&amp;]+)=([^?=&amp;]+)/g</span>;</span><br><span class="line">url.replace(reg3, (str, key, value) =&gt; params[key] = value);</span><br><span class="line"><span class="built_in">console</span>.log(params);</span><br></pre></td></tr></table></figure>

<ul>
<li>扩展到原型上</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.urlSeries = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> params = &#123;&#125;;</span><br><span class="line">	<span class="keyword">let</span> reg3 = <span class="regexp">/([^?=&amp;]+)=([^?=&amp;]+)/g</span>;</span><br><span class="line">	<span class="keyword">this</span>.replace(reg3, (str, key, value) =&gt; params[key] = value);</span><br><span class="line">	<span class="keyword">return</span> params</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> result3 = url.urlSeries();</span><br><span class="line"><span class="built_in">console</span>.log(result3);</span><br></pre></td></tr></table></figure>

<h4 id="4-获取数据类型"><a href="#4-获取数据类型" class="headerlink" title="4. 获取数据类型"></a>4. 获取数据类型</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.isTypeOf = <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> res = <span class="built_in">Object</span>.prototype.toString.call(val); <span class="comment">// "[object Xxxx]"</span></span><br><span class="line">	<span class="keyword">let</span> reg = <span class="regexp">/^\[object ([a-zA-Z]+)\]$/</span>; <span class="comment">// 在正则使用某些特殊元字符的原义时需要转义</span></span><br><span class="line">	<span class="keyword">let</span> exec = reg.exec(res)[<span class="number">1</span>];</span><br><span class="line">	<span class="keyword">return</span> exec.toLowerCase();</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.isTypeOf(<span class="number">1</span>));</span><br></pre></td></tr></table></figure>

<div style="text-align: right">【发上等愿，结中等缘，享下等福，择高处立，寻平处住，向宽处行】</div>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/12/24/JavaScript进阶教程5/" data-id="ck45l1ke70016s8ppgk28nxwe" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/12/24/JavaScript进阶教程6/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          进阶教程 6. JS 盒子模型属性
        
      </div>
    </a>
  
  
    <a href="/2018/11/22/JavaScript进阶教程4/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">进阶教程 4. 深入面向对象</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/Vue/" style="font-size: 15px;">Vue</a> <a href="/tags/es6/" style="font-size: 12.5px;">es6</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/webpack/" style="font-size: 17.5px;">webpack</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/12/09/webpack掠影-5/">webpack掠影-5</a>
          </li>
        
          <li>
            <a href="/2019/12/09/webpack掠影-6/">webpack掠影-6</a>
          </li>
        
          <li>
            <a href="/2019/12/08/webpack掠影-4/">webpack掠影-4</a>
          </li>
        
          <li>
            <a href="/2019/12/08/webpack掠影-3/">webpack掠影-3</a>
          </li>
        
          <li>
            <a href="/2019/12/08/webpack掠影-2/">webpack掠影-2</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Mabin<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>