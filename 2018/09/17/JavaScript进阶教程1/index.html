<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>进阶教程 1. 闭包、this、和面向对象 | Bin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="闭包、this、面向对象基础1. 闭包闭包定义： 江外解释：函数执行时形成一个私有作用域，保护里面的变量不受外界干扰，这种保护机制成为闭包。 市面理解：形成一个不销毁的私有作用域（私有栈内存）才是闭包  闭包应用：1. 柯里化函数柯里化函数思想：把多参数的函数变成单参数的函数 123456789101112function fn(a, b, c) &amp;#123;	return a + b + c;&amp;">
<meta name="keywords" content="javascript">
<meta property="og:type" content="article">
<meta property="og:title" content="进阶教程 1. 闭包、this、和面向对象">
<meta property="og:url" content="http://yoursite.com/2018/09/17/JavaScript进阶教程1/index.html">
<meta property="og:site_name" content="Bin">
<meta property="og:description" content="闭包、this、面向对象基础1. 闭包闭包定义： 江外解释：函数执行时形成一个私有作用域，保护里面的变量不受外界干扰，这种保护机制成为闭包。 市面理解：形成一个不销毁的私有作用域（私有栈内存）才是闭包  闭包应用：1. 柯里化函数柯里化函数思想：把多参数的函数变成单参数的函数 123456789101112function fn(a, b, c) &amp;#123;	return a + b + c;&amp;">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-11-01T03:45:18.657Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="进阶教程 1. 闭包、this、和面向对象">
<meta name="twitter:description" content="闭包、this、面向对象基础1. 闭包闭包定义： 江外解释：函数执行时形成一个私有作用域，保护里面的变量不受外界干扰，这种保护机制成为闭包。 市面理解：形成一个不销毁的私有作用域（私有栈内存）才是闭包  闭包应用：1. 柯里化函数柯里化函数思想：把多参数的函数变成单参数的函数 123456789101112function fn(a, b, c) &amp;#123;	return a + b + c;&amp;">
  
    <link rel="alternate" href="/atom.xml" title="Bin" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Bin</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">发上等愿，结中等缘，享下等福；择高处立，寻平处住，向宽处行；</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-JavaScript进阶教程1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/17/JavaScript进阶教程1/" class="article-date">
  <time datetime="2018-09-17T14:33:28.000Z" itemprop="datePublished">2018-09-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      进阶教程 1. 闭包、this、和面向对象
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="闭包、this、面向对象基础"><a href="#闭包、this、面向对象基础" class="headerlink" title="闭包、this、面向对象基础"></a>闭包、this、面向对象基础</h2><h3 id="1-闭包"><a href="#1-闭包" class="headerlink" title="1. 闭包"></a>1. 闭包</h3><h4 id="闭包定义："><a href="#闭包定义：" class="headerlink" title="闭包定义："></a>闭包定义：</h4><ul>
<li>江外解释：函数执行时形成一个私有作用域，保护里面的变量不受外界干扰，这种保护机制成为闭包。</li>
<li>市面理解：形成一个不销毁的私有作用域（私有栈内存）才是闭包</li>
</ul>
<h4 id="闭包应用："><a href="#闭包应用：" class="headerlink" title="闭包应用："></a>闭包应用：</h4><h5 id="1-柯里化函数"><a href="#1-柯里化函数" class="headerlink" title="1. 柯里化函数"></a>1. 柯里化函数</h5><p><code>柯里化函数思想：把多参数的函数变成单参数的函数</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">b</span>) </span>&#123; <span class="comment">// 这种在函数中return 函数的做法是市面中认为的闭包</span></span><br><span class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">c</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> a + b + c;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">fn1(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>);</span><br></pre></td></tr></table></figure>

<h4 id="2-利用闭包机制隔离全局命名空间"><a href="#2-利用闭包机制隔离全局命名空间" class="headerlink" title="2. 利用闭包机制隔离全局命名空间"></a>2. 利用闭包机制隔离全局命名空间</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// 自执行函数执行也是闭包</span></span><br><span class="line">	<span class="keyword">let</span> a = <span class="number">100</span>; <span class="comment">// a是一个私有变量，不会影响全局作用域中的变量命名</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h4 id="3-惰性封装"><a href="#3-惰性封装" class="headerlink" title="3. 惰性封装"></a>3. 惰性封装</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> utils = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> version = <span class="string">'1.0.1'</span>;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> a + b</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">minus</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> a - b;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		sum: sum,</span><br><span class="line">		minus: minus</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h4 id="4-利用闭包的不销毁作用域保存数据：累加计数、选项卡闭包版本"><a href="#4-利用闭包的不销毁作用域保存数据：累加计数、选项卡闭包版本" class="headerlink" title="4. 利用闭包的不销毁作用域保存数据：累加计数、选项卡闭包版本"></a>4. 利用闭包的不销毁作用域保存数据：累加计数、选项卡闭包版本</h4><h3 id="2-this"><a href="#2-this" class="headerlink" title="2. this"></a>2. this</h3><p>this是JS的关键字，代表当前代码执行的环境对象。一般在函数中使用，并且是在函数执行时，根据函数的不同执行方式确定不同的值。目前阶段有以下情况：</p>
<h4 id="1-事件函数中的this是绑定该事件的元素；"><a href="#1-事件函数中的this是绑定该事件的元素；" class="headerlink" title="1. 事件函数中的this是绑定该事件的元素；"></a>1. 事件函数中的this是绑定该事件的元素；</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> box = <span class="built_in">document</span>.getElementById(<span class="string">'box'</span>);</span><br><span class="line">box.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">// box 元素对象</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="2-自执行函数中的this是window"><a href="#2-自执行函数中的this是window" class="headerlink" title="2. 自执行函数中的this是window"></a>2. 自执行函数中的this是window</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h4 id="3-setTimeout-setInterval-定时器回调函数中的this指向window"><a href="#3-setTimeout-setInterval-定时器回调函数中的this指向window" class="headerlink" title="3. setTimeout/setInterval() 定时器回调函数中的this指向window"></a>3. setTimeout/setInterval() 定时器回调函数中的this指向window</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;, <span class="number">0</span>); <span class="comment">// 定时器写0也不会立刻执行，也需要等待其他同步代码执行完才会执行；</span></span><br></pre></td></tr></table></figure>

<h4 id="4-方法调用时，看方法前面是否有点-如果有点前面是谁，this就是谁，如果没方法中的this就是window"><a href="#4-方法调用时，看方法前面是否有点-如果有点前面是谁，this就是谁，如果没方法中的this就是window" class="headerlink" title="4.方法调用时，看方法前面是否有点 . 如果有点前面是谁，this就是谁，如果没方法中的this就是window"></a>4.方法调用时，看方法前面是否有点 . 如果有点前面是谁，this就是谁，如果没方法中的this就是window</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">13</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">	num: <span class="number">12</span>,</span><br><span class="line">	fn: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="keyword">this</span>.num);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.fn(); <span class="comment">// 12</span></span><br><span class="line">obj[<span class="string">'fn'</span>](); <span class="comment">// 12 obj['fn'] 等效于 obj.fn 所以，this仍然指向obj</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fn = obj.fn;</span><br><span class="line">fn(); <span class="comment">// 13；window.num</span></span><br></pre></td></tr></table></figure>

<h4 id="6-箭头函数中的this指向函数定义时所在作用域中的this"><a href="#6-箭头函数中的this指向函数定义时所在作用域中的this" class="headerlink" title="6. 箭头函数中的this指向函数定义时所在作用域中的this"></a>6. 箭头函数中的this指向函数定义时所在作用域中的this</h4><h5 id="箭头函数："><a href="#箭头函数：" class="headerlink" title="箭头函数："></a>箭头函数：</h5><p>ES6新增的语法：省略function关键字，在形参入口后增加 =&gt; 箭头，后面紧跟函数体；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> f = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> a + b;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">&#125;;</span><br><span class="line">f();</span><br></pre></td></tr></table></figure>

<h5 id="箭头函数的简化语法："><a href="#箭头函数的简化语法：" class="headerlink" title="箭头函数的简化语法："></a>箭头函数的简化语法：</h5><h5 id="1-只有一个形参时，可以省略-形参入口的小括号"><a href="#1-只有一个形参时，可以省略-形参入口的小括号" class="headerlink" title="1. 只有一个形参时，可以省略 形参入口的小括号"></a>1. 只有一个形参时，可以省略 形参入口的小括号</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> f2 = <span class="function"><span class="params">a</span> =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">var</span> x = <span class="number">10</span>;</span><br><span class="line">	x += a;</span><br><span class="line">	<span class="keyword">return</span> x;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="2-如果函数只有一行代码，或者只有return-指定返回值，可以省略函数体的花括号和return关键字"><a href="#2-如果函数只有一行代码，或者只有return-指定返回值，可以省略函数体的花括号和return关键字" class="headerlink" title="2. 如果函数只有一行代码，或者只有return 指定返回值，可以省略函数体的花括号和return关键字"></a>2. 如果函数只有一行代码，或者只有return 指定返回值，可以省略函数体的花括号和return关键字</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> transfer = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b;</span><br><span class="line"><span class="comment">// 等效于：</span></span><br><span class="line"><span class="keyword">let</span> transfer = <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="7-全局作用域中的this是window"><a href="#7-全局作用域中的this是window" class="headerlink" title="7. 全局作用域中的this是window"></a>7. 全局作用域中的this是window</h4><p>console.log(this);</p>
<h4 id="8-this在运行时不可以赋值"><a href="#8-this在运行时不可以赋值" class="headerlink" title="8. this在运行时不可以赋值"></a>8. this在运行时不可以赋值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span> = &#123;&#125;;  <span class="comment">// 报错</span></span><br></pre></td></tr></table></figure>

<h3 id="3-i和i"><a href="#3-i和i" class="headerlink" title="3. ++i和i++"></a>3. ++i和i++</h3><p><code>++i和i++都是给i累加1，但是加的时机不同</code></p>
<ul>
<li>++i 是先累加自身，然后再取累加后的值和其他值运算</li>
<li>i++ 是先取当前值和其他值运算，再累加自身</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">console</span>.log(++i); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(i++); <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">12</span>; <span class="comment">// 13 14</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">13</span>; <span class="comment">// 14 15</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(++a + a++ + b++ + ++b + a + b); <span class="comment">// 13 + 13 + 13 + 15 + 14 + 15 = 83</span></span><br></pre></td></tr></table></figure>

<h3 id="4-面向对象"><a href="#4-面向对象" class="headerlink" title="4. 面向对象"></a>4. 面向对象</h3><h4 id="面向过程"><a href="#面向过程" class="headerlink" title="面向过程"></a>面向过程</h4><p>面向过程：以过程为核心，研究现在要解决的问题，既不考虑以前，也不考虑将来，这段代码就解决现在的问题。如果以后再有相同的功能，就再写一遍相同的代码；</p>
<h4 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h4><p>面向对象：是一种对现实世界的理解和抽象的方法。面向对象关心现在的功能能分分类解决，现在解决过的问题，我们过往有没有类似的代码可以复用，我们现在的写的代码能不能给将来用。</p>
<h4 id="面向对象的研究范畴"><a href="#面向对象的研究范畴" class="headerlink" title="面向对象的研究范畴"></a>面向对象的研究范畴</h4><ul>
<li>对象：万事万物都是对象，每个对象都具备各自的属性和功能；</li>
<li>类：抽象事物的特性和特点，把对象分成不同的类型，例如老师类、学员类，类是一个是描述一群事物的共同特点的抽象概念；</li>
<li>实例：类中的一个具体的个体。这个个体既然属于类，那么这个个体一定具有这个类的所有的特性和功能。<ol>
<li>例如：人类就是一个类，人类最显著的特点是可以制造并使用工具。人类的属性有语言、智慧、吃饭、睡觉…. 每个人都是人类的一个实例，每个人都有这个类型中的所有的特性和属性。</li>
</ol>
</li>
</ul>
<h4 id="那么js的面向对象体现在哪里呢？"><a href="#那么js的面向对象体现在哪里呢？" class="headerlink" title="? 那么js的面向对象体现在哪里呢？"></a>? 那么js的面向对象体现在哪里呢？</h4><blockquote>
<p>在公开课阶段我们强调数据类型，其中强调的就是类型。例如数组类、普通对象类，这是因为数组类和对象的属性和方法不同。<br>例如数组是有序的键值对，还可以push，pop、splice等，而对象是无序的键值对之和，而且对象不可以pop<br>而 var ary = [1, 2] 是数组的一个实例，所以ary有所有数组的特性<br>而 var  obj = {name: 1} 是对象的一个实例；</p>
</blockquote>
<h4 id="JS中的内置类："><a href="#JS中的内置类：" class="headerlink" title="JS中的内置类："></a>JS中的内置类：</h4><ul>
<li>Object</li>
<li>Array</li>
<li>Date</li>
<li>RegExp</li>
<li>Function</li>
</ul>
<p><code>这些内置类都是函数数据类型的</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Array</span>); <span class="comment">// function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Object</span>); <span class="comment">// function</span></span><br></pre></td></tr></table></figure>

<h4 id="面向对象的研究范畴-1"><a href="#面向对象的研究范畴-1" class="headerlink" title="面向对象的研究范畴"></a>面向对象的研究范畴</h4><p><code>对于面向对象要求我们掌握 封装、类的继承和多态</code></p>
<h3 id="5-单例模式"><a href="#5-单例模式" class="headerlink" title="5. 单例模式"></a>5. 单例模式</h3><h4 id="普通单例"><a href="#普通单例" class="headerlink" title="普通单例"></a>普通单例</h4><p>在过往我们面向过程时，描述一个学员：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'张三'</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">18</span>;</span><br><span class="line"><span class="keyword">var</span> sex = <span class="string">'boy'</span>;</span><br></pre></td></tr></table></figure>

<p>描述另一个学员：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'李四'</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">19</span>;</span><br><span class="line"><span class="keyword">var</span> sex = <span class="string">'girl'</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这样做有一个问题，因为变量只能代表一个值，全局变量后面的会覆盖前面的。导致前面的数据丢失。<br>为了解决这个问题，我们现在在描述一个事物，我们可以使用一个对象，因为对象是用来描述一个事物的，而对象的属性就是定性描述这个对象的特征，而属性值是定量的描述事物的这个特征。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> stu1 = &#123;</span><br><span class="line">	name: <span class="string">'zhangsan'</span>,</span><br><span class="line">	age: <span class="number">18</span>,</span><br><span class="line">	sex: <span class="string">'boy'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> stu2 = &#123;</span><br><span class="line">	name: <span class="string">'李四'</span>,</span><br><span class="line">	age: <span class="number">19</span>,</span><br><span class="line">	sex: <span class="string">'girl'</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>像上面这样，把描述一个事物的属性放到一个对象内这种封装方式称为单例模式。<br>单例模式的优点是解决了全局变量互相覆盖的问题，这样stu1的name和stu2的name没有关系，因为stu1和stu2是两个不同的对象，此时stu1和stu2代表的对象叫做单例，而stu1和stu2这两个变量名称为命名空间；</p>
<h4 id="高级单例"><a href="#高级单例" class="headerlink" title="高级单例"></a>高级单例</h4><p>高级单例：高级单例模式不再是直接将一个对象赋值给命名空间，而是先执行一个自执行函数，在函数执行结束时返回一个对象；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">eat</span>(<span class="params">food</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">`I like eating <span class="subst">$&#123;food&#125;</span>`</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">hobby</span>(<span class="params">h</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">`I like playing <span class="subst">$&#123;h&#125;</span>`</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> account = <span class="string">'$10000000'</span>;</span><br><span class="line">	<span class="keyword">var</span> name = <span class="string">'王老五'</span>;</span><br><span class="line">	<span class="keyword">var</span> age = <span class="number">40</span>;</span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		name: name,</span><br><span class="line">		age: age,</span><br><span class="line">		eat: eat,</span><br><span class="line">		hobby: hobby</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<ul>
<li>这样写，有一个优势，我们可以在自执行函数的作用域中声明变量和函数，这个作用域不会销毁，我们可以在最后返回对象里面选择导出哪些变量和方法给外界使用，不导出的，外界拿不到；</li>
</ul>
<p><code>单例模式虽然好用，但是有一个问题，有一个对象，我们就需要写一个这个对象，很繁琐。</code></p>
<h3 id="6-工厂模式"><a href="#6-工厂模式" class="headerlink" title="6. 工厂模式"></a>6. 工厂模式</h3><p><code>如何批量生产？</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reg</span>(<span class="params">name, age, sex</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> obj = &#123;&#125;; <span class="comment">// 原材料</span></span><br><span class="line">	obj.name = name; <span class="comment">// 加工</span></span><br><span class="line">	obj.age = age; <span class="comment">// 加工</span></span><br><span class="line">	obj.sex = sex; <span class="comment">// 加工</span></span><br><span class="line">	<span class="keyword">return</span> obj; <span class="comment">// 出厂</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> s1 = reg(<span class="string">'阿三'</span>, <span class="number">19</span>, <span class="string">'boy'</span>);</span><br><span class="line"><span class="keyword">let</span> s2 = reg(<span class="string">'李四'</span>, <span class="number">18</span>, <span class="string">'girl'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(s1 === s2); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<ul>
<li>工厂模式：像上面这样，把实现相同供的函数封装成一个函数，当我们需要创建一个实例的时候，我们就执行这个函数即可，并且每个对象都是单例；</li>
<li>优势：高内聚，低耦合 提高了代码的复用度</li>
</ul>
<blockquote>
<p>工厂模式虽然解决了批量生产的问题，但是我们说面向对象还要有类的概念，但是这种方式生产的对象都是同一类，没有分类。</p>
</blockquote>
<ul>
<li>思考？内置的类型都有类型的概念？</li>
</ul>
<p>js有两种创建数据的方式，一种是字面量，另一种是实例的方式，例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">obj.name = <span class="string">'李四'</span>;</span><br><span class="line">obj.age = <span class="number">19</span>;</span><br><span class="line">obj.sex = <span class="string">'girl'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj);</span><br></pre></td></tr></table></figure>

<p>// ? 为什么js可以通过new 操作符来生成实例？而且是有类型的？我们的可以不可以呢？</p>
<p>var obj2 = new reg(‘li’, 13, ‘g’);<br>console.log(obj2); // 同样获取了一个实例对象，但是没有发现类型</p>
<h3 id="7-构造函数模式"><a href="#7-构造函数模式" class="headerlink" title="7. 构造函数模式"></a>7. 构造函数模式</h3><blockquote>
<p>前面的工厂模式已经可以批量生产了，但是还是没有我们所说的面向对象中类型的概念。为了有类型的概念，我们需要构造函数模式。</p>
</blockquote>
<p>构造函数：构造函数也是一个函数，但是调用方式有别于工厂函数：</p>
<ol>
<li>调用方式不同，构造函数只能通过new操作符调用；</li>
<li>工厂函数内需要手动创建对象实例，而构造函数模式不需要手动创建对象，在构造函数被new执行时，构造函数中的this自动和实例绑定，所以我们所有的加工都发生在this上；</li>
<li>工厂函数需要手动返回对象实例，而构造函数在被new操作符调用时不需要手动返回实例；</li>
</ol>
<h4 id="构造函数模式："><a href="#构造函数模式：" class="headerlink" title="构造函数模式："></a>构造函数模式：</h4><p>通过new调用一个函数，此时这个函数不再是普通函数，而是成为一个类，函数名称为类名，而通过new调用，自动返回这个类的一个实例。在构造函数中，我们需要抽象这个类型的属性和功能；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Teacher</span>(<span class="params">name, age, subject, from</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">	<span class="keyword">this</span>.mission = <span class="string">'传道受业解惑'</span>;</span><br><span class="line">	<span class="keyword">this</span>.age = age;</span><br><span class="line">	<span class="keyword">this</span>.subject = subject;</span><br><span class="line">	<span class="keyword">this</span>.from = <span class="keyword">from</span>;</span><br><span class="line">	<span class="keyword">this</span>.teach = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;name&#125;</span> 老师教 <span class="subst">$&#123;subject&#125;</span> 学科`</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125; <span class="comment">// Teacher是一个类，这里类型抽象了老师的属性，一个老师有的属性有姓名，年龄，教授学科，哪个学校的老师，以及老师会讲课的功能。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个实例：</span></span><br><span class="line"><span class="keyword">let</span> mrMa = <span class="keyword">new</span> Teacher(<span class="string">'马宾'</span>, <span class="number">18</span>, <span class="string">'js'</span>, <span class="string">'江外琉璃'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(mrMa);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mrJiang = <span class="keyword">new</span> Teacher(<span class="string">'陆辉'</span>, <span class="number">19</span>, <span class="string">'Architect-FE师'</span>, <span class="string">'江外琉璃'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(mrJiang);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> mrJiang); <span class="comment">// object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> mrMa); <span class="comment">// object</span></span><br></pre></td></tr></table></figure>

<ul>
<li>通过浏览器控制台查看，这两个实例（对象）的前面出现了 Teacher，此时说明mrMa和mrJiang都属于Teacher类的实例。</li>
</ul>
<h3 id="instanceof-运算符"><a href="#instanceof-运算符" class="headerlink" title="instanceof 运算符"></a>instanceof 运算符</h3><ul>
<li>如何检测当前对象是否是当前类型的实例：</li>
</ul>
<h4 id="instanceof-运算符：检测对象是否是某个类型的实例，如果是true，否则返回false"><a href="#instanceof-运算符：检测对象是否是某个类型的实例，如果是true，否则返回false" class="headerlink" title="instanceof 运算符：检测对象是否是某个类型的实例，如果是true，否则返回false"></a>instanceof 运算符：检测对象是否是某个类型的实例，如果是true，否则返回false</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(mrJiang <span class="keyword">instanceof</span> Teacher);</span><br><span class="line"><span class="built_in">console</span>.log(mrMa <span class="keyword">instanceof</span> Teacher);</span><br><span class="line"><span class="built_in">console</span>.log([] <span class="keyword">instanceof</span> Teacher);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log([] <span class="keyword">instanceof</span> <span class="built_in">Object</span>); <span class="comment">//</span></span><br><span class="line"><span class="built_in">console</span>.log(mrJiang <span class="keyword">instanceof</span> <span class="built_in">Object</span>);</span><br><span class="line"><span class="built_in">console</span>.log(mrMa <span class="keyword">instanceof</span> <span class="built_in">Object</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>但是因为Object是基类，所有实例都是对象数据类型的，所以用instanceof检测是否是Object的实例，都会返回true；</li>
</ul>
<div style="text-align: right">【发上等愿，结中等缘，享下等福，择高处立，寻平处住，向宽处行】</div>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/09/17/JavaScript进阶教程1/" data-id="ck3wsxcao0003bkpptk3qd31e" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/10/07/JavaScript进阶教程3/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          进阶教程 3. JS 的堆栈内存管理
        
      </div>
    </a>
  
  
    <a href="/2018/09/17/JavaScript进阶教程2/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">进阶教程 2. 变量提升</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/Vue/" style="font-size: 17.5px;">Vue</a> <a href="/tags/es6/" style="font-size: 15px;">es6</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/webpack/" style="font-size: 12.5px;">webpack</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/12/08/webpack掠影-2/">webpack掠影-2</a>
          </li>
        
          <li>
            <a href="/2019/12/07/webpack掠影-1/">webpack掠影-1</a>
          </li>
        
          <li>
            <a href="/2019/10/25/JavaScript进阶教程16/">进阶教程 16. PromiseA+</a>
          </li>
        
          <li>
            <a href="/2019/10/06/JavaScript进阶教程15/">进阶教程 15. Promise 用法详解</a>
          </li>
        
          <li>
            <a href="/2019/09/15/JavaScript进阶教程14/">进阶教程 14. 跨域和同源策略</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Mabin<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>