<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>Bin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="keywords" content="FE">
<meta property="og:type" content="website">
<meta property="og:title" content="Bin">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Bin">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Bin">
  
    <link rel="alternate" href="/atom.xml" title="Bin" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Bin</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">发上等愿，结中等缘，享下等福；择高处立，寻平处住，向宽处行；</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-JavaScript进阶教程9" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/15/JavaScript进阶教程9/" class="article-date">
  <time datetime="2019-03-15T11:55:12.000Z" itemprop="datePublished">2019-03-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/15/JavaScript进阶教程9/">进阶教程 9. DOM 事件</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="DOM事件"><a href="#DOM事件" class="headerlink" title="DOM事件"></a>DOM事件</h2><h3 id="事件及常见的事件"><a href="#事件及常见的事件" class="headerlink" title="事件及常见的事件"></a>事件及常见的事件</h3><blockquote>
<p>事件：文档（html元素及document）或者浏览器的窗口发生的一些特定的交互瞬间；可以监听这些事件，来实现在事件发生时执行特定的操作；</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> btn = <span class="built_in">document</span>.querySelector(<span class="string">'.btn'</span>);</span><br><span class="line"><span class="keyword">let</span> box = <span class="built_in">document</span>.querySelector(<span class="string">'.box'</span>);</span><br></pre></td></tr></table></figure>

<h4 id="常见的事件："><a href="#常见的事件：" class="headerlink" title="常见的事件："></a>常见的事件：</h4><ul>
<li><p>1.1 鼠标事件：鼠标动作时触发的事件</p>
<ul>
<li>元素.onclick = function() {} 单击事件</li>
<li>元素.ondbclick = function () {} 双击事件</li>
<li>元素.onmouseenter = function () {} 鼠标移入</li>
<li>元素.onmouseleave = function () {} 鼠标移出</li>
<li>元素.onmouseover = function () {} 鼠标滑过</li>
<li>元素.onmouseout = function () {} 鼠标划出</li>
<li>元素.onmousemove = function () {} 鼠标移动</li>
<li>元素.onmousedown = function () {} 鼠标按下</li>
<li>元素.onmmouseup = function () {} 鼠标抬起</li>
<li>元素.onmousewheel = function () {} 鼠标滚轮滚动</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">box.onmouseover = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">1111</span>)</span><br><span class="line">&#125;;</span><br><span class="line">box.onmouseout = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">2222</span>)</span><br><span class="line">&#125;;</span><br><span class="line">box.onmousedown = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'3333'</span>)</span><br><span class="line">&#125;;</span><br><span class="line">box.onmouseup = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">4444</span>)</span><br><span class="line">&#125;;</span><br><span class="line">box.onmousewheel = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">555</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>1.2  键盘事件：一般inputtextareadocument.bodydocumentwindowdocument.documentElement监听键盘事件<ul>
<li>元素.onkeydown = function() {} 键盘按下</li>
<li>元素.onkeyup = function () {} 键盘抬起</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> input = <span class="built_in">document</span>.querySelector(<span class="string">'#input'</span>);</span><br><span class="line">input.onkeydown = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'123'</span>)</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">document</span>.onkeyup = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'keyup'</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.onkeydown = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'window key down'</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>1.3 表单元素事件<ul>
<li>onfocus 获取焦点（光标）事件</li>
<li>onblur 失去焦点时触发</li>
<li>onchange 事件，表单的值（value）发生改变时触发</li>
<li>oninput input、textarea等元素的输入事件</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">input.onfocus = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'获取焦点'</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">input.onblur = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'失去焦点'</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">input.oninput = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span>.value);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>1.4 系统事件：<ul>
<li>window.onload 页面中所有的资源全部加载完触发</li>
<li>window.onresize 当前窗口尺寸发生改变时触发</li>
<li>window.onsroll 滚动条滚动时触发</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onresize = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'变了、变了'</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>1.5 移动端事件`<br>ontouchstart 触摸元素时触发<br>ontouchend 离开元素时触发<br>ontouchmove 滑动时触发</p>
</li>
<li><p>移动端使用click大概有300ms的延迟</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">box.ontouchstart = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'start'</span>);</span><br><span class="line">&#125;;</span><br><span class="line">box.ontouchend = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'end'</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="1-2-事件对象"><a href="#1-2-事件对象" class="headerlink" title="1.2 事件对象"></a>1.2 事件对象</h4><blockquote>
<p>在事件触发时，浏览器传递给事件函数的实参；其中包含了本次事件触发的具体信息；</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> box = <span class="built_in">document</span>.querySelector(<span class="string">'.box'</span>);</span><br><span class="line"></span><br><span class="line">box.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(e);  MouseEvent e一般称为事件对象，</span><br><span class="line">	 e.clientX 鼠标点击的位置相对于当前浏览器可视窗口的 左偏移值</span><br><span class="line">	 e.clientY 鼠标点击位置相对于当前浏览器可视窗口的 上偏移值</span><br><span class="line">	 e.pageX 鼠标点击位置相对于body左边缘的偏移值</span><br><span class="line">	 e.pageY 鼠标点击位置相对于body上边缘的偏移值</span><br><span class="line">	 e.target 触发事件的元素（点击事件中是点击的元素）对象，称为事件源</span><br><span class="line"></span><br><span class="line">	 IE事件触发时把事件信息挂载在<span class="built_in">window</span>.event  这个属性上</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.onkeydown = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">	 键盘事件 KeyboardEvent </span><br><span class="line">	<span class="built_in">console</span>.log(e);</span><br><span class="line">	<span class="built_in">console</span>.log(e.keyCode);</span><br><span class="line">	 e.keyCode 键码：键盘上每个键对应一个键码，当keydown事件触发时，</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="1-3-默认事件和默认行为"><a href="#1-3-默认事件和默认行为" class="headerlink" title="1.3 默认事件和默认行为"></a>1.3 默认事件和默认行为</h4><blockquote>
<p>有些元素时由默认行为的，如a标签点击会跳转。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> baidu = <span class="built_in">document</span>.getElementById(<span class="string">'baidu'</span>);</span><br><span class="line"> 阻止默认行为：</span><br><span class="line">baidu.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">	alert(<span class="number">111</span>);</span><br><span class="line">	e.preventDefault();  阻止元素的事件默认行为</span><br><span class="line">	 IE 低版本：e.returnValue = <span class="literal">false</span></span><br><span class="line">	 <span class="keyword">return</span> <span class="literal">false</span>;  <span class="keyword">return</span> <span class="literal">false</span>也可以阻止默认行为</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="1-4-事件传播："><a href="#1-4-事件传播：" class="headerlink" title="1.4 事件传播："></a>1.4 事件传播：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> $ = <span class="function">(<span class="params">selector</span>) =&gt;</span> <span class="built_in">document</span>.querySelector(selector);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> outer = $(<span class="string">'.outer'</span>);</span><br><span class="line"><span class="keyword">let</span> inner = $(<span class="string">'.inner'</span>);</span><br><span class="line"><span class="keyword">let</span> center = $(<span class="string">'.center'</span>);</span><br><span class="line"><span class="built_in">document</span>.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'document'</span>)</span><br><span class="line">&#125;;</span><br><span class="line">outer.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'outer'</span>)</span><br><span class="line">&#125;;</span><br><span class="line">inner.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'inner'</span>)</span><br><span class="line">&#125;;</span><br><span class="line">center.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'center'</span>);</span><br><span class="line">	e.stopPropagation();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>点击center会触发center的点击事件，同时inner和outer的以及更高层级的元素的点击事件也会被触发。这种现象称为事件的冒泡机制；</li>
</ul>
<p>事件的触发过程：事件的触发分为两个三个阶段：捕获阶段、目标阶段、冒泡阶段。在事件触发时，浏览器先从最外层的元素开始找，一直找到事件源的过程称为捕获阶段，触发事件源绑定事件后开始向上冒泡，依次触发父级元素的该事件；</p>
<ul>
<li><p>元素.onXXX = func… 绑定的事件都是DOM0级事件，DOM0级事件都是绑定再冒泡阶段的。</p>
</li>
<li><p>取消冒泡：e.stopPropagation()</p>
<ul>
<li>IE低版本：e.cancelBubble = true;</li>
<li>取消冒泡后，事件不会再向上传播；更高层级的元素的对应事件不会触发；</li>
</ul>
</li>
</ul>
<h3 id="1-5-onmouseover和mouseenter"><a href="#1-5-onmouseover和mouseenter" class="headerlink" title="1.5 onmouseover和mouseenter"></a>1.5 onmouseover和mouseenter</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> $ = <span class="function"><span class="params">selector</span> =&gt;</span> <span class="built_in">document</span>.querySelector(selector);</span><br><span class="line"><span class="keyword">let</span> inner = $(<span class="string">'.inner'</span>);</span><br><span class="line"><span class="keyword">let</span> outer = $(<span class="string">'.outer'</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>mouseover</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">inner.onmouseover = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'inner over'</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">inner.onmouseout = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'inner out'</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">outer.onmouseover = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'outer over'</span>)</span><br><span class="line">&#125;;</span><br><span class="line">outer.onmouseout = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'outer out'</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>mouseenter</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">inner.onmousenter = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'inner enter'</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">inner.onmouseleave = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'inner leave'</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">outer.onmouseenter = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'outer enter'</span>)</span><br><span class="line">&#125;;</span><br><span class="line">outer.onmouseleave = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'outer leave'</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>mouseenter &amp; mouseover的区别：</p>
<ol>
<li><p>over属于划过事件，从父元素进入子元素，属于离开了父元素，会触发父元素的out事件，然后触发子元素的over事件；</p>
</li>
<li><p>enter属于进入，从父元素进入子元素，不算离开父元素，不会触发父元素的leave事件；</p>
</li>
<li><p>enter和leave是阻止了事件冒泡的，而over和out还存在冒泡传播；</p>
</li>
</ol>
</li>
</ul>
<p>__ 所以对于父子嵌套的这种情况，使用over会触发很多不可控的情况，使用enter更加简单。__</p>
<h3 id="二、-onload和DOMContentLoaded"><a href="#二、-onload和DOMContentLoaded" class="headerlink" title="二、 onload和DOMContentLoaded"></a>二、 onload和DOMContentLoaded</h3><ul>
<li><ol>
<li>onload事件：加载成功后执行</li>
</ol>
</li>
<li><p>window.onlaod 是页面中所有的资源（css、js、图片等）全部加载完成后才会触发：</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'加载完成了'</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><ol start="2">
<li>DOMContentLoaded: 只要页面中的DOM结构加载完成后就可以触发</li>
</ol>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'DOM结构加载完成了'</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>JS是用来操作DOM的，一般需要在DOM加载结束以后再执行JS。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// 以后经常有人会这样写代码，把js这在这个函数中，表示DOM结构加载完成后再执行</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="三、事件委托"><a href="#三、事件委托" class="headerlink" title="三、事件委托"></a>三、事件委托</h3><ul>
<li>页面中有10个li，点击哪个li，就弹出该li的文本内容</li>
</ul>
<p>let liList = document.querySelectorAll(‘#list &gt; li’);</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; liList.length; i++) &#123;</span><br><span class="line">	liList[i].onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		alert(<span class="keyword">this</span>.innerText);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>利用事件委托：把事件绑定给父级元素或者更高级元素，然后根据e.target事件源作出不同操作；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = <span class="built_in">document</span>.querySelector(<span class="string">'#list'</span>);</span><br><span class="line">list.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> &#123; target &#125; = e;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 一般根据事件源的tagName来区分当前点击的是哪个元素</span></span><br><span class="line">	<span class="keyword">if</span> (target.tagName.toLowerCase() === <span class="string">'li'</span>) &#123;</span><br><span class="line">		alert(target.innerText);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>循环绑定事件的效率低，而且不适用于动态绑定的数据。</li>
<li>事件委托：利用的是事件的冒泡传播机制，给里面的每个子元素绑定相同的事件行为，把事件绑定给他们共同的上级元素，然后利用e.target区分具体触发事件的元素，然后做不同的操作；</li>
</ul>
<div style="text-align: right">【发上等愿，结中等缘，享下等福，择高处立，寻平处住，向宽处行】</div>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/15/JavaScript进阶教程9/" data-id="ck3wwoklf001bg4pplz42ky04" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaScript进阶教程8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/22/JavaScript进阶教程8/" class="article-date">
  <time datetime="2019-02-22T13:37:42.000Z" itemprop="datePublished">2019-02-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/22/JavaScript进阶教程8/">进阶教程 8. 继承详解</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="一、JS中的继承方式："><a href="#一、JS中的继承方式：" class="headerlink" title="一、JS中的继承方式："></a>一、JS中的继承方式：</h3><p>面向对象：（类和实例）</p>
<ul>
<li>继承 子类继承父类</li>
<li>封装 为实例添加方法、为原型增加方法</li>
<li>多态（重写、重载）</li>
</ul>
<blockquote>
<p>继承：两个类A B ，想让B类的实例使用A类上的属性和方法，就需要让B类继承A类，我们称B类为子类，A类为父类（超类）</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Super</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">A.prototype.say = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'hello World'</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> B();</span><br><span class="line"></span><br><span class="line"> b是B类的实例 想使用A类的属性和方法</span><br><span class="line"><span class="built_in">console</span>.log(b.say);  <span class="literal">undefined</span></span><br><span class="line"></span><br><span class="line"> 为啥是<span class="literal">undefined</span>？对象.属性名 先看自己是否有着私有属性，如果私有属性没有，就去实例所属类的原型查找公有的属性和方法，如果原型上也没有，就根据原型对象的__proto__ 一直找到<span class="built_in">Object</span>基类的原型上为止，如果还没有就返回<span class="literal">undefined</span>；</span><br><span class="line"></span><br><span class="line">现在需要b可以使用A类的say方法，现在就需要继承；</span><br></pre></td></tr></table></figure>

<h4 id="1-1-原型链继承"><a href="#1-1-原型链继承" class="headerlink" title="1.1 原型链继承"></a>1.1 原型链继承</h4><ul>
<li>原型继承： 将子 类B的原型对象 重写成父类A的一个实例。<blockquote>
<p>B.prototype = new A();<br>把父类共有属性和私有属性变成子类的公有属性</p>
</blockquote>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">A.prototype.age = <span class="number">19</span>;</span><br><span class="line">A.prototype.say = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'来自A类原型的say方法'</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">B.prototype = <span class="keyword">new</span> A();  把B类的原型改写成一个A类的实例；</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> B();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br><span class="line"><span class="built_in">console</span>.log(b.__proto__);  &#123;<span class="attr">text</span>: <span class="string">'xxx'</span>, __proto__....&#125;</span><br><span class="line"><span class="built_in">console</span>.log(b.age);</span><br><span class="line"><span class="built_in">console</span>.log(b.say);</span><br></pre></td></tr></table></figure>

<p>把B的原型改写成A类的一个实例，此时通过 b.age 访问b的age属性，首先在私有属性中查找，私有属性中没有age属性，接着去b所属类的原型（B.prototype）上查找，此时原型对象是A的实例对象，在原型对象也没有age属性，然后通过原型对象的<strong>proto</strong>就找到了A.prototype上，A的prototype上有age属性</p>
<ul>
<li>原型继承是把子类公有的属性和私有的属性都变成了子类私有的属性；</li>
<li>缺点：改写子类的原型对象，会导致子类原型对象上的constructor属性被改写，需要重新指定继承后的constructor；</li>
</ul>
<h4 id="1-2-借用构造函数继承"><a href="#1-2-借用构造函数继承" class="headerlink" title="1.2 借用构造函数继承"></a>1.2 借用构造函数继承</h4><blockquote>
<p>借用构造函数：把父类当做普通函数，在子类的函数体中call执行父类的函数；</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.a = <span class="string">'aa'</span>;</span><br><span class="line">	<span class="keyword">this</span>.say = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'A say'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">A.prototype.public = <span class="string">'public'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	A.call(<span class="keyword">this</span>);  <span class="keyword">this</span>是B类的一个实例，A.call(<span class="keyword">this</span>) 的意思是把A中的<span class="keyword">this</span>就该成B的实例（而在B的构造函数中<span class="keyword">this</span>就是B的实例）这样在A中通过<span class="keyword">this</span>.xxx = xxx 的方式添加的属性都会添加到B的实例身上。</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> B();</span><br><span class="line"><span class="built_in">console</span>.log(b);  &#123;<span class="attr">a</span>: <span class="string">'aa'</span>, <span class="attr">say</span>: fun.....&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b2 = <span class="keyword">new</span> B();</span><br><span class="line"><span class="built_in">console</span>.log(b2.say === b.say);  <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>

<p>借用构造函数继承：</p>
<ul>
<li>把父类当做普通函数，在子类的函数体里面，通过call方法执行 A.call(this)</li>
<li>call方法是用来修改this指向的，这样一来就把A中的this修改成了b的实例；在函数A中通过this.xxx = xxx 添加的属性都添加到了B的实例身上；</li>
<li>特点：只能把父类的私有属性和方法继承为子类的私有属性和方法；</li>
</ul>
<h4 id="1-3-组合继承"><a href="#1-3-组合继承" class="headerlink" title="1.3 组合继承"></a>1.3 组合继承</h4><p>组合继承：原型链继承 + 借用构造函数继承</p>
<ul>
<li>原型链继承：把父类私有的和共有的继承为子类公有的；</li>
<li>借用构造函数继承：把父类私有的继承为子类私有的</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.a = <span class="string">'私有的'</span></span><br><span class="line">&#125;</span><br><span class="line">A.prototype.text = <span class="string">'公有'</span>;</span><br><span class="line">A.prototype.say = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'A公有的say方法'</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	A.call(<span class="keyword">this</span>);  借用构造函数继承，继承父类私有的</span><br><span class="line">&#125;</span><br><span class="line">B.prototype = <span class="keyword">new</span> A();  原型链继承，继承父类私有和公有的属性；</span><br><span class="line">B.prototype.constructor = B;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> B();</span><br><span class="line"><span class="built_in">console</span>.log(b.text);  公有的</span><br><span class="line"><span class="built_in">console</span>.log(b.a);  私有的</span><br></pre></td></tr></table></figure>

<ul>
<li>组合继承也并非没有缺点，组合继承会父类的私有继承两次，一份在借用构造函数继承时成为私有的，而另一份是在原型继承时成为公有的；</li>
</ul>
<h4 id="1-4-原型式继承"><a href="#1-4-原型式继承" class="headerlink" title="1.4 原型式继承"></a>1.4 原型式继承</h4><p>原型式继承：把父类的公有属性继承为子类的公有属性；</p>
<p>创建一个新的对象，并且新对象的<strong>proto</strong>指向A.prototype，最后把这个新对象作为B类的原型；</p>
<ul>
<li><p>创建一个对象，并且对象的<strong>proto</strong> 指向obj</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.create(obj)</span><br></pre></td></tr></table></figure>
</li>
<li><p>原型式继承示例</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.private = <span class="string">'private私有'</span>;</span><br><span class="line">&#125;</span><br><span class="line">A.prototype.public = <span class="string">'public公有'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">B.prototype = <span class="built_in">Object</span>.create(A.prototype);  创建一个指定原型的对象 创建一个对象，并且这个对象的__proto__ 指向A.prototype</span><br><span class="line"></span><br><span class="line">B.prototype.constructor = B;  原型式继承同样是修改B类原型的指向，所以需要重新指定构造函数</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> B();</span><br><span class="line"><span class="built_in">console</span>.log(b.public);</span><br></pre></td></tr></table></figure>

<h4 id="1-5-寄生组合式继承"><a href="#1-5-寄生组合式继承" class="headerlink" title="1.5 寄生组合式继承"></a>1.5 寄生组合式继承</h4><ul>
<li>寄生组合式继承：原型式继承 + 借用构造函数继承</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.private = <span class="string">'私有属性'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">A.prototype.public = <span class="string">'公有属性'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	A.call(<span class="keyword">this</span>);  借用构造函数继承</span><br><span class="line">	<span class="keyword">this</span>.name = <span class="string">'b私有的'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> 原型式继承：把父类公有的 继承为子类实例公有的</span><br><span class="line">B.prototype = <span class="built_in">Object</span>.create(A.prototype);</span><br><span class="line">B.prototype.constructor = B;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> B();  &#123;<span class="attr">name</span>: <span class="string">'私有的'</span>, <span class="attr">private</span>: <span class="string">'私有属性'</span>&#125;</span><br><span class="line"><span class="built_in">console</span>.log(b.private);  继承过来的私有属性</span><br><span class="line"><span class="built_in">console</span>.log(b.public);  继承过来到的公有属性</span><br></pre></td></tr></table></figure>

<h4 id="1-6-冒充对象继承"><a href="#1-6-冒充对象继承" class="headerlink" title="1.6 冒充对象继承"></a>1.6 冒充对象继承</h4><blockquote>
<p>冒充对象继承：在子类的构造函数中生成一个父类的实例，把父类的这个实例进行遍历，把属性都添加子类的实例上；</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.private = <span class="string">'私有属性'</span>;</span><br><span class="line">&#125;</span><br><span class="line">A.prototype.public = <span class="string">'公有属性'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = <span class="string">'B私有的属性'</span>;</span><br><span class="line">	<span class="keyword">let</span> tmp = <span class="keyword">new</span> A();</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> tmp) &#123;</span><br><span class="line">		<span class="keyword">this</span>[key] = tmp[key];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> B();</span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br></pre></td></tr></table></figure>

<h4 id="1-7-ES6中的类"><a href="#1-7-ES6中的类" class="headerlink" title="1.7 ES6中的类"></a>1.7 ES6中的类</h4><ul>
<li><p>ES5 一个函数就是一个类</p>
</li>
<li><p>ES6 借鉴后端语言，增加了class关键字，创建一个类</p>
</li>
<li><p>ES5</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Teacher</span>(<span class="params">name, age, subject</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">	<span class="keyword">this</span>.age = age;</span><br><span class="line">	<span class="keyword">this</span>.subject = subject;</span><br><span class="line">&#125;</span><br><span class="line">Teacher.motor = <span class="string">'传道 授业 解惑'</span>;</span><br><span class="line">Teacher.prototype.teach = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="keyword">this</span>.age);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> t = <span class="keyword">new</span> Teacher(<span class="string">'mabin'</span>, <span class="number">19</span>, <span class="string">'js'</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>ES6</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> </span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span> (name, age, subject) &#123;</span><br><span class="line">		 这里面通过<span class="keyword">this</span>.xxx = xxx 是给实例添加私有属性</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">		<span class="keyword">this</span>.subject = subject;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	 添加公有属性</span><br><span class="line">	teach () &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="keyword">this</span>.age + <span class="keyword">this</span>.subject);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	 添加静态方法</span><br><span class="line">	<span class="keyword">static</span> motor = <span class="string">'传道授业解惑'</span>;</span><br><span class="line">	<span class="keyword">static</span> getMotor () &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'We are U'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> t = <span class="keyword">new</span> Teacher(<span class="string">'马宾'</span>, <span class="number">18</span>, <span class="string">'JS'</span>);</span><br><span class="line">t.teach();</span><br><span class="line"><span class="built_in">console</span>.log(Teacher.motor);</span><br><span class="line">Teacher.getMotor();</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="1-7-ES6继承"><a href="#1-7-ES6继承" class="headerlink" title="1.7 ES6继承"></a>1.7 ES6继承</h4><p>ES6继承：extends关键字</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span> (name, age) &#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	 公有方法（添加到原型上）</span><br><span class="line">	say () &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span> say`</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> ES6继承时使用 extends 关键字实现继承</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span> </span>&#123;  B继承A类</span><br><span class="line">	<span class="keyword">constructor</span> (x, y, forName, forAge) &#123;</span><br><span class="line">		 注意：在使用ES6的extends关键字之前，必须使用<span class="keyword">super</span>(); <span class="keyword">super</span>表示父类的构造函数</span><br><span class="line">		<span class="keyword">super</span>(forName, forAge);  注意：</span><br><span class="line">		<span class="keyword">this</span>.x = x;</span><br><span class="line">		<span class="keyword">this</span>.y = y;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span> B(<span class="string">'x'</span>, <span class="string">'y'</span>, <span class="string">'mabin'</span>, <span class="number">18</span>);</span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br><span class="line">b.say();</span><br></pre></td></tr></table></figure>

<ul>
<li>ES6的继承原理是：寄生组合式继承</li>
</ul>
<div style="text-align: right">【发上等愿，结中等缘，享下等福，择高处立，寻平处住，向宽处行】<div>
</div></div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/02/22/JavaScript进阶教程8/" data-id="ck3wwoklb0017g4ppb6ic2egi" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaScript进阶教程7" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/01/17/JavaScript进阶教程7/" class="article-date">
  <time datetime="2019-01-17T14:45:07.000Z" itemprop="datePublished">2019-01-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/01/17/JavaScript进阶教程7/">进阶教程 7. JS 手写轮播图</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="轮播图原理及实现"><a href="#轮播图原理及实现" class="headerlink" title="轮播图原理及实现"></a>轮播图原理及实现</h1><h2 id="知识储备"><a href="#知识储备" class="headerlink" title="知识储备"></a>知识储备</h2><ul>
<li>jquery方法<ol>
<li>根据选择器获取元素；$(selector)</li>
<li>ajax 方法及配置参数 $.ajax({})</li>
<li>绑定事件 on方法</li>
<li>html() 方法</li>
<li>css() 方法</li>
<li>addClass()、removeClass() 方法</li>
<li>animate() 动画方法 finish() 结束动画方法</li>
</ol>
</li>
<li>定时器基础：<ol>
<li>js动画的原理就是利用定时器操作某个样式值缓慢增加，轮播图操作的是wrapper元素的left属性。</li>
<li>停止动画就是清除定时器，再次开启动画即重新开启定时器；</li>
<li>定时器setTimeout和setInterval的返回值是一个定时器id；</li>
<li>clearTimeout(定时器id)和clearInterval(定时器id)；</li>
</ol>
</li>
</ul>
<h2 id="轮播图需求："><a href="#轮播图需求：" class="headerlink" title="轮播图需求："></a>轮播图需求：</h2><ol>
<li>制作一个轮播图（又称焦点图），自动轮播，并且轮播图下焦点跟随切换；</li>
<li>当鼠标移入轮播图时，轮播图停止自动轮播，并且展示手动切换的箭头图标，当鼠标移出轮播图时，继续自动轮播，隐藏手动切换箭头图标；</li>
<li>当点击手动控制轮播箭头图标的时候，可以手动切换图片。如果点击左侧箭头，则切换至上一张，如果切换到第一张，再次点击则切换至最后一张，依此类推；如果点击右侧箭头，则切换至下一张，如果已经是最后一张，再次点击则切换至第一张，实现循环播放；</li>
<li>点击焦点时，对应索引的图片也要跟随切换；</li>
</ol>
<h2 id="轮播图原理："><a href="#轮播图原理：" class="headerlink" title="轮播图原理："></a>轮播图原理：</h2><ol>
<li>有一个外面的盒子container，container的宽度只能展示一张图片，其余的溢出隐藏。</li>
<li>在container里面有一个wrapper的盒子，里面装着很多张图片，这些图片在一行排列，而wrapper相对于container绝对定位，初始时left=0，所以默认展示第一张图片（第一张图片索引为0）。</li>
<li>轮播一次其实就是让wrapper盒子向左移动一张图片的距离（操作wrapper的left值），这样第二张（索引为1）图片就露出来了（此时wrapper的left的值是 负的1张图片的宽度），里面的盒子再向左移动一张，第三张（索引为2）就露出来了（此时wrapper的left值是 负的2张图片的宽度），依次类推，我们发现如果想让轮播图轮到第几张，就将wrapper的left值设置成：负的图片宽度*索引。</li>
</ol>
<table>
<thead>
<tr>
<th>展示图片</th>
<th>图片索引</th>
<th>wrapper的left值</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>0</td>
<td>0 * 图片宽度</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>-1 * 图片宽度</td>
</tr>
<tr>
<td>3</td>
<td>2</td>
<td>-2 * 图片宽度</td>
</tr>
<tr>
<td>4</td>
<td>3</td>
<td>-3 * 图片宽度</td>
</tr>
</tbody></table>
<ol start="4">
<li>综上，我们需要有个变量stepIndex，记录着要轮播的是第几张，让后轮播时就是让wrapper的left值就是负的stepIndex 乘以图片宽度，即 left = -1 * stepIndex * 1000(1000是图片宽度)</li>
</ol>
<h2 id="无缝轮播实现"><a href="#无缝轮播实现" class="headerlink" title="无缝轮播实现"></a>无缝轮播实现</h2><ol>
<li>我们首先复制一份第一张图片并且把复制的这个放到末尾，相当于真实图片的最后一张后面还有一个第一张的副本。</li>
<li>然后当轮播到最后一张的时候，这个时候展示的使我们第一步复制过来的第一张图片，下一次再轮播应该展示第二张图了。</li>
<li>这个时候我们将wrapper的left设置成0，然后left为0时展示的是真正的第一张，下一张要轮播的是第二张所以我们将stepIndex的值置为1（1就是第二张图的索引啊），然后再轮播就是第二张图了。</li>
<li>又因为浏览器设置wrapper的值基本不需要时间，所以给人的感觉就是无缝轮播的。</li>
</ol>
<h3 id="html代码"><a href="#html代码" class="headerlink" title="html代码"></a>html代码</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>江外琉璃-轮播图<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/reset.min.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/banner.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"container"</span> <span class="attr">id</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;div class="slide"&gt;&lt;img src="img/banner1.jpg" alt=""&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="comment">        &lt;div class="slide"&gt;</span></span><br><span class="line"><span class="comment">            &lt;img src="img/banner2.jpg" alt=""&gt;</span></span><br><span class="line"><span class="comment">        &lt;/div&gt;</span></span><br><span class="line"><span class="comment">        &lt;div class="slide"&gt;&lt;img src="img/banner3.jpg" alt=""&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="comment">        &lt;div class="slide"&gt;&lt;img src="img/banner4.jpg" alt=""&gt;&lt;/div&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"focus"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;li class="active"&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">         &lt;li&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">         &lt;li&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">         &lt;li&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript: void 0;"</span> <span class="attr">class</span>=<span class="string">"arrow arrowLeft"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript: void 0;"</span> <span class="attr">class</span>=<span class="string">"arrow arrowRight"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--&lt;section class="container" id="container2"&gt;</span></span><br><span class="line"><span class="comment">    &lt;div class="wrapper"&gt;</span></span><br><span class="line"><span class="comment">        &amp;lt;!&amp;ndash;&lt;div class="slide"&gt;&lt;img src="img/banner1.jpg" alt=""&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="comment">        &lt;div class="slide"&gt;</span></span><br><span class="line"><span class="comment">            &lt;img src="img/banner2.jpg" alt=""&gt;</span></span><br><span class="line"><span class="comment">        &lt;/div&gt;</span></span><br><span class="line"><span class="comment">        &lt;div class="slide"&gt;&lt;img src="img/banner3.jpg" alt=""&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="comment">        &lt;div class="slide"&gt;&lt;img src="img/banner4.jpg" alt=""&gt;&lt;/div&gt;&amp;ndash;&amp;gt;</span></span><br><span class="line"><span class="comment">    &lt;/div&gt;</span></span><br><span class="line"><span class="comment">    &lt;ul class="focus"&gt;</span></span><br><span class="line"><span class="comment">        &amp;lt;!&amp;ndash; &lt;li class="active"&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">         &lt;li&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">         &lt;li&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">         &lt;li&gt;&lt;/li&gt;&amp;ndash;&amp;gt;</span></span><br><span class="line"><span class="comment">    &lt;/ul&gt;</span></span><br><span class="line"><span class="comment">    &lt;a href="javascript:;" class="arrow arrowLeft"&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="comment">    &lt;a href="javascript:;" class="arrow arrowRight"&gt;&lt;/a&gt;</span></span><br><span class="line"><span class="comment">&lt;/section&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/banner.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;script&gt;--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--let b1 = new Banner(&#123;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ele: '#container',--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--url: 'json/banner.json',--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--speed: 100--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&#125;);--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--let b2 = new Banner(&#123;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ele: '#container2',--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--url: 'json/banner2.json',--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--interval: 1000,--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--speed: 500--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&#125;);--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;/script&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="css-代码"><a href="#css-代码" class="headerlink" title="css 代码"></a>css 代码</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">20px</span> auto;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1000px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">4000px</span>; <span class="comment">/*根据JS中获取的数据动态控制宽度*/</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.wrapper</span> <span class="selector-class">.slide</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1000px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.wrapper</span> <span class="selector-class">.slide</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.focus</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">999</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-50%); <span class="comment">/*基于CSS3中的TRANSFORM变形属性，在不固定的宽度的情况下实现水品居中 translateX:让当前元素在水平方向发生位移(此处-50%向左移动当前盒子的一半)*/</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(0, 0, 0, .5);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>; <span class="comment">/*让其为盒子高度的一半,这样把长方型的盒子修改为椭圆状*/</span></span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.focus</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#FFF</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.focus</span> <span class="selector-tag">li</span><span class="selector-class">.active</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#DB192A</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.arrow</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">22.5px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">28px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">45px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">"../img/pre.png"</span>) no-repeat;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0.3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.arrow</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.arrow</span><span class="selector-class">.arrowLeft</span> &#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.arrow</span><span class="selector-class">.arrowRight</span> &#123;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background-position</span>: -<span class="number">50px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="js代码"><a href="#js代码" class="headerlink" title="js代码"></a>js代码</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> bannerRender = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// -&gt; 获取后续需要操作的对象或者元素</span></span><br><span class="line">  <span class="keyword">let</span> container = $(<span class="string">'#container'</span>),</span><br><span class="line">    wrapper = $(<span class="string">'.wrapper'</span>),</span><br><span class="line">    focus = $(<span class="string">'.focus'</span>),</span><br><span class="line">    arrowLeft = $(<span class="string">'.arrowLeft'</span>),</span><br><span class="line">    arrowRight = $(<span class="string">'.arrowRight'</span>),</span><br><span class="line">    slideList = <span class="literal">null</span>,</span><br><span class="line">    focusList = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// =&gt; 轮播图运动的基础参数</span></span><br><span class="line">  <span class="keyword">let</span> stepIndex = <span class="number">0</span>; <span class="comment">// stepIndex 记录当前展示块的索引</span></span><br><span class="line">  <span class="keyword">let</span> autoTimer = <span class="literal">null</span>; <span class="comment">// autoTimer 自动轮播的定时器</span></span><br><span class="line">  <span class="keyword">let</span> interval = <span class="number">3000</span>; <span class="comment">// interval 间隔多长时间自动切换</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// autoMove：控制轮播图的运动和切换</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  * 索引为1，展示第二张，warpper 的left - 1000;</span></span><br><span class="line"><span class="comment">  * 索引为2， 展示第三章，wrapper的left - 2000；</span></span><br><span class="line"><span class="comment">  * ....</span></span><br><span class="line"><span class="comment">  * warpper的left值其实就是当前要展示的图片索引对应的结果 ：-索引 * 1000</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * */</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">autoMove</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    stepIndex++;</span><br><span class="line">    <span class="keyword">if</span> (stepIndex &gt;= slideList.length) &#123;</span><br><span class="line">      <span class="comment">// 说明再往后切换没有了，现在展示的是克隆的第一张，此时我们将wrapper设置到回到真实的第一张的位置，即left = 0，然后stepIndex = 1，这样就可以切换到第二张了</span></span><br><span class="line">      wrapper.css(<span class="string">'left'</span>, <span class="number">0</span>);</span><br><span class="line">      stepIndex = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    wrapper.animate(&#123;</span><br><span class="line">      left: -stepIndex * <span class="number">1000</span></span><br><span class="line">    &#125;, <span class="number">200</span>); <span class="comment">// 200 是从当前切换到下一张的动画时间 interval是间隔多久切换一次</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// -&gt; 每一次运动完成需要让焦点跟着切换</span></span><br><span class="line">    changeFocus();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// changeFocus: 让焦点跟着轮播图切换而切换（运动到克隆的这一张的时候，也需要让第一个li有选中的样式</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">changeFocus</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 当轮播图运动到最后一张（克隆的第一张，我们需要让第一个li有选中样式，之所以使用tempIndex是因为stepIndex对轮播图切换起着很大作用，不能轻易修改）</span></span><br><span class="line">    <span class="keyword">let</span> tempIndex = stepIndex;</span><br><span class="line">    tempIndex === slideList.length - <span class="number">1</span></span><br><span class="line">      ? tempIndex = <span class="number">0</span></span><br><span class="line">      : <span class="literal">null</span>;</span><br><span class="line">    focusList.each(<span class="function">(<span class="params">index, item</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (index === tempIndex) &#123;</span><br><span class="line">        $(item).addClass(<span class="string">'active'</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $(item).removeClass(<span class="string">'active'</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// queryDate：获取数据</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">queryData</span>(<span class="params">onSuccess, onError</span>) </span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">      url: <span class="string">'json/banner.json'</span>,</span><br><span class="line">      method: <span class="string">'GET'</span>,</span><br><span class="line">      dataType: <span class="string">'json'</span>,</span><br><span class="line">      <span class="keyword">async</span>: <span class="literal">false</span>,</span><br><span class="line">      success: onSuccess,</span><br><span class="line">      error: onError</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// bindHTML：数据绑定</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">bindHTML</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> strSlide = <span class="string">``</span>;</span><br><span class="line">    <span class="keyword">let</span> strFocus = <span class="string">``</span>;</span><br><span class="line">    data.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> &#123;</span><br><span class="line">        img = <span class="string">'img/banner1.jpg'</span>,</span><br><span class="line">        desc = <span class="string">'江外琉璃'</span></span><br><span class="line">      &#125; = item;</span><br><span class="line">      strSlide += <span class="string">`&lt;div class="slide"&gt;</span></span><br><span class="line"><span class="string">        &lt;img src="<span class="subst">$&#123;img&#125;</span>" alt="<span class="subst">$&#123;desc&#125;</span>"&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;`</span>;</span><br><span class="line"></span><br><span class="line">      strFocus += <span class="string">`&lt;li class="<span class="subst">$&#123;index === <span class="number">0</span> ? <span class="string">'active'</span> : <span class="string">''</span> &#125;</span>"&gt;&lt;/li&gt;`</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将第一张克隆一份放到最后</span></span><br><span class="line">    strSlide += <span class="string">`&lt;div class="slide"&gt;</span></span><br><span class="line"><span class="string">        &lt;img src="<span class="subst">$&#123;data[<span class="number">0</span>].img&#125;</span>" alt="<span class="subst">$&#123;data[<span class="number">0</span>].desc&#125;</span>"&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;`</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 插入到容器中</span></span><br><span class="line">    wrapper.html(strSlide);</span><br><span class="line">    focus.html(strFocus);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// -&gt; 获取所有的slide和li</span></span><br><span class="line">    slideList = $(<span class="string">'.slide'</span>);</span><br><span class="line">    focusList = $(<span class="string">'.focus &gt; li'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// -&gt; 根据slide的个数动态计算wrapper的宽度</span></span><br><span class="line">    wrapper.css(&#123;</span><br><span class="line">      width: slideList.length * <span class="number">1000</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// handleContainer 鼠标进入后停止自动轮播，离开后开始自动轮播；</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleContainer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    container.on(<span class="string">'mouseenter'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      clearInterval(autoTimer);</span><br><span class="line">      arrowLeft.css(&#123;</span><br><span class="line">        display: <span class="string">'block'</span></span><br><span class="line">      &#125;);</span><br><span class="line">      arrowRight.css(&#123;</span><br><span class="line">        display: <span class="string">'block'</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;).on(<span class="string">'mouseleave'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      clearInterval(autoTimer);</span><br><span class="line">      autoTimer = setInterval(autoMove, interval);</span><br><span class="line">      arrowLeft.css(&#123;</span><br><span class="line">        display: <span class="string">'none'</span></span><br><span class="line">      &#125;);</span><br><span class="line">      arrowRight.css(&#123;</span><br><span class="line">        display: <span class="string">'none'</span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 点击箭头切换轮播</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleArrow</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    arrowRight.click(autoMove);</span><br><span class="line">    arrowLeft.click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      stepIndex--;</span><br><span class="line">      <span class="keyword">if</span> (stepIndex &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 如果索引减减后小于0，说明当前已经是第一张，不能向右运动了，如果再减就该展示最后一张图片了（这里的最后一张应该是真实的最后一张图，而不是我们复制出来的那个），最后一张在slide中的位置是倒数第二，即索引位置是 length -2</span></span><br><span class="line">        wrapper.css(&#123;</span><br><span class="line">          left: -(slideList.length - <span class="number">1</span>) * <span class="number">1000</span></span><br><span class="line">        &#125;);</span><br><span class="line">        stepIndex = slideList.length - <span class="number">2</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      wrapper.finish().animate(&#123;</span><br><span class="line">        left: -stepIndex * <span class="number">1000</span></span><br><span class="line">      &#125;, <span class="number">200</span>);</span><br><span class="line">      changeFocus();</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 点击焦点切换</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">handleFocus</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    focusList.on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 给每个焦点绑定点击事件，点击的是谁，就让stepIndex的值等于谁的索引，然后运动到这里</span></span><br><span class="line">      <span class="keyword">let</span> focusIndex = $(<span class="keyword">this</span>).index();</span><br><span class="line">      stepIndex = index;</span><br><span class="line">        wrapper.finish().animate(&#123;</span><br><span class="line">          left: -focusIndex * <span class="number">1000</span></span><br><span class="line">        &#125;, <span class="number">200</span>);</span><br><span class="line">        changeFocus();</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="comment">// queryData(bindHTML);</span></span><br><span class="line">  <span class="comment">// handleContainer();</span></span><br><span class="line">  <span class="comment">// handleArrow();</span></span><br><span class="line">  <span class="comment">// handleFocus();</span></span><br><span class="line">  <span class="comment">// autoTimer = setInterval(autoMove, interval)</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    init() &#123;</span><br><span class="line">      queryData(bindHTML);</span><br><span class="line">      handleContainer();</span><br><span class="line">      handleArrow();</span><br><span class="line">      handleFocus();</span><br><span class="line">      autoTimer = setInterval(autoMove, interval)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">bannerRender.init();</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/01/17/JavaScript进阶教程7/" data-id="ck3wwokla0015g4ppk7w8jlum" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaScript进阶教程6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/24/JavaScript进阶教程6/" class="article-date">
  <time datetime="2018-12-24T12:45:03.000Z" itemprop="datePublished">2018-12-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/24/JavaScript进阶教程6/">进阶教程 6. JS 盒子模型属性</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="一、js盒子模型属性"><a href="#一、js盒子模型属性" class="headerlink" title="一、js盒子模型属性"></a>一、js盒子模型属性</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">		* &#123;</span><br><span class="line">			margin: 0;</span><br><span class="line">			padding: 0;</span><br><span class="line">		&#125;</span><br><span class="line">		.box &#123;</span><br><span class="line">			/* css盒子模型属性： context (内容宽高) + padding + border + margin*/</span><br><span class="line">			/*w3c盒模型：内容宽高是不包含padding和border的*/</span><br><span class="line">			/*IE盒模型：宽度包含padding和border*/</span><br><span class="line">			width: 300px;</span><br><span class="line">			height: 1220px;</span><br><span class="line">			background-color: red;</span><br><span class="line">			padding: 50px;</span><br><span class="line">			border: 20px solid blue;</span><br><span class="line">			margin: 50px auto;</span><br><span class="line">			overflow-y: scroll;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">	【联播+】4月8日，习近平等中央领导同志参加了首都义务植树活动。习近平挥锹铲土，扶苗培土，与广大少先队员和市民们一起劳动。植树现场一片热火朝天景象。</span><br><span class="line"></span><br><span class="line">	“我们的根扎在劳动人民之中。”习近平曾这样发自肺腑地说道。</span><br><span class="line"></span><br><span class="line">	1969年初，不满16岁的习近平来到陕北农村插队，一头扎进最基层。在农村生活的7年间，他什么活儿都干过，乡亲们说他是“吃苦耐劳好后生”。</span><br><span class="line"></span><br><span class="line">	从政之后，习近平不改劳动本色，从贫困山村到基层社区，他走进群众中间，一起种树、打糍粑、炸酥肉……所到之处，都留下了他与人民一同劳动的温暖记忆。</span><br><span class="line"></span><br><span class="line">	央视网用八张海报，带你重温过去，感受习近平总书记与人民同劳动的暖心瞬间。</span><br><span class="line">	【联播+】4月8日，习近平等中央领导同志参加了首都义务植树活动。习近平挥锹铲土，扶苗培土，与广大少先队员和市民们一起劳动。植树现场一片热火朝天景象。</span><br><span class="line"></span><br><span class="line">	“我们的根扎在劳动人民之中。”习近平曾这样发自肺腑地说道。</span><br><span class="line"></span><br><span class="line">	1969年初，不满16岁的习近平来到陕北农村插队，一头扎进最基层。在农村生活的7年间，他什么活儿都干过，乡亲们说他是“吃苦耐劳好后生”。</span><br><span class="line"></span><br><span class="line">	从政之后，习近平不改劳动本色，从贫困山村到基层社区，他走进群众中间，一起种树、打糍粑、炸酥肉……所到之处，都留下了他与人民一同劳动的温暖记忆。</span><br><span class="line"></span><br><span class="line">	央视网用八张海报，带你重温过去，感受习近平总书记与人民同劳动的暖心瞬间。</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/4-js盒子模型属性.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>JS盒模型：通过JS中的属性和方法获取元素的属性信息</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> box = <span class="built_in">document</span>.getElementById(<span class="string">'box'</span>);</span><br></pre></td></tr></table></figure>

<h4 id="client"><a href="#client" class="headerlink" title="client"></a>client</h4><ol>
<li>clientWidth / clientHeight<br> clientWidth 内容宽度 + 左右padding<br> clientHeight 内容高度 + 上下padding</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(box.clientWidth);</span><br><span class="line"><span class="built_in">console</span>.log(box.clientHeight);</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>clientLeft / clientTop<br> clientLeft 左边框<br>  clientTop 上边框</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(box.clientLeft);</span><br><span class="line"><span class="built_in">console</span>.log(box.clientTop);</span><br></pre></td></tr></table></figure>
</li>
<li><p>offsetWidth / offsetHeight<br> offsetWidth = clientWidth(内容宽+左右padding) + 左右边框<br> offsetHeight = clientHeight(内容高+上下padding) + 上下边框</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(box.offsetWidth);</span><br><span class="line"><span class="built_in">console</span>.log(box.offsetHeight);</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><p>scroll系列</p>
<p> scrollLeft(横向滚动条卷去的距离) / scrollTop(纵向滚动条卷去的距离)<br> 滚动条 卷去的距离，默认是0，具体是多少要看滚动条滚动了多少</p>
</li>
</ol>
<ul>
<li><p>获取浏览器的窗口滚动的距离</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sc = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;</span><br><span class="line"><span class="built_in">console</span>.log(sc);</span><br></pre></td></tr></table></figure>

<p>  scrollHeight/scrollWidth<br>  没有溢出时，scrollHeight/scrollWidth 等于 clientHeight/clientWidth<br>  内容溢出时：scrollHeight = clientHeight + 溢出内容高度;<br>  内容溢出时：scrollWidth= clientWidth + 溢出内容高度;</p>
</li>
<li><p>获取浏览器的窗口的盒模型属性：</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> winW = <span class="built_in">document</span>.documentElement.clientWidth || <span class="built_in">document</span>.body.clientWidth;</span><br><span class="line"><span class="keyword">let</span> winH = <span class="built_in">document</span>.documentElement.clientHeight || <span class="built_in">document</span>.body.clientHeight;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">win</span>(<span class="params">attr, val</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">typeof</span> val !== <span class="string">"undefined"</span>) &#123;</span><br><span class="line">		<span class="built_in">document</span>.documentElement[attr] = <span class="built_in">document</span>.body[attr] = val;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">document</span>.documentElement[attr] || <span class="built_in">document</span>.body[attr];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(win(<span class="string">'scrollTop'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(win(<span class="string">'screenTop'</span>, <span class="number">1000</span>));</span><br></pre></td></tr></table></figure>

<h3 id="四、offsetLeft和offsetTop-偏移值"><a href="#四、offsetLeft和offsetTop-偏移值" class="headerlink" title="四、offsetLeft和offsetTop 偏移值"></a>四、offsetLeft和offsetTop 偏移值</h3><ul>
<li>offsetLeft / offsetTop</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> outer = <span class="built_in">document</span>.getElementById(<span class="string">'outer'</span>);</span><br><span class="line"><span class="keyword">let</span> inner = <span class="built_in">document</span>.getElementById(<span class="string">'inner'</span>);</span><br><span class="line"><span class="keyword">let</span> center = <span class="built_in">document</span>.getElementById(<span class="string">'center'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(inner.offsetParent); <span class="comment">// div#outer</span></span><br><span class="line"><span class="built_in">console</span>.log(center.offsetLeft);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>父级参照物：距离当前元素最近的有定位属性的父级元素，如果没有的话默认body；</p>
</li>
<li><p>一般我们需要的是某个元素距离body的offsetLeft，所以就需要一级一级的向上查找</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">offset</span>(<span class="params">ele</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> left = ele.offsetLeft;</span><br><span class="line">	<span class="keyword">let</span> top = ele.offsetTop;</span><br><span class="line">	<span class="keyword">let</span> parent = ele.offsetParent;</span><br><span class="line">	<span class="comment">// 只要找到的父级参照物存在且该参照物不是body就一直向上查找（一直找到body为止</span></span><br><span class="line">	<span class="keyword">while</span> (parent &amp;&amp; parent.nodeName.toLowerCase() !== <span class="string">'body'</span>) &#123;</span><br><span class="line">		left += parent.offsetLeft + parent.clientLeft;</span><br><span class="line">		top += parent.offsetTop + parent.clientTop;</span><br><span class="line">		parent = parent.offsetParent;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		left,</span><br><span class="line">		top</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(offset(center));</span><br></pre></td></tr></table></figure>

<div style="text-align: right">【发上等愿，结中等缘，享下等福，择高处立，寻平处住，向宽处行】</div>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/12/24/JavaScript进阶教程6/" data-id="ck3wwokl60011g4ppu81kp5xh" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaScript进阶教程5" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/24/JavaScript进阶教程5/" class="article-date">
  <time datetime="2018-12-24T12:45:03.000Z" itemprop="datePublished">2018-12-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/24/JavaScript进阶教程5/">进阶教程 5. 正则基础</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="一、方括号的细节问题"><a href="#一、方括号的细节问题" class="headerlink" title="一、方括号的细节问题"></a>一、方括号的细节问题</h3><ul>
<li>[] 正则中的方括号：表示方括号中的元字符中的任意一个</li>
</ul>
<p>特殊元字符：在正则中有特殊含义的字符串如 . ，在正则中表示匹配除 \n 之外的任意其他字符，原义是 小数点</p>
<h4 id="1-在方括号中的部分特殊元字符代表的是该字符的原义，不再具有特殊含义"><a href="#1-在方括号中的部分特殊元字符代表的是该字符的原义，不再具有特殊含义" class="headerlink" title="1. 在方括号中的部分特殊元字符代表的是该字符的原义，不再具有特殊含义"></a>1. 在方括号中的部分特殊元字符代表的是该字符的原义，不再具有特殊含义</h4><p>如： [.] [?] [*] [+]</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/./</span>;</span><br><span class="line"><span class="keyword">let</span> reg1 = <span class="regexp">/[.]/</span>; <span class="comment">// 方括号中的 . 表示普通小数点</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.test(<span class="string">'abc'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.test(<span class="string">'.'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg1.test(<span class="string">'abc'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg1.test(<span class="string">'.'</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/[?]/</span>; <span class="comment">// 方括号中的?表示问号，不是两次元字符</span></span><br><span class="line"><span class="built_in">console</span>.log(reg2.test(<span class="string">'?'</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> reg3 = <span class="regexp">/[*]/</span>; <span class="comment">// 方括号中的*表示星号，不是量词源字符串</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.test(<span class="string">'*'</span>)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> reg4 = <span class="regexp">/[+]/</span>; <span class="comment">// 方括号中的+表示加号，不是量词元字符</span></span><br><span class="line"><span class="built_in">console</span>.log(reg4.test(<span class="string">'+'</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="2-方括号不能识别多位数"><a href="#2-方括号不能识别多位数" class="headerlink" title="2. 方括号不能识别多位数"></a>2. 方括号不能识别多位数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg5x = <span class="regexp">/^183$/</span>; <span class="comment">// 只能匹配183</span></span><br><span class="line"><span class="keyword">let</span> reg5 = <span class="regexp">/^[183]$/</span>; <span class="comment">// 代表1或者8或者3中的任意一个数字</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'1'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'8'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'3'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'18'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'13'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'183'</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>中括号限制范围 [0-9] [a-z] [A-Z]</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg6 = <span class="regexp">/^[23-68]$/</span>; <span class="comment">// 这个正则表示匹配 2 或 3-6 或 8</span></span><br><span class="line"><span class="built_in">console</span>.log(reg6.test(<span class="string">'23'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg6.test(<span class="string">'34'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg6.test(<span class="string">'67'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg6.test(<span class="string">'2'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg6.test(<span class="string">'4'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg6.test(<span class="string">'9'</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p><code>? 思考：为什么会有这种情况？因为中括号中连续出现的多位数不是表示一个多位数，而是表示多个一位数字；</code></p>
<ul>
<li>? 思考：此时真的需要一个数字范围的话怎么办？</li>
</ul>
<blockquote>
<p>我们可以把这个范围拆分，如23-68， 然后再两位数分别表示这些段<br>23 - 29 2[3-9]<br>30-59 [3-5][0-9]<br>60-68 6[0-8]</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg7 = <span class="regexp">/^(2[3-9]|[3-5]\d|6[0-8])$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'22'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'23'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'34'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'67'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'2'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'4'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'9'</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="二、正则捕获"><a href="#二、正则捕获" class="headerlink" title="二、正则捕获"></a>二、正则捕获</h3><h4 id="正则的捕获：把正则匹配到内容捕获到："><a href="#正则的捕获：把正则匹配到内容捕获到：" class="headerlink" title="正则的捕获：把正则匹配到内容捕获到："></a>正则的捕获：把正则匹配到内容捕获到：</h4><blockquote>
<p>RegExp.prototype.exec() 方法</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">'hello2019 zhufeng2019 zhufeng9021'</span>;</span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/zhufeng\d+/</span>;</span><br><span class="line"><span class="keyword">let</span> execs = reg.exec(str);</span><br><span class="line"><span class="built_in">console</span>.log(execs);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* [</span></span><br><span class="line"><span class="comment">*   "zhufeng2019", 捕获到的内容</span></span><br><span class="line"><span class="comment">*   index: 10, 捕获的起始索引位置</span></span><br><span class="line"><span class="comment">*   input: "hello2019 zhufeng2019 zhufeng9021", 原始字符串</span></span><br><span class="line"><span class="comment"> *   groups: undefined 命名匹配</span></span><br><span class="line"><span class="comment"> * ]</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/xxxx/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg2.exec(str)); <span class="comment">// null</span></span><br><span class="line"><span class="comment">// 如果捕获不到不到会返回null</span></span><br></pre></td></tr></table></figure>

<h4 id="正则捕获的懒惰性"><a href="#正则捕获的懒惰性" class="headerlink" title="正则捕获的懒惰性"></a>正则捕获的懒惰性</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(reg.exec(str)); <span class="comment">// ["zhufeng2019", index: 10, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(str)); <span class="comment">// ["zhufeng2019", index: 10, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>正则的懒惰性</li>
</ul>
<p>如果不做特殊处理，正则每次捕获的时候都是从索引0开始，捕获到第一个符合条件的就停止捕获，后面有多少都不去捕获。<br>// 解决方案：在正则后加修饰符g</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg3 = <span class="regexp">/zhufeng\d+/g</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// ["zhufeng2019", index: 10, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// ["zhufeng9021", index: 22, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// ["zhufeng2019", index: 10, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// ["zhufeng9021", index: 22, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// null</span></span><br></pre></td></tr></table></figure>

<p><code>? 为啥捕获到最后一次会是null呢？</code></p>
<h4 id="lastIndex属性"><a href="#lastIndex属性" class="headerlink" title="lastIndex属性"></a>lastIndex属性</h4><p>正则对象有一个lastIndex的属性，记录着下一次匹配或者捕获的起始位置，下一次再匹配或者捕获，它会从这个索引位置开始往后查找。</p>
<p>上面之所以是最后一次，是因为最后一次从索引33开始查找，后面没有了，所以会返回null</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// ["zhufeng2019", index: 10,....]</span></span><br><span class="line">console.log(reg3.lastIndex); #### 21</span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str));<span class="comment">// ["zhufeng9102", index: 22, ....]</span></span><br><span class="line">console.log(reg3.lastIndex); #### 33</span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// ["zhufeng2019", index: 10,....]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>lastIndex属性记录着下一次匹配的开始位置。当匹配或者捕获到达末尾后，下一次再匹配或者捕获会从头再来；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str2 = <span class="string">'hello zhufeng2019 zhufeng9201'</span>;</span><br><span class="line"><span class="keyword">let</span> reg5 = <span class="regexp">/zhufeng\d+/g</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(str2)); <span class="comment">// true</span></span><br><span class="line">console.log(reg5.lastIndex); #### 17</span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(str2)); <span class="comment">// true</span></span><br><span class="line">console.log(reg5.lastIndex); #### 29</span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(str2)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<ul>
<li>使用匹配时，也是从lastIndex开始的位置去匹配；最后一次是false是因为从索引29向后查找时没有查找到符合规则的字符串，所以返回false；</li>
</ul>
<h4 id="match-方法配合正则"><a href="#match-方法配合正则" class="headerlink" title="match 方法配合正则"></a>match 方法配合正则</h4><blockquote>
<p>String.prototype.match()</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mstr = str.match(reg5);</span><br><span class="line"><span class="built_in">console</span>.log(mstr); <span class="comment">//  ["zhufeng2019", "zhufeng9021"]</span></span><br><span class="line"><span class="keyword">let</span> mstrs = str.match(<span class="regexp">/xxxx/</span>); <span class="comment">// null</span></span><br><span class="line"><span class="comment">// match 方法匹配不到是返回null而不是空数组</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg6 = <span class="regexp">/zhufeng\d+/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.match(reg6)); <span class="comment">// ["zhufeng2019", index: 10, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br><span class="line"><span class="built_in">console</span>.log(str.match(reg6)); <span class="comment">// ["zhufeng2019", index: 10, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br></pre></td></tr></table></figure>

<p>/+ match使用的正则不加g时返回值和exec一样的。但是如果有g时，match方法会一次性把所有符合条件的都匹配到，而exec每次只能匹配到一个；</p>
<h3 id="三、正则分组捕获"><a href="#三、正则分组捕获" class="headerlink" title="三、正则分组捕获"></a>三、正则分组捕获</h3><p>+正则捕获：正则除了匹配还可以把符合条件的捕获到；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">'hello2019 zhufeng2019 zhufeng9021'</span>;</span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/zhufeng(\d+)/g</span>; <span class="comment">// () 是分组，相当于小正则</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 正则捕获方法：RegExp.prototype.exec() 方法</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(str));</span><br><span class="line"><span class="comment">//  ["zhufeng2019", "2019", index: 10, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(str)); <span class="comment">// ["zhufeng9021", "9021", index: 22, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>捕获到的内容是一个数组，数组的第一项是大正则匹配到的内容，如果有分组的话从第二项开始就是分组正则捕获到的内容；所以捕获的内容返回值： [“大正则捕获到的”, “分组1捕获内容”, “分组2捕获内容”…..]</li>
</ul>
<ul>
<li>字符串的match方法，匹配符合规则的字符串， 但是match方法不能进行分组匹配</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(str.match(reg)); <span class="comment">// ["zhufeng2019", "zhufeng9021"]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>取消分组：(?:) 表示当前小括号改变优先级，而不用作用分组捕获</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/zhufeng(?:\d+)/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg2.exec(str)); <span class="comment">// ["zhufeng2019", index: 10, input: "hello2019 zhufeng2019 zhufeng9021", groups: undefined] 取消分组捕获后，exec的返回值中不再包含分组捕获的内容</span></span><br></pre></td></tr></table></figure>

<h4 id="的作用"><a href="#的作用" class="headerlink" title="? 的作用"></a>? 的作用</h4><ul>
<li>? 表示量词元字符 出现0次到1次 可以有可以没有</li>
<li>(?:) 取消分组捕获</li>
</ul>
<h3 id="四、小括号的细节问题"><a href="#四、小括号的细节问题" class="headerlink" title="四、小括号的细节问题"></a>四、小括号的细节问题</h3><h4 id="1-分组捕获"><a href="#1-分组捕获" class="headerlink" title="1. 分组捕获"></a>1. 分组捕获</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">'hello2019 zhufeng2019 zhufeng9021'</span>;</span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/zhufeng(\d+)/g</span>; <span class="comment">// () 是分组，相当于小正则</span></span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(str)); <span class="comment">// 使用exec方法符合条件的字符串捕获到</span></span><br></pre></td></tr></table></figure>

<h4 id="2-分组引用-数字-表示引用前面分组某个分组的内容"><a href="#2-分组引用-数字-表示引用前面分组某个分组的内容" class="headerlink" title="2. 分组引用 \数字 表示引用前面分组某个分组的内容"></a>2. 分组引用 \数字 表示引用前面分组某个分组的内容</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/^(\d)\1$/</span>; <span class="comment">// 匹配一个数字，个位数和十位数相同; \1 表示引用第一个分组中的内容</span></span><br><span class="line"><span class="built_in">console</span>.log(reg2.test(<span class="string">'11'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(reg2.test(<span class="string">'99'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(reg2.test(<span class="string">'12'</span>));</span><br></pre></td></tr></table></figure>

<ul>
<li>练习：写一个正则匹配四个字母的单词，其中第二个和第四个字母相同；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg3 = <span class="regexp">/[a-z]([a-z])[a-z]\1/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg3.test(<span class="string">'tara'</span>));</span><br></pre></td></tr></table></figure>

<h4 id="3-改变优先级"><a href="#3-改变优先级" class="headerlink" title="3. 改变优先级"></a>3. 改变优先级</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 写一个正则匹配18或者19</span></span><br><span class="line"><span class="keyword">let</span> reg4 = <span class="regexp">/^18|19$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg4.test(<span class="string">'18'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg4.test(<span class="string">'19'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg4.test(<span class="string">'189'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg4.test(<span class="string">'1819'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg4.test(<span class="string">'181223419'</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<ul>
<li>? 思考：为什么会这样？因为这个正则不是被识别成一18开头或者以19结尾；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> reg5 = <span class="regexp">/^(18|19)$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'18'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'19'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'189'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'1819'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'181223419'</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="五、正则捕获的贪婪性"><a href="#五、正则捕获的贪婪性" class="headerlink" title="五、正则捕获的贪婪性"></a>五、正则捕获的贪婪性</h3><ul>
<li>正则捕获的贪婪性：如果正则匹配到符合规则的字符串，那么捕获的时候会按照最长的捕获；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">'12345678'</span></span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/\d&#123;2,8&#125;/g</span>;</span><br><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/\d+/</span>;</span><br><span class="line"><span class="keyword">let</span> reg3= <span class="regexp">/\d*/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(str)); <span class="comment">// ["12345678", index: 0, input: "12345678", groups: undefined]</span></span><br><span class="line"><span class="built_in">console</span>.log(reg2.exec(str)); <span class="comment">// ["12345678", index: 0, input: "12345678", groups: undefined]</span></span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)); <span class="comment">// ["12345678", index: 0, input: "12345678", groups: undefined]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如何解决贪婪性？<br>在两次元字符后面增加 ? 增加问号后会按照最少的匹配</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg4 = <span class="regexp">/\d&#123;2,8&#125;?/g</span>;</span><br><span class="line"><span class="keyword">let</span> reg5 = <span class="regexp">/\d+?/</span>;</span><br><span class="line"><span class="keyword">let</span> reg6= <span class="regexp">/\d*?/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg4.exec(str)); <span class="comment">// ["12", index: 0, input: "12345678", groups: undefined]</span></span><br><span class="line"><span class="built_in">console</span>.log(reg5.exec(str)); <span class="comment">// ["1", index: 0, input: "12345678", groups: undefined]</span></span><br><span class="line"><span class="built_in">console</span>.log(reg6.exec(str)); <span class="comment">// ["", index: 0, input: "12345678", groups: undefined]</span></span><br></pre></td></tr></table></figure>

<h3 id="六、正则简单应用"><a href="#六、正则简单应用" class="headerlink" title="六、正则简单应用"></a>六、正则简单应用</h3><h4 id="1-验证中国大陆手机号-以1开头的11位数字"><a href="#1-验证中国大陆手机号-以1开头的11位数字" class="headerlink" title="1. 验证中国大陆手机号 以1开头的11位数字"></a>1. 验证中国大陆手机号 以1开头的11位数字</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg1 = <span class="regexp">/^1\d&#123;10&#125;$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg1.test(<span class="string">'16601046931'</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="2-验证某些号段的手机号验证，例如188-170-156"><a href="#2-验证某些号段的手机号验证，例如188-170-156" class="headerlink" title="2. 验证某些号段的手机号验证，例如188 170 156"></a>2. 验证某些号段的手机号验证，例如188 170 156</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/^1(88|70|56)\d&#123;8&#125;$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg2.test(<span class="string">'18801046931'</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="3-匹配尾号是连续的三围豹子号-666-777-111"><a href="#3-匹配尾号是连续的三围豹子号-666-777-111" class="headerlink" title="3. 匹配尾号是连续的三围豹子号 666 777 111"></a>3. 匹配尾号是连续的三围豹子号 666 777 111</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg3 = <span class="regexp">/^1\d&#123;7&#125;(\d)(\1&#123;2&#125;)$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg3.test(<span class="string">'15912345666'</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="4-靓号-中间四位相同后面四位相同"><a href="#4-靓号-中间四位相同后面四位相同" class="headerlink" title="4. 靓号 中间四位相同后面四位相同"></a>4. 靓号 中间四位相同后面四位相同</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg5 = <span class="regexp">/^1\d&#123;2&#125;(\d)\1&#123;3&#125;(\d)\2&#123;3&#125;$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg5.test(<span class="string">'17733332222'</span>));</span><br></pre></td></tr></table></figure>

<h4 id="5-有效数字验证："><a href="#5-有效数字验证：" class="headerlink" title="5. 有效数字验证："></a>5. 有效数字验证：</h4><p>10 +10 -10 0.12 10.02</p>
<ul>
<li>+或-最多出现一次</li>
<li>如果是一位数字可以是0-9</li>
<li>多位数不能以0开头</li>
<li>如果有小数点，后面必须跟至少一位小数</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg6 = <span class="regexp">/^[+-]?(\d|[1-9]\d+)(\.\d+)?$/</span>;</span><br></pre></td></tr></table></figure>

<h4 id="5-验证数字在某个范围内-18-60"><a href="#5-验证数字在某个范围内-18-60" class="headerlink" title="5. 验证数字在某个范围内 18 - 60"></a>5. 验证数字在某个范围内 18 - 60</h4><ul>
<li>18 - 19 1[89]|</li>
<li>20-59  2[0-9]</li>
<li>60 60</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg7 = <span class="regexp">/^(1[89]|[2-5]\d|60)$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'17'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'18'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'19'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'59'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'60'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg7.test(<span class="string">'61'</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="6-匹配中文姓名"><a href="#6-匹配中文姓名" class="headerlink" title="6. 匹配中文姓名"></a>6. 匹配中文姓名</h4><ul>
<li>中文的Unicode编码范围 \u4e00-\u9fa5</li>
<li>出现2位到6位</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg8 = <span class="regexp">/^[\u4d00-\u9fa5]&#123;2,6&#125;$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg8.test(<span class="string">'马宾'</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h4 id="6-邮箱验证-简单验证"><a href="#6-邮箱验证-简单验证" class="headerlink" title="6. 邮箱验证(简单验证)"></a>6. 邮箱验证(简单验证)</h4><ul>
<li><p>雅虎邮箱：<a href="mailto:xxxx@yahoo.com.cn" target="_blank" rel="noopener">xxxx@yahoo.com.cn</a></p>
</li>
<li><p>google <a href="mailto:xxx@gmain.com" target="_blank" rel="noopener">xxx@gmain.com</a></p>
</li>
<li><p>qq邮箱 <a href="mailto:xxx@qq.com" target="_blank" rel="noopener">xxx@qq.com</a></p>
</li>
<li><p>网易 <a href="mailto:xxx@163.com" target="_blank" rel="noopener">xxx@163.com</a></p>
</li>
<li><p>网易 <a href="mailto:xxx@126.com" target="_blank" rel="noopener">xxx@126.com</a></p>
</li>
<li><p>开头部分 [a-zA-Z\d]+</p>
</li>
<li><p>中间部分 [-\w]+</p>
</li>
<li><p>结尾部分 [a-zA-Z\d]</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg9 = <span class="regexp">/^[a-zA-Z\d]+@[a-zA-Z\d]+(\.[a-z]+)&#123;1,2&#125;$/</span>;</span><br><span class="line"><span class="built_in">console</span>.log(reg9.test(<span class="string">'mabinbingo@163.com'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg9.test(<span class="string">'mabinbingo@163@.com'</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(reg9.test(<span class="string">'1164664451@qq.com'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg9.test(<span class="string">'1164664451@sina.com.cn'</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(reg9.test(<span class="string">'1164664451@sina.com.cn.cn'</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h4 id="7-数据类型检测"><a href="#7-数据类型检测" class="headerlink" title="7. 数据类型检测"></a>7. 数据类型检测</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.isTypeOf = <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> res = <span class="built_in">Object</span>.prototype.toString.call(val); <span class="comment">// "[object Xxxx]"</span></span><br><span class="line">	<span class="keyword">let</span> reg = <span class="regexp">/^\[object ([a-zA-Z]+)\]$/</span>; <span class="comment">// 在正则使用某些特殊元字符的原义时需要转义</span></span><br><span class="line">	<span class="keyword">let</span> exec = reg.exec(res)[<span class="number">1</span>];</span><br><span class="line">	<span class="keyword">return</span> exec.toLowerCase();</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.isTypeOf(<span class="number">1</span>));</span><br></pre></td></tr></table></figure>

<h3 id="七、正向预查和负向预查"><a href="#七、正向预查和负向预查" class="headerlink" title="七、正向预查和负向预查"></a>七、正向预查和负向预查</h3><ul>
<li>正向预查：(?=元字符) 不发生分组捕获</li>
<li>负向预查: (?!元字符) 不发生分组捕获</li>
</ul>
<h4 id="正向预查：-x-y-匹配x，仅当x后面紧跟着y（匹配后面跟着y的x）；"><a href="#正向预查：-x-y-匹配x，仅当x后面紧跟着y（匹配后面跟着y的x）；" class="headerlink" title="正向预查：/x(?=y)/ 匹配x，仅当x后面紧跟着y（匹配后面跟着y的x）；"></a>正向预查：/x(?=y)/ 匹配x，仅当x后面紧跟着y（匹配后面跟着y的x）；</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg1 = <span class="regexp">/[a-z](?=3|4)/g</span>;</span><br><span class="line"><span class="keyword">let</span> str1 = <span class="string">'a1 b2 c3 d4'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str1.match(reg1)); <span class="comment">// ["c", "d"]</span></span><br></pre></td></tr></table></figure>

<h4 id="负向预查：-x-y-匹配x，仅当x后面不是y（匹配后面不是y的x）；"><a href="#负向预查：-x-y-匹配x，仅当x后面不是y（匹配后面不是y的x）；" class="headerlink" title="负向预查：/x(?!y)/ 匹配x，仅当x后面不是y（匹配后面不是y的x）；"></a>负向预查：/x(?!y)/ 匹配x，仅当x后面不是y（匹配后面不是y的x）；</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/[a-z](?!3|4)/g</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str1.match(reg2));</span><br></pre></td></tr></table></figure>

<h2 id="八、正则捕获"><a href="#八、正则捕获" class="headerlink" title="八、正则捕获"></a>八、正则捕获</h2><blockquote>
<p>js正则捕获：把符合某个规则的字符串获取到；</p>
</blockquote>
<p>+常见的捕获方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">RegExp</span>.prototype.exec(str);</span><br><span class="line"><span class="built_in">String</span>.prototype.match();</span><br></pre></td></tr></table></figure>

<h4 id="懒惰性"><a href="#懒惰性" class="headerlink" title="懒惰性"></a>懒惰性</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/\d+/</span>;</span><br><span class="line"><span class="keyword">let</span> str = <span class="string">'hello111 hello222 hello333'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(str)); [<span class="string">'111'</span>, index.....]</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(str)); [<span class="string">'111'</span>, index.....]</span><br><span class="line"><span class="built_in">console</span>.log(reg.exec(str)); [<span class="string">'111'</span>, index.....]</span><br><span class="line"><span class="built_in">console</span>.log(reg.lastIndex); <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str.match(reg)); [<span class="string">'1111'</span>]</span><br><span class="line"><span class="built_in">console</span>.log(str.match(reg)); [<span class="string">'1111'</span>]</span><br><span class="line"><span class="built_in">console</span>.log(str.match(reg)); [<span class="string">'1111'</span>]</span><br></pre></td></tr></table></figure>

<p> <strong>取消懒惰性：给正则增加修饰g</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/\d+/g</span>;</span><br><span class="line"><span class="keyword">let</span> str2 = <span class="string">'hello111 hello222 hello333'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(reg2.exec(str2));</span><br><span class="line"><span class="built_in">console</span>.log(reg2.exec(str2));</span><br><span class="line"><span class="built_in">console</span>.log(reg2.exec(str2));</span><br><span class="line"><span class="built_in">console</span>.log(reg2.lastIndex);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str2.match(str2));</span><br></pre></td></tr></table></figure>

<h4 id="贪婪性：按照匹配做多的去捕获，"><a href="#贪婪性：按照匹配做多的去捕获，" class="headerlink" title="贪婪性：按照匹配做多的去捕获，"></a>贪婪性：按照匹配做多的去捕获，</h4><p><strong>解决贪婪性：给量词元字符后面加 ?</strong></p>
<h4 id="分组捕获："><a href="#分组捕获：" class="headerlink" title="分组捕获："></a>分组捕获：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> reg3 = <span class="regexp">/hello(\d+)/g</span>; 使用小括号表示正则分组</span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)[<span class="number">1</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)[<span class="number">1</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(reg3.exec(str)[<span class="number">1</span>]);</span><br></pre></td></tr></table></figure>

<ul>
<li>除了通过[索引]访问分组，在RegExp上有几个属性记录正则分组捕获的内容</li>
<li>RegExp.$1 表示第1个分组的捕获内容; 在RegExp上有 $1-$9表示第1到第9个分组内容</li>
<li>RegExp[‘$&amp;’] 表示整个正则捕获到的内容</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">RegExp</span>.$<span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">RegExp</span>[<span class="string">'$&amp;'</span>]);</span><br></pre></td></tr></table></figure>

<p>九、正则的高级应用</p>
<h3 id="1-配合replace使用"><a href="#1-配合replace使用" class="headerlink" title="1. 配合replace使用"></a>1. 配合replace使用</h3><blockquote>
<p>String.prototype.replace(匹配内容, ‘替换内容’);</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">'zhufeng2018 zhufeng2019'</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>把字符串中的 zhufeng 替换成 江外</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> result = str.replace(<span class="string">'zhufeng'</span>, <span class="string">'江外'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(result); <span class="comment">// 江外2018 zhufeng2019</span></span><br></pre></td></tr></table></figure>

<ul>
<li>一次只能替换一个，那么有没有什么办法一次都替换掉呢？</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">replace(正则, callback); replace配合正则使用时</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">let</span> reg = <span class="regexp">/(zhufeng)/g</span>;</span><br><span class="line"><span class="keyword">let</span> r2 = str.replace(reg, <span class="function"><span class="keyword">function</span> (<span class="params">...arg</span>) </span>&#123;</span><br><span class="line">	<span class="comment">// 回调函数的参数：</span></span><br><span class="line">	<span class="comment">// 第一个：整个正则匹配到的内容</span></span><br><span class="line">	<span class="comment">// 如果有分组，会从第二个参数</span></span><br><span class="line">	<span class="comment">// 倒数第二个参数是 本次捕获的的起始索引位置</span></span><br><span class="line">	<span class="comment">// 最后一个参数是当前原始字符串</span></span><br><span class="line">	i++;</span><br><span class="line">	<span class="built_in">console</span>.log(arg);</span><br><span class="line">	<span class="keyword">return</span> <span class="string">'江外'</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(r2);</span><br><span class="line"><span class="built_in">console</span>.log(i); <span class="comment">// 2 说明回调函数执行了2次；</span></span><br></pre></td></tr></table></figure>

<h4 id="2-格式化时间字符串-按照时间模板格式时间字符串"><a href="#2-格式化时间字符串-按照时间模板格式时间字符串" class="headerlink" title="2. 格式化时间字符串: 按照时间模板格式时间字符串"></a>2. 格式化时间字符串: 按照时间模板格式时间字符串</h4><ul>
<li><p>“2019/6/30 17:50:23” =&gt; ‘06-30 17:50’</p>
</li>
<li><p>2.1 获取时间字符串中所有时间数字</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str2 = <span class="string">"2019/6/30 17:50:23"</span>;</span><br><span class="line"><span class="keyword">let</span> reg2 = <span class="regexp">/\d+/g</span>;</span><br><span class="line"><span class="keyword">let</span> ary = str2.match(reg2);</span><br><span class="line"><span class="built_in">console</span>.log(ary);</span><br></pre></td></tr></table></figure>

<ul>
<li>2.2 判断如果这些数字比10小，需要补0</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> addZero = ary.map(<span class="function"><span class="params">item</span> =&gt;</span> +item &lt; <span class="number">10</span> ? <span class="string">'0'</span> + item : item);</span><br><span class="line"><span class="built_in">console</span>.log(addZero);</span><br></pre></td></tr></table></figure>

<ul>
<li>2.3 根据模板把时间格式化</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> tmp = <span class="string">'&#123;0&#125;年&#123;1&#125;月&#123;2&#125;日 &#123;3&#125;时&#123;4&#125;分&#123;5&#125;秒'</span>;</span><br><span class="line"><span class="keyword">let</span> tmpReg = <span class="regexp">/\&#123;(\d)\&#125;/g</span>;</span><br><span class="line"><span class="keyword">let</span> result2 = tmp.replace(tmpReg, <span class="function"><span class="keyword">function</span> (<span class="params">[, index]</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> ary[index];</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(result2);</span><br></pre></td></tr></table></figure>

<ul>
<li>扩展到原型上</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.myFormatTime = <span class="function"><span class="keyword">function</span> (<span class="params">tmp = <span class="string">'&#123;0&#125;年&#123;1&#125;月&#123;2&#125;日 &#123;3&#125;时&#123;4&#125;分&#123;5&#125;秒'</span></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> ary = <span class="keyword">this</span>.match(<span class="regexp">/\d+/g</span>).map(<span class="function"><span class="params">item</span> =&gt;</span> +item &lt; <span class="number">10</span> ? <span class="string">'0'</span> + item : item);</span><br><span class="line">	<span class="keyword">return</span> tmp.replace(<span class="regexp">/\&#123;(\d)\&#125;/g</span>, (...[, index]) =&gt; ary[index]);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"2018/4/30 17:50:23"</span>.myFormatTime(<span class="string">'&#123;1&#125;-&#123;2&#125; &#123;3&#125;:&#123;4&#125;:&#123;5&#125;'</span>));</span><br></pre></td></tr></table></figure>

<h4 id="3-url查询参数格式化"><a href="#3-url查询参数格式化" class="headerlink" title="3. url查询参数格式化"></a>3. url查询参数格式化</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="string">'http://www.zhufeng.cn?name=mabin&amp;age=18&amp;form=zf&amp;addre=hebei'</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>把上面的url参数的转换成一个对象：{name: ‘mabin’, age: ‘18’}</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> params = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> reg3 = <span class="regexp">/([^?=&amp;]+)=([^?=&amp;]+)/g</span>;</span><br><span class="line">url.replace(reg3, (str, key, value) =&gt; params[key] = value);</span><br><span class="line"><span class="built_in">console</span>.log(params);</span><br></pre></td></tr></table></figure>

<ul>
<li>扩展到原型上</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.urlSeries = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> params = &#123;&#125;;</span><br><span class="line">	<span class="keyword">let</span> reg3 = <span class="regexp">/([^?=&amp;]+)=([^?=&amp;]+)/g</span>;</span><br><span class="line">	<span class="keyword">this</span>.replace(reg3, (str, key, value) =&gt; params[key] = value);</span><br><span class="line">	<span class="keyword">return</span> params</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> result3 = url.urlSeries();</span><br><span class="line"><span class="built_in">console</span>.log(result3);</span><br></pre></td></tr></table></figure>

<h4 id="4-获取数据类型"><a href="#4-获取数据类型" class="headerlink" title="4. 获取数据类型"></a>4. 获取数据类型</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.isTypeOf = <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> res = <span class="built_in">Object</span>.prototype.toString.call(val); <span class="comment">// "[object Xxxx]"</span></span><br><span class="line">	<span class="keyword">let</span> reg = <span class="regexp">/^\[object ([a-zA-Z]+)\]$/</span>; <span class="comment">// 在正则使用某些特殊元字符的原义时需要转义</span></span><br><span class="line">	<span class="keyword">let</span> exec = reg.exec(res)[<span class="number">1</span>];</span><br><span class="line">	<span class="keyword">return</span> exec.toLowerCase();</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.isTypeOf(<span class="number">1</span>));</span><br></pre></td></tr></table></figure>

<div style="text-align: right">【发上等愿，结中等缘，享下等福，择高处立，寻平处住，向宽处行】</div>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/12/24/JavaScript进阶教程5/" data-id="ck3wwokl80013g4ppkh5bkwr7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaScript进阶教程4" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/22/JavaScript进阶教程4/" class="article-date">
  <time datetime="2018-11-22T11:45:47.000Z" itemprop="datePublished">2018-11-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/22/JavaScript进阶教程4/">进阶教程 4. 深入面向对象</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="深入面向对象"><a href="#深入面向对象" class="headerlink" title="深入面向对象"></a>深入面向对象</h2><h3 id="1-字面量创建数据和实例的方式创建数据"><a href="#1-字面量创建数据和实例的方式创建数据" class="headerlink" title="1. 字面量创建数据和实例的方式创建数据"></a>1. 字面量创建数据和实例的方式创建数据</h3><h4 id="1-实例的创建方式，通过new操作符调用当前类型的构造函数，会得到当前类型的一个实例"><a href="#1-实例的创建方式，通过new操作符调用当前类型的构造函数，会得到当前类型的一个实例" class="headerlink" title="1. 实例的创建方式，通过new操作符调用当前类型的构造函数，会得到当前类型的一个实例"></a>1. 实例的创建方式，通过new操作符调用当前类型的构造函数，会得到当前类型的一个实例</h4><ul>
<li><p>创建引用数据类型：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ary2 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>); <span class="comment">// 用实例的方式创建一个数组</span></span><br><span class="line">ary2.push(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]; <span class="comment">// 字面量创建数组</span></span><br><span class="line">ary.push(<span class="number">5</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建引用基本类型</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'javascript'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(str1.toUpperCase());</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str2 = <span class="string">'javascript'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str2.toUpperCase());</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> str1); <span class="comment">// 'object'</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> str2); <span class="comment">// 'string'</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<p><code>基本数据类型的只能通过字面量的方式创建，如果用实例的方式创建，这个实例将会是变成一个对象，而对象不是基本数据类型;</code></p>
<h4 id="2-字面量创建方式："><a href="#2-字面量创建方式：" class="headerlink" title="2. 字面量创建方式："></a>2. 字面量创建方式：</h4><ul>
<li>创建引用数据类型：字面量创建的引用该数据类型和实例的方式创建的引用数据类型没有区别</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 1. 对象：&#123;&#125;</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 数组：[]</span></span><br><span class="line"><span class="keyword">var</span> ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. 正则 /^\d$/</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/^\d$/</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>创建基本数据类型：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> str = <span class="string">'abc'</span>;</span><br><span class="line"><span class="keyword">var</span> bool = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">var</span> empty = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> notDefined = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">var</span> sym = <span class="built_in">Symbol</span>(<span class="string">'cbd'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="new-调用构造函数和普通调用的区别"><a href="#new-调用构造函数和普通调用的区别" class="headerlink" title="new 调用构造函数和普通调用的区别"></a>new 调用构造函数和普通调用的区别</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Teacher</span>(<span class="params">name, age, subject, from</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">	<span class="keyword">this</span>.mission = <span class="string">'传道受业解惑'</span>;</span><br><span class="line">	<span class="keyword">this</span>.age = age;</span><br><span class="line">	<span class="keyword">this</span>.subject = subject;</span><br><span class="line">	<span class="keyword">this</span>.from = <span class="keyword">from</span>;</span><br><span class="line">	<span class="keyword">this</span>.teach = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;name&#125;</span> 老师教 <span class="subst">$&#123;subject&#125;</span> 学科`</span>);</span><br><span class="line">	&#125;;</span><br><span class="line">	<span class="comment">// 上面这种通过this.xxx = xxx的方式直接向实例上添加的属性成为私有属性。</span></span><br><span class="line">	<span class="keyword">var</span> career = <span class="string">'前端'</span>; <span class="comment">// 这只是一个私有变量，不会和实例产生联系</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 普通函数执行：</span></span><br><span class="line"><span class="keyword">let</span> t1 = Teacher(<span class="string">'马宾'</span>, <span class="number">18</span>, <span class="string">'js'</span>, <span class="string">'江外'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(t1); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> t2 = <span class="keyword">new</span> Teacher(<span class="string">'陆辉'</span>, <span class="number">19</span>, <span class="string">'js'</span>, <span class="string">'江外'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(t2); <span class="comment">// Teacher &#123;naem:......&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>为啥会出现这种情况呢？这是因为new调用和普通调用有着本质的区别；</li>
</ul>
<h4 id="函数的普通调用过程："><a href="#函数的普通调用过程：" class="headerlink" title="函数的普通调用过程："></a>函数的普通调用过程：</h4><ol>
<li>新开辟栈内存作为执行的作用域</li>
<li>形参赋值</li>
<li>私有作用域变量提升</li>
<li>代码从上到下执行</li>
<li>释放栈内存</li>
</ol>
<h4 id="new-调用时："><a href="#new-调用时：" class="headerlink" title="new 调用时："></a>new 调用时：</h4><ol>
<li>开辟栈内存</li>
<li>形参赋值</li>
<li>变量提升</li>
<li>隐式创建一个实例对象，并且把当前构造函数中的this指向这个实例对象。</li>
<li>执行函数体中的代码，当遇到this.xxx = xxx时就是在向实例对象上增加属性；</li>
<li>隐式返回实例对象</li>
<li>释放栈内存</li>
</ol>
<h3 id="显式设置返回值"><a href="#显式设置返回值" class="headerlink" title="显式设置返回值"></a>显式设置返回值</h3><h4 id="返回基本数据类型："><a href="#返回基本数据类型：" class="headerlink" title="返回基本数据类型："></a>返回基本数据类型：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Teacher</span>(<span class="params">name, age, subject, from</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">	<span class="keyword">this</span>.mission = <span class="string">'传道受业解惑'</span>;</span><br><span class="line">	<span class="keyword">this</span>.age = age;</span><br><span class="line">	<span class="keyword">this</span>.subject = subject;</span><br><span class="line">	<span class="keyword">this</span>.from = <span class="keyword">from</span>;</span><br><span class="line">	<span class="keyword">this</span>.teach = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;name&#125;</span> 老师教 <span class="subst">$&#123;subject&#125;</span> 学科`</span>);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">61</span>; <span class="comment">// 返回基本类型值</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> t1 = <span class="keyword">new</span> Teacher(<span class="string">'马宾'</span>, <span class="number">18</span>, <span class="string">'js'</span>, <span class="string">'zf'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(t1); <span class="comment">// Teacher &#123;....&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="返回引用数据类型"><a href="#返回引用数据类型" class="headerlink" title="返回引用数据类型"></a>返回引用数据类型</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Teacher</span>(<span class="params">name, age, subject, from</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">	<span class="keyword">this</span>.mission = <span class="string">'传道受业解惑'</span>;</span><br><span class="line">	<span class="keyword">this</span>.age = age;</span><br><span class="line">	<span class="keyword">this</span>.subject = subject;</span><br><span class="line">	<span class="keyword">this</span>.from = <span class="keyword">from</span>;</span><br><span class="line">	<span class="keyword">this</span>.teach = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;name&#125;</span> 老师教 <span class="subst">$&#123;subject&#125;</span> 学科`</span>);</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;<span class="attr">haha</span>: <span class="string">'哈哈'</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> t2 = <span class="keyword">new</span> Teacher(<span class="string">'陆辉'</span>, <span class="number">19</span>, <span class="string">'js'</span>, <span class="string">'江外'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(t2); <span class="comment">// &#123;haha: ...&#125;</span></span><br></pre></td></tr></table></figure>

<p>如果我们手动修改构造函数的返回值时：</p>
<ol>
<li>如果return一个基本数据类型的值，没有任何影响，不会覆盖原有实例；</li>
<li>如果return 引用数据类型，原有的实例就会被这个引用类型值覆盖</li>
</ol>
<p>// 慎重修改构造函数的返回值</p>
<h3 id="原型模式"><a href="#原型模式" class="headerlink" title="原型模式"></a>原型模式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Teacher</span>(<span class="params">name, age, subject, from</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">	<span class="keyword">this</span>.mission = <span class="string">'传道受业解惑'</span>;</span><br><span class="line">	<span class="keyword">this</span>.age = age;</span><br><span class="line">	<span class="keyword">this</span>.subject = subject;</span><br><span class="line">	<span class="keyword">this</span>.from = <span class="keyword">from</span>;</span><br><span class="line">	<span class="keyword">this</span>.teach = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;name&#125;</span> 老师教 <span class="subst">$&#123;subject&#125;</span> 学科`</span>);</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// let t1 = new Teacher('mabin', 18, 'js', 'zf');</span></span><br><span class="line"><span class="comment">// let t2 = new Teacher('mabin', 19, 'FE', 'zf');</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// t1.teach();</span></span><br><span class="line"><span class="comment">// t2.teach();</span></span><br><span class="line"><span class="comment">// console.log(t1.teach === t2.teach); // false 因为t1和t2是两个实例，而teach又是t1和t2的私有方法</span></span><br></pre></td></tr></table></figure>

<p>但是数组的push方法呢？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ary1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> ary2 = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>];</span><br><span class="line"><span class="built_in">console</span>.log(ary1.push === ary2.push); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(ary1);</span><br><span class="line"><span class="built_in">console</span>.log(ary2);</span><br></pre></td></tr></table></figure>

<ul>
<li>思考? 只要是数组就该能push，因为这是数组类的功能，所以。而老师是Teacher类的实例，只要是老师就能teach，teach是老师类的功能，不需要再每个实例上强调一遍。这是一个公有的特性，不该放在实例，而是应该放在一个公共的地方，以后只要是这个类的实例就有这个功能。放在哪里呢？</li>
</ul>
<h3 id="原型对象："><a href="#原型对象：" class="headerlink" title="原型对象："></a>原型对象：</h3><blockquote>
<p>原型prototype：每一个函数（普通函数、构造函数【类】）都天生自带一个属性prototype（原型）。这个属性的值是一个对象，用来存储当前类型的共有的属性和方法。保存在原型上面的属性和方法称为公有属性或公有方法。</p>
</blockquote>
<p>所以改造Teacher类型：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Teacher</span>(<span class="params">name, age, subject, from</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">	<span class="keyword">this</span>.mission = <span class="string">'传道受业解惑'</span>;</span><br><span class="line">	<span class="keyword">this</span>.age = age;</span><br><span class="line">	<span class="keyword">this</span>.subject = subject;</span><br><span class="line">	<span class="keyword">this</span>.from = <span class="keyword">from</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Teacher.prototype.teach = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span> 老师教 <span class="subst">$&#123;<span class="keyword">this</span>.subject&#125;</span> 学科`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Teacher.prototype);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> t1 = <span class="keyword">new</span> Teacher(<span class="string">'mabin'</span>, <span class="number">18</span>, <span class="string">'js'</span>, <span class="string">'zf'</span>);</span><br><span class="line"><span class="keyword">let</span> t2 = <span class="keyword">new</span> Teacher(<span class="string">'jiangwen'</span>, <span class="number">19</span>, <span class="string">'FE'</span>, <span class="string">'zf'</span>);</span><br><span class="line"></span><br><span class="line">t1.teach();</span><br><span class="line">t2.teach();</span><br><span class="line"><span class="built_in">console</span>.log(t1.teach === t2.teach); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="如何检测属性是公有还是私有？"><a href="#如何检测属性是公有还是私有？" class="headerlink" title="如何检测属性是公有还是私有？"></a>如何检测属性是公有还是私有？</h3><blockquote>
<p>hasOwnProperty() 方法：检测某个属性是否是对象的私有属性，如果是私有属性，返回true，否则返回false；</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> r1 = t1.hasOwnProperty(<span class="string">'name'</span>); <span class="comment">// true</span></span><br><span class="line"><span class="keyword">var</span> r2 = t2.hasOwnProperty(<span class="string">'teach'</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Teacher</span>(<span class="params">name, age, subject, from</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">	<span class="keyword">this</span>.mission = <span class="string">'传道受业解惑'</span>;</span><br><span class="line">	<span class="keyword">this</span>.age = age;</span><br><span class="line">	<span class="keyword">this</span>.subject = subject;</span><br><span class="line">	<span class="keyword">this</span>.from = <span class="keyword">from</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Teacher.prototype.teach = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span> 老师教 <span class="subst">$&#123;<span class="keyword">this</span>.subject&#125;</span> 学科`</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Teacher.prototype);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> t1 = <span class="keyword">new</span> Teacher(<span class="string">'mabin'</span>, <span class="number">18</span>, <span class="string">'js'</span>, <span class="string">'zf'</span>);</span><br><span class="line"><span class="keyword">let</span> t2 = <span class="keyword">new</span> Teacher(<span class="string">'jiangwen'</span>, <span class="number">19</span>, <span class="string">'FE'</span>, <span class="string">'zf'</span>);</span><br><span class="line">t1.teach();</span><br><span class="line">t2.teach();</span><br></pre></td></tr></table></figure>

<blockquote>
<p>思考? 我把这个方法写在了Teacher的原型上，那么t1和t2是怎么找到的呢？</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(t1);</span><br><span class="line"><span class="built_in">console</span>.log(t2);</span><br><span class="line"><span class="built_in">console</span>.log(Teacher.prototype);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在私有属性中没有发现teach方法。我们发现这个t1和t2中有一个<strong>proto</strong> 属性，这个属性值里面有teach方法。那是怎么找过去呢？Teacher.prototype中也有一个<strong>proto</strong>，这是干嘛呢的？</p>
</blockquote>
<h4 id="原型链：对象的属性查找机制"><a href="#原型链：对象的属性查找机制" class="headerlink" title="原型链：对象的属性查找机制"></a>原型链：对象的属性查找机制</h4><p>每个实例都有一个属性<strong>proto</strong> 属性，它指向当前实例所属类的prototype对象。当我们访对象的一个的属性时，如果有，就使用私有属性，如果没有就通过实例<strong>proto</strong>找到实例所属类的prototype(原型)上查找，如果找到就使用prototype上的属性，如果还没找到，就通过prototype的<strong>proto</strong>继续向上查找，一直找到Object的prototype就停止查找。如果还没找到就返回undefined。</p>
<div style="text-align: right">【发上等愿，结中等缘，享下等福，择高处立，寻平处住，向宽处行】</div>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/22/JavaScript进阶教程4/" data-id="ck3wwokl2000xg4ppzc2rv1n0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaScript进阶教程3" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/10/07/JavaScript进阶教程3/" class="article-date">
  <time datetime="2018-10-07T12:00:23.000Z" itemprop="datePublished">2018-10-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/10/07/JavaScript进阶教程3/">进阶教程 3. JS 的堆栈内存管理</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="javascript中的堆栈内存及释放"><a href="#javascript中的堆栈内存及释放" class="headerlink" title="javascript中的堆栈内存及释放"></a>javascript中的堆栈内存及释放</h2><h3 id="js中的堆内存的创建和释放"><a href="#js中的堆内存的创建和释放" class="headerlink" title="js中的堆内存的创建和释放"></a>js中的堆内存的创建和释放</h3><h3 id="JS引擎中的内存分类："><a href="#JS引擎中的内存分类：" class="headerlink" title="JS引擎中的内存分类："></a>JS引擎中的内存分类：</h3><ul>
<li>栈内存（作用域）供js代码执行的环境，保存基本数据类型</li>
<li>堆内存：存储引用数据类型</li>
</ul>
<h3 id="堆内存的创建和销毁"><a href="#堆内存的创建和销毁" class="headerlink" title="堆内存的创建和销毁"></a>堆内存的创建和销毁</h3><h4 id="创建："><a href="#创建：" class="headerlink" title="创建："></a>创建：</h4><p><code>创建一个对象、数组、函数、等引用数据类型，浏览器都会分配一块堆内存地址，存储引用数据类型的数据；</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">	name: <span class="string">'江外琉璃'</span>,</span><br><span class="line">	age: <span class="number">10</span>,</span><br><span class="line">	courses: [<span class="string">'高级前端是怎样炼成的'</span>, <span class="string">'前端FE师是怎样炼成的'</span>, <span class="string">'UI设计师是怎样炼成的'</span>]</span><br><span class="line">&#125;; <span class="comment">// 每创建一个引用数据类型，浏览器都会开辟一个堆内存，并把这个堆内存地址给obj变量</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 此时obj相当于引用了这一块堆内存，</span></span><br><span class="line"><span class="keyword">var</span> obj2 = obj; <span class="comment">// 此时obj2也引用了这一块堆内存</span></span><br></pre></td></tr></table></figure>

<h4 id="堆内存释放"><a href="#堆内存释放" class="headerlink" title="堆内存释放"></a>堆内存释放</h4><p><code>让所有引用堆内存空间地址的变量赋值为null即可（没有变量占用这个堆内存了，浏览器会在空闲的时候把它释放掉）</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">obj = <span class="literal">null</span>; <span class="comment">// 将obj指向空对象指针null</span></span><br><span class="line">obj2 = <span class="literal">null</span>; <span class="comment">// 将obj2指向空对象指针null</span></span><br></pre></td></tr></table></figure>

<h3 id="js中的栈内存开辟和释放"><a href="#js中的栈内存开辟和释放" class="headerlink" title="js中的栈内存开辟和释放"></a>js中的栈内存开辟和释放</h3><ul>
<li>栈内存（作用域）：供js代码执行的环境，也是用来保存基本数据类型的</li>
</ul>
<h4 id="栈内存的创建："><a href="#栈内存的创建：" class="headerlink" title="栈内存的创建："></a>栈内存的创建：</h4><ul>
<li>当浏览器打开时，首先会开辟形成一个顶层的栈内存，就是全局作用域；</li>
<li>函数执行时，也会开辟一个供函数代码执行的栈内存（私有作用域）</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> total = <span class="number">0</span>;</span><br><span class="line">	total = a + b;</span><br><span class="line">	<span class="keyword">return</span> total;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>函数每一次执行，都会形成一个全新的栈内存，即每次函数执行都是在一个全新的环境里面执行，所以函数每次执行都是互相独立的；</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">add(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">add(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">add(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fe</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		zf: <span class="string">'zhufeng'</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> o1 = fe(); <span class="comment">//</span></span><br><span class="line"><span class="keyword">var</span> o2 = fe();</span><br><span class="line"><span class="built_in">console</span>.log(o1 === o2); <span class="comment">// false fe执行几次，救护创建几个对象，所以o1和o2是两个不同的堆内存，没有任何关系。</span></span><br></pre></td></tr></table></figure>

<h4 id="栈内存销毁："><a href="#栈内存销毁：" class="headerlink" title="栈内存销毁："></a>栈内存销毁：</h4><ul>
<li>全局栈内存：当页面关闭时才会销毁</li>
<li>函数的私有作用域：一般函数执行完成后，栈内存自动销毁。但是有一些特殊情况需要注意；</li>
</ul>
<h2 id="栈内存不销毁的情形"><a href="#栈内存不销毁的情形" class="headerlink" title="栈内存不销毁的情形"></a>栈内存不销毁的情形</h2><ul>
<li><p>函数栈内存：正常情况下，函数执行会形成一个栈内存（作用域），当函数执行完成就会自动销毁。</p>
</li>
<li><p>但是函数执行完成后，当前形成的栈内存中，某些内容被栈内存以外的变量占用了，此时栈内存不能释放（一旦释放外面找不到原有的内容了）。栈内存不销毁，保存在栈内存中的数据也不会被销毁</p>
</li>
</ul>
<h4 id="1-函数返回值被占用"><a href="#1-函数返回值被占用" class="headerlink" title="1 函数返回值被占用"></a>1 函数返回值被占用</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fe</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		name: <span class="string">"江外琉璃"</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = fe(); <span class="comment">// 函数fe执行形成一个不销毁的栈内存，里面定义的对象被外部obj变量占用，因而作用域不销毁</span></span><br><span class="line"></span><br><span class="line">fe(); <span class="comment">// 他们正常形成栈内存，但是执行后会被销毁</span></span><br></pre></td></tr></table></figure>

<h4 id="2-函数内部的引用数据类型被外部占用，函数执行的作用域不销毁。"><a href="#2-函数内部的引用数据类型被外部占用，函数执行的作用域不销毁。" class="headerlink" title="2.函数内部的引用数据类型被外部占用，函数执行的作用域不销毁。"></a>2.函数内部的引用数据类型被外部占用，函数执行的作用域不销毁。</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	x = &#123;</span><br><span class="line">		name: <span class="string">'zf'</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">fn(); <span class="comment">// 此时x占用着fn的作用域中对象&#123;name: 'zf'&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="累加计数"><a href="#累加计数" class="headerlink" title="累加计数"></a>累加计数</h3><ul>
<li>需求：实现一个累加计数的功能，点击一次，让按钮中的数字累加；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> btn = <span class="built_in">document</span>.getElementById(<span class="string">'btn'</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>思路：既然是累加，一定是有一个地方保存着它的上一个值。关键就在于保存在哪里。</li>
</ul>
<h4 id="1-把值保存在全局作用域"><a href="#1-把值保存在全局作用域" class="headerlink" title="1. 把值保存在全局作用域"></a>1. 把值保存在全局作用域</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> count = <span class="number">0</span>; <span class="comment">// count保存在全局作用域</span></span><br><span class="line">btn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	count++; <span class="comment">// 操作全局变量</span></span><br><span class="line">	btn.innerHTML = count;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="2-自定义不销毁的私有作用域"><a href="#2-自定义不销毁的私有作用域" class="headerlink" title="2. 自定义不销毁的私有作用域"></a>2. 自定义不销毁的私有作用域</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">btn.onclick = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> count = <span class="number">0</span>; <span class="comment">// count的值保存在</span></span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		btn.innerHTML = count;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h4 id="3-自定义不销毁的函数作用域2"><a href="#3-自定义不销毁的函数作用域2" class="headerlink" title="3. 自定义不销毁的函数作用域2"></a>3. 自定义不销毁的函数作用域2</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> count = <span class="number">0</span>; <span class="comment">// count保存在自执行函数形成的私有作用域中</span></span><br><span class="line">	btn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		count++;</span><br><span class="line">		<span class="keyword">this</span>.innerHTML = count;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h4 id="4-块级作用域"><a href="#4-块级作用域" class="headerlink" title="4. 块级作用域"></a>4. 块级作用域</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="keyword">let</span> count = <span class="number">0</span>; <span class="comment">// let 会把花括号变成块级作用域，等效于私有作用域，count的值保存在块级作用域中</span></span><br><span class="line">	btn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		count++;</span><br><span class="line">		<span class="keyword">this</span>.innerHTML = count;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="let-amp-const"><a href="#let-amp-const" class="headerlink" title="let &amp; const"></a>let &amp; const</h3><h4 id="let-const-是ES6新增关键字，用于声明变量"><a href="#let-const-是ES6新增关键字，用于声明变量" class="headerlink" title="let const 是ES6新增关键字，用于声明变量"></a>let const 是ES6新增关键字，用于声明变量</h4><ul>
<li>let 用来声明普通变量</li>
<li>const 用于声明常量</li>
</ul>
<h4 id="let-amp-const-和var的区别"><a href="#let-amp-const-和var的区别" class="headerlink" title="let &amp; const 和var的区别"></a>let &amp; const 和var的区别</h4><ul>
<li><ol>
<li>let const不存在变量提升，对于使用let const声明的变量，只能在定义后使用</li>
</ol>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// 报错：a is not defined</span></span><br><span class="line"><span class="keyword">let</span> a = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 报错：b is not defined</span></span><br><span class="line"><span class="keyword">const</span> b = <span class="number">12</span>;</span><br></pre></td></tr></table></figure>

<h4 id="2-let-const-不能重复声明变量-重复声明var或者function声明的也不行"><a href="#2-let-const-不能重复声明变量-重复声明var或者function声明的也不行" class="headerlink" title="2. let const 不能重复声明变量(重复声明var或者function声明的也不行)"></a>2. let const 不能重复声明变量(重复声明var或者function声明的也不行)</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> n = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> n;</span><br><span class="line"><span class="keyword">var</span> n = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> n = <span class="number">1</span>; <span class="comment">// 报错：a has already been declared</span></span><br></pre></td></tr></table></figure>

<h4 id="3-let-const-在全局声明的变量或者常量不会像window上增加属性"><a href="#3-let-const-在全局声明的变量或者常量不会像window上增加属性" class="headerlink" title="3. let const 在全局声明的变量或者常量不会像window上增加属性"></a>3. let const 在全局声明的变量或者常量不会像window上增加属性</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">100</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'num'</span> <span class="keyword">in</span> <span class="built_in">window</span>); <span class="comment">// true in 运算符，检测对象是否有某个属性</span></span><br><span class="line"><span class="keyword">let</span> css = <span class="string">'css3'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'css'</span> <span class="keyword">in</span> <span class="built_in">window</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h4 id="4-let-const-在代码块中会出现，会形成块级作用域，并且出现-暂时性死区；"><a href="#4-let-const-在代码块中会出现，会形成块级作用域，并且出现-暂时性死区；" class="headerlink" title="4. let const 在代码块中会出现，会形成块级作用域，并且出现 暂时性死区；"></a>4. let const 在代码块中会出现，会形成块级作用域，并且出现 暂时性死区；</h4><ul>
<li>if (condition) { 条件的花括号中使用let const 就会形成块级作用域 }</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num1 = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">	<span class="keyword">let</span> num1 = <span class="number">4</span>;</span><br><span class="line">	<span class="built_in">console</span>.log(num1); <span class="comment">// 4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>for(…) { for 循环中的代码块 }</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">12</span>; i++) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'var 没有块级作用域'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i); <span class="comment">// var 会把i泄露成全局变量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'let j j不会泄露出去'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(j); <span class="comment">// Uncaught ReferenceError: j is not defined</span></span><br></pre></td></tr></table></figure>

<ul>
<li>利用 {}形成块级作用域</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="keyword">let</span> a = <span class="number">1</span>;</span><br><span class="line">	<span class="built_in">console</span>.log(a); <span class="comment">// a是块级作用域中</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">let</span> m = <span class="number">12</span>; <span class="comment">// m所处的块级作用域是下面的块级作用域的上级作用域，同样遵从作用域链的查找规则</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(m);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="暂时性死区（TDZ-temporary-dead-zone）"><a href="#暂时性死区（TDZ-temporary-dead-zone）" class="headerlink" title="暂时性死区（TDZ: temporary dead zone）"></a>暂时性死区（TDZ: temporary dead zone）</h4><p>在代码块中，用let const声明的变量，不能再声明之前使用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> q = <span class="number">12</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(q); <span class="comment">// 这个变量q已经被let锁定在块级作用域中，</span></span><br><span class="line">	<span class="keyword">let</span> q = <span class="number">14</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="const-声明变量的细节问题"><a href="#const-声明变量的细节问题" class="headerlink" title="const 声明变量的细节问题"></a>const 声明变量的细节问题</h3><h4 id="1-const声明时必须赋值"><a href="#1-const声明时必须赋值" class="headerlink" title="1. const声明时必须赋值"></a>1. const声明时必须赋值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> m;</span><br><span class="line"><span class="keyword">var</span> m;</span><br><span class="line"><span class="keyword">const</span> m; <span class="comment">// 报错：Missing initializer in const declaration</span></span><br></pre></td></tr></table></figure>

<h4 id="2-值一旦被定义，不能被修改"><a href="#2-值一旦被定义，不能被修改" class="headerlink" title="2. 值一旦被定义，不能被修改"></a>2. 值一旦被定义，不能被修改</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num = <span class="number">12</span>;</span><br><span class="line">num = <span class="number">15</span>; 报错：</span><br></pre></td></tr></table></figure>

<h4 id="3-如果const声明的常量是一个引用数据类型，那么常量带表的引用地址不能改变，但是堆内存中的内容是可以修改的。"><a href="#3-如果const声明的常量是一个引用数据类型，那么常量带表的引用地址不能改变，但是堆内存中的内容是可以修改的。" class="headerlink" title="3. 如果const声明的常量是一个引用数据类型，那么常量带表的引用地址不能改变，但是堆内存中的内容是可以修改的。"></a>3. 如果const声明的常量是一个引用数据类型，那么常量带表的引用地址不能改变，但是堆内存中的内容是可以修改的。</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ary = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">ary.push(<span class="string">'33'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(ary);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ary = [1, 3, 5]; // 报错：</span></span><br></pre></td></tr></table></figure>

<div style="text-align: right">【发上等愿，结中等缘，享下等福，择高处立，寻平处住，向宽处行】</div>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/10/07/JavaScript进阶教程3/" data-id="ck3wwokl4000zg4ppgkvw2hpj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaScript进阶教程1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/17/JavaScript进阶教程1/" class="article-date">
  <time datetime="2018-09-17T14:33:28.000Z" itemprop="datePublished">2018-09-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/17/JavaScript进阶教程1/">进阶教程 1. 闭包、this、和面向对象</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="闭包、this、面向对象基础"><a href="#闭包、this、面向对象基础" class="headerlink" title="闭包、this、面向对象基础"></a>闭包、this、面向对象基础</h2><h3 id="1-闭包"><a href="#1-闭包" class="headerlink" title="1. 闭包"></a>1. 闭包</h3><h4 id="闭包定义："><a href="#闭包定义：" class="headerlink" title="闭包定义："></a>闭包定义：</h4><ul>
<li>江外解释：函数执行时形成一个私有作用域，保护里面的变量不受外界干扰，这种保护机制成为闭包。</li>
<li>市面理解：形成一个不销毁的私有作用域（私有栈内存）才是闭包</li>
</ul>
<h4 id="闭包应用："><a href="#闭包应用：" class="headerlink" title="闭包应用："></a>闭包应用：</h4><h5 id="1-柯里化函数"><a href="#1-柯里化函数" class="headerlink" title="1. 柯里化函数"></a>1. 柯里化函数</h5><p><code>柯里化函数思想：把多参数的函数变成单参数的函数</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">b</span>) </span>&#123; <span class="comment">// 这种在函数中return 函数的做法是市面中认为的闭包</span></span><br><span class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">c</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> a + b + c;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">fn1(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>);</span><br></pre></td></tr></table></figure>

<h4 id="2-利用闭包机制隔离全局命名空间"><a href="#2-利用闭包机制隔离全局命名空间" class="headerlink" title="2. 利用闭包机制隔离全局命名空间"></a>2. 利用闭包机制隔离全局命名空间</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">// 自执行函数执行也是闭包</span></span><br><span class="line">	<span class="keyword">let</span> a = <span class="number">100</span>; <span class="comment">// a是一个私有变量，不会影响全局作用域中的变量命名</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h4 id="3-惰性封装"><a href="#3-惰性封装" class="headerlink" title="3. 惰性封装"></a>3. 惰性封装</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> utils = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> version = <span class="string">'1.0.1'</span>;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> a + b</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">minus</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> a - b;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		sum: sum,</span><br><span class="line">		minus: minus</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h4 id="4-利用闭包的不销毁作用域保存数据：累加计数、选项卡闭包版本"><a href="#4-利用闭包的不销毁作用域保存数据：累加计数、选项卡闭包版本" class="headerlink" title="4. 利用闭包的不销毁作用域保存数据：累加计数、选项卡闭包版本"></a>4. 利用闭包的不销毁作用域保存数据：累加计数、选项卡闭包版本</h4><h3 id="2-this"><a href="#2-this" class="headerlink" title="2. this"></a>2. this</h3><p>this是JS的关键字，代表当前代码执行的环境对象。一般在函数中使用，并且是在函数执行时，根据函数的不同执行方式确定不同的值。目前阶段有以下情况：</p>
<h4 id="1-事件函数中的this是绑定该事件的元素；"><a href="#1-事件函数中的this是绑定该事件的元素；" class="headerlink" title="1. 事件函数中的this是绑定该事件的元素；"></a>1. 事件函数中的this是绑定该事件的元素；</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> box = <span class="built_in">document</span>.getElementById(<span class="string">'box'</span>);</span><br><span class="line">box.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span>); <span class="comment">// box 元素对象</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="2-自执行函数中的this是window"><a href="#2-自执行函数中的this是window" class="headerlink" title="2. 自执行函数中的this是window"></a>2. 自执行函数中的this是window</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h4 id="3-setTimeout-setInterval-定时器回调函数中的this指向window"><a href="#3-setTimeout-setInterval-定时器回调函数中的this指向window" class="headerlink" title="3. setTimeout/setInterval() 定时器回调函数中的this指向window"></a>3. setTimeout/setInterval() 定时器回调函数中的this指向window</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;, <span class="number">0</span>); <span class="comment">// 定时器写0也不会立刻执行，也需要等待其他同步代码执行完才会执行；</span></span><br></pre></td></tr></table></figure>

<h4 id="4-方法调用时，看方法前面是否有点-如果有点前面是谁，this就是谁，如果没方法中的this就是window"><a href="#4-方法调用时，看方法前面是否有点-如果有点前面是谁，this就是谁，如果没方法中的this就是window" class="headerlink" title="4.方法调用时，看方法前面是否有点 . 如果有点前面是谁，this就是谁，如果没方法中的this就是window"></a>4.方法调用时，看方法前面是否有点 . 如果有点前面是谁，this就是谁，如果没方法中的this就是window</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">13</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">	num: <span class="number">12</span>,</span><br><span class="line">	fn: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="keyword">this</span>.num);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.fn(); <span class="comment">// 12</span></span><br><span class="line">obj[<span class="string">'fn'</span>](); <span class="comment">// 12 obj['fn'] 等效于 obj.fn 所以，this仍然指向obj</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fn = obj.fn;</span><br><span class="line">fn(); <span class="comment">// 13；window.num</span></span><br></pre></td></tr></table></figure>

<h4 id="6-箭头函数中的this指向函数定义时所在作用域中的this"><a href="#6-箭头函数中的this指向函数定义时所在作用域中的this" class="headerlink" title="6. 箭头函数中的this指向函数定义时所在作用域中的this"></a>6. 箭头函数中的this指向函数定义时所在作用域中的this</h4><h5 id="箭头函数："><a href="#箭头函数：" class="headerlink" title="箭头函数："></a>箭头函数：</h5><p>ES6新增的语法：省略function关键字，在形参入口后增加 =&gt; 箭头，后面紧跟函数体；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> f = <span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> a + b;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="keyword">this</span>)</span><br><span class="line">&#125;;</span><br><span class="line">f();</span><br></pre></td></tr></table></figure>

<h5 id="箭头函数的简化语法："><a href="#箭头函数的简化语法：" class="headerlink" title="箭头函数的简化语法："></a>箭头函数的简化语法：</h5><h5 id="1-只有一个形参时，可以省略-形参入口的小括号"><a href="#1-只有一个形参时，可以省略-形参入口的小括号" class="headerlink" title="1. 只有一个形参时，可以省略 形参入口的小括号"></a>1. 只有一个形参时，可以省略 形参入口的小括号</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> f2 = <span class="function"><span class="params">a</span> =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">var</span> x = <span class="number">10</span>;</span><br><span class="line">	x += a;</span><br><span class="line">	<span class="keyword">return</span> x;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="2-如果函数只有一行代码，或者只有return-指定返回值，可以省略函数体的花括号和return关键字"><a href="#2-如果函数只有一行代码，或者只有return-指定返回值，可以省略函数体的花括号和return关键字" class="headerlink" title="2. 如果函数只有一行代码，或者只有return 指定返回值，可以省略函数体的花括号和return关键字"></a>2. 如果函数只有一行代码，或者只有return 指定返回值，可以省略函数体的花括号和return关键字</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> transfer = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b;</span><br><span class="line"><span class="comment">// 等效于：</span></span><br><span class="line"><span class="keyword">let</span> transfer = <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="7-全局作用域中的this是window"><a href="#7-全局作用域中的this是window" class="headerlink" title="7. 全局作用域中的this是window"></a>7. 全局作用域中的this是window</h4><p>console.log(this);</p>
<h4 id="8-this在运行时不可以赋值"><a href="#8-this在运行时不可以赋值" class="headerlink" title="8. this在运行时不可以赋值"></a>8. this在运行时不可以赋值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span> = &#123;&#125;;  <span class="comment">// 报错</span></span><br></pre></td></tr></table></figure>

<h3 id="3-i和i"><a href="#3-i和i" class="headerlink" title="3. ++i和i++"></a>3. ++i和i++</h3><p><code>++i和i++都是给i累加1，但是加的时机不同</code></p>
<ul>
<li>++i 是先累加自身，然后再取累加后的值和其他值运算</li>
<li>i++ 是先取当前值和其他值运算，再累加自身</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">console</span>.log(++i); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(i++); <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">12</span>; <span class="comment">// 13 14</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">13</span>; <span class="comment">// 14 15</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(++a + a++ + b++ + ++b + a + b); <span class="comment">// 13 + 13 + 13 + 15 + 14 + 15 = 83</span></span><br></pre></td></tr></table></figure>

<h3 id="4-面向对象"><a href="#4-面向对象" class="headerlink" title="4. 面向对象"></a>4. 面向对象</h3><h4 id="面向过程"><a href="#面向过程" class="headerlink" title="面向过程"></a>面向过程</h4><p>面向过程：以过程为核心，研究现在要解决的问题，既不考虑以前，也不考虑将来，这段代码就解决现在的问题。如果以后再有相同的功能，就再写一遍相同的代码；</p>
<h4 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h4><p>面向对象：是一种对现实世界的理解和抽象的方法。面向对象关心现在的功能能分分类解决，现在解决过的问题，我们过往有没有类似的代码可以复用，我们现在的写的代码能不能给将来用。</p>
<h4 id="面向对象的研究范畴"><a href="#面向对象的研究范畴" class="headerlink" title="面向对象的研究范畴"></a>面向对象的研究范畴</h4><ul>
<li>对象：万事万物都是对象，每个对象都具备各自的属性和功能；</li>
<li>类：抽象事物的特性和特点，把对象分成不同的类型，例如老师类、学员类，类是一个是描述一群事物的共同特点的抽象概念；</li>
<li>实例：类中的一个具体的个体。这个个体既然属于类，那么这个个体一定具有这个类的所有的特性和功能。<ol>
<li>例如：人类就是一个类，人类最显著的特点是可以制造并使用工具。人类的属性有语言、智慧、吃饭、睡觉…. 每个人都是人类的一个实例，每个人都有这个类型中的所有的特性和属性。</li>
</ol>
</li>
</ul>
<h4 id="那么js的面向对象体现在哪里呢？"><a href="#那么js的面向对象体现在哪里呢？" class="headerlink" title="? 那么js的面向对象体现在哪里呢？"></a>? 那么js的面向对象体现在哪里呢？</h4><blockquote>
<p>在公开课阶段我们强调数据类型，其中强调的就是类型。例如数组类、普通对象类，这是因为数组类和对象的属性和方法不同。<br>例如数组是有序的键值对，还可以push，pop、splice等，而对象是无序的键值对之和，而且对象不可以pop<br>而 var ary = [1, 2] 是数组的一个实例，所以ary有所有数组的特性<br>而 var  obj = {name: 1} 是对象的一个实例；</p>
</blockquote>
<h4 id="JS中的内置类："><a href="#JS中的内置类：" class="headerlink" title="JS中的内置类："></a>JS中的内置类：</h4><ul>
<li>Object</li>
<li>Array</li>
<li>Date</li>
<li>RegExp</li>
<li>Function</li>
</ul>
<p><code>这些内置类都是函数数据类型的</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Array</span>); <span class="comment">// function</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">Object</span>); <span class="comment">// function</span></span><br></pre></td></tr></table></figure>

<h4 id="面向对象的研究范畴-1"><a href="#面向对象的研究范畴-1" class="headerlink" title="面向对象的研究范畴"></a>面向对象的研究范畴</h4><p><code>对于面向对象要求我们掌握 封装、类的继承和多态</code></p>
<h3 id="5-单例模式"><a href="#5-单例模式" class="headerlink" title="5. 单例模式"></a>5. 单例模式</h3><h4 id="普通单例"><a href="#普通单例" class="headerlink" title="普通单例"></a>普通单例</h4><p>在过往我们面向过程时，描述一个学员：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'张三'</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">18</span>;</span><br><span class="line"><span class="keyword">var</span> sex = <span class="string">'boy'</span>;</span><br></pre></td></tr></table></figure>

<p>描述另一个学员：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'李四'</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">19</span>;</span><br><span class="line"><span class="keyword">var</span> sex = <span class="string">'girl'</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这样做有一个问题，因为变量只能代表一个值，全局变量后面的会覆盖前面的。导致前面的数据丢失。<br>为了解决这个问题，我们现在在描述一个事物，我们可以使用一个对象，因为对象是用来描述一个事物的，而对象的属性就是定性描述这个对象的特征，而属性值是定量的描述事物的这个特征。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> stu1 = &#123;</span><br><span class="line">	name: <span class="string">'zhangsan'</span>,</span><br><span class="line">	age: <span class="number">18</span>,</span><br><span class="line">	sex: <span class="string">'boy'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> stu2 = &#123;</span><br><span class="line">	name: <span class="string">'李四'</span>,</span><br><span class="line">	age: <span class="number">19</span>,</span><br><span class="line">	sex: <span class="string">'girl'</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>像上面这样，把描述一个事物的属性放到一个对象内这种封装方式称为单例模式。<br>单例模式的优点是解决了全局变量互相覆盖的问题，这样stu1的name和stu2的name没有关系，因为stu1和stu2是两个不同的对象，此时stu1和stu2代表的对象叫做单例，而stu1和stu2这两个变量名称为命名空间；</p>
<h4 id="高级单例"><a href="#高级单例" class="headerlink" title="高级单例"></a>高级单例</h4><p>高级单例：高级单例模式不再是直接将一个对象赋值给命名空间，而是先执行一个自执行函数，在函数执行结束时返回一个对象；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">eat</span>(<span class="params">food</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">`I like eating <span class="subst">$&#123;food&#125;</span>`</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">hobby</span>(<span class="params">h</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">`I like playing <span class="subst">$&#123;h&#125;</span>`</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> account = <span class="string">'$10000000'</span>;</span><br><span class="line">	<span class="keyword">var</span> name = <span class="string">'王老五'</span>;</span><br><span class="line">	<span class="keyword">var</span> age = <span class="number">40</span>;</span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		name: name,</span><br><span class="line">		age: age,</span><br><span class="line">		eat: eat,</span><br><span class="line">		hobby: hobby</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<ul>
<li>这样写，有一个优势，我们可以在自执行函数的作用域中声明变量和函数，这个作用域不会销毁，我们可以在最后返回对象里面选择导出哪些变量和方法给外界使用，不导出的，外界拿不到；</li>
</ul>
<p><code>单例模式虽然好用，但是有一个问题，有一个对象，我们就需要写一个这个对象，很繁琐。</code></p>
<h3 id="6-工厂模式"><a href="#6-工厂模式" class="headerlink" title="6. 工厂模式"></a>6. 工厂模式</h3><p><code>如何批量生产？</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reg</span>(<span class="params">name, age, sex</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> obj = &#123;&#125;; <span class="comment">// 原材料</span></span><br><span class="line">	obj.name = name; <span class="comment">// 加工</span></span><br><span class="line">	obj.age = age; <span class="comment">// 加工</span></span><br><span class="line">	obj.sex = sex; <span class="comment">// 加工</span></span><br><span class="line">	<span class="keyword">return</span> obj; <span class="comment">// 出厂</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> s1 = reg(<span class="string">'阿三'</span>, <span class="number">19</span>, <span class="string">'boy'</span>);</span><br><span class="line"><span class="keyword">let</span> s2 = reg(<span class="string">'李四'</span>, <span class="number">18</span>, <span class="string">'girl'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(s1 === s2); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<ul>
<li>工厂模式：像上面这样，把实现相同供的函数封装成一个函数，当我们需要创建一个实例的时候，我们就执行这个函数即可，并且每个对象都是单例；</li>
<li>优势：高内聚，低耦合 提高了代码的复用度</li>
</ul>
<blockquote>
<p>工厂模式虽然解决了批量生产的问题，但是我们说面向对象还要有类的概念，但是这种方式生产的对象都是同一类，没有分类。</p>
</blockquote>
<ul>
<li>思考？内置的类型都有类型的概念？</li>
</ul>
<p>js有两种创建数据的方式，一种是字面量，另一种是实例的方式，例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">obj.name = <span class="string">'李四'</span>;</span><br><span class="line">obj.age = <span class="number">19</span>;</span><br><span class="line">obj.sex = <span class="string">'girl'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj);</span><br></pre></td></tr></table></figure>

<p>// ? 为什么js可以通过new 操作符来生成实例？而且是有类型的？我们的可以不可以呢？</p>
<p>var obj2 = new reg(‘li’, 13, ‘g’);<br>console.log(obj2); // 同样获取了一个实例对象，但是没有发现类型</p>
<h3 id="7-构造函数模式"><a href="#7-构造函数模式" class="headerlink" title="7. 构造函数模式"></a>7. 构造函数模式</h3><blockquote>
<p>前面的工厂模式已经可以批量生产了，但是还是没有我们所说的面向对象中类型的概念。为了有类型的概念，我们需要构造函数模式。</p>
</blockquote>
<p>构造函数：构造函数也是一个函数，但是调用方式有别于工厂函数：</p>
<ol>
<li>调用方式不同，构造函数只能通过new操作符调用；</li>
<li>工厂函数内需要手动创建对象实例，而构造函数模式不需要手动创建对象，在构造函数被new执行时，构造函数中的this自动和实例绑定，所以我们所有的加工都发生在this上；</li>
<li>工厂函数需要手动返回对象实例，而构造函数在被new操作符调用时不需要手动返回实例；</li>
</ol>
<h4 id="构造函数模式："><a href="#构造函数模式：" class="headerlink" title="构造函数模式："></a>构造函数模式：</h4><p>通过new调用一个函数，此时这个函数不再是普通函数，而是成为一个类，函数名称为类名，而通过new调用，自动返回这个类的一个实例。在构造函数中，我们需要抽象这个类型的属性和功能；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Teacher</span>(<span class="params">name, age, subject, from</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">	<span class="keyword">this</span>.mission = <span class="string">'传道受业解惑'</span>;</span><br><span class="line">	<span class="keyword">this</span>.age = age;</span><br><span class="line">	<span class="keyword">this</span>.subject = subject;</span><br><span class="line">	<span class="keyword">this</span>.from = <span class="keyword">from</span>;</span><br><span class="line">	<span class="keyword">this</span>.teach = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;name&#125;</span> 老师教 <span class="subst">$&#123;subject&#125;</span> 学科`</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125; <span class="comment">// Teacher是一个类，这里类型抽象了老师的属性，一个老师有的属性有姓名，年龄，教授学科，哪个学校的老师，以及老师会讲课的功能。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个实例：</span></span><br><span class="line"><span class="keyword">let</span> mrMa = <span class="keyword">new</span> Teacher(<span class="string">'马宾'</span>, <span class="number">18</span>, <span class="string">'js'</span>, <span class="string">'江外琉璃'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(mrMa);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mrJiang = <span class="keyword">new</span> Teacher(<span class="string">'陆辉'</span>, <span class="number">19</span>, <span class="string">'Architect-FE师'</span>, <span class="string">'江外琉璃'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(mrJiang);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> mrJiang); <span class="comment">// object</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> mrMa); <span class="comment">// object</span></span><br></pre></td></tr></table></figure>

<ul>
<li>通过浏览器控制台查看，这两个实例（对象）的前面出现了 Teacher，此时说明mrMa和mrJiang都属于Teacher类的实例。</li>
</ul>
<h3 id="instanceof-运算符"><a href="#instanceof-运算符" class="headerlink" title="instanceof 运算符"></a>instanceof 运算符</h3><ul>
<li>如何检测当前对象是否是当前类型的实例：</li>
</ul>
<h4 id="instanceof-运算符：检测对象是否是某个类型的实例，如果是true，否则返回false"><a href="#instanceof-运算符：检测对象是否是某个类型的实例，如果是true，否则返回false" class="headerlink" title="instanceof 运算符：检测对象是否是某个类型的实例，如果是true，否则返回false"></a>instanceof 运算符：检测对象是否是某个类型的实例，如果是true，否则返回false</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(mrJiang <span class="keyword">instanceof</span> Teacher);</span><br><span class="line"><span class="built_in">console</span>.log(mrMa <span class="keyword">instanceof</span> Teacher);</span><br><span class="line"><span class="built_in">console</span>.log([] <span class="keyword">instanceof</span> Teacher);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log([] <span class="keyword">instanceof</span> <span class="built_in">Object</span>); <span class="comment">//</span></span><br><span class="line"><span class="built_in">console</span>.log(mrJiang <span class="keyword">instanceof</span> <span class="built_in">Object</span>);</span><br><span class="line"><span class="built_in">console</span>.log(mrMa <span class="keyword">instanceof</span> <span class="built_in">Object</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>但是因为Object是基类，所有实例都是对象数据类型的，所以用instanceof检测是否是Object的实例，都会返回true；</li>
</ul>
<div style="text-align: right">【发上等愿，结中等缘，享下等福，择高处立，寻平处住，向宽处行】</div>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/09/17/JavaScript进阶教程1/" data-id="ck3wwokkg000fg4ppdifmbfr4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaScript进阶教程2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/17/JavaScript进阶教程2/" class="article-date">
  <time datetime="2018-09-17T14:33:28.000Z" itemprop="datePublished">2018-09-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/09/17/JavaScript进阶教程2/">进阶教程 2. 变量提升</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="变量提升"><a href="#变量提升" class="headerlink" title="变量提升"></a>变量提升</h2><h3 id="变量提升（预解释）"><a href="#变量提升（预解释）" class="headerlink" title="变量提升（预解释）"></a>变量提升（预解释）</h3><ul>
<li>在js代码执行之前，对所有声明的变量 进行提前带var和带function变量进行提前声明和定义（赋值）；</li>
<li>对于带var的进行提前声明，不赋值（变量声明时不赋值，变量的默认值是undefined），只是浏览器知道有这么个变量。</li>
<li>对于带function的进行提前声明 并且赋值为函数定义本身<br>变量提升结束后，代码才会从上到下执行。</li>
<li>当执行到var 变量 = 值；时，此时才会对变量进行赋值，即在此之后变量才代表这个值本身，在此之前是undefined；</li>
<li>而当执行到function 函数名… 时，跳过，因为在变量提升阶段就已经完成了对变量的赋值过程。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(num); <span class="comment">// undefined 因为代码执行到这里时，num只是经过了变量提升阶段的声明，但是没有完成赋值，所以是undefined；</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">100</span>; <span class="comment">// 代码执行过这一行后完成了赋值，所以num是100</span></span><br><span class="line"><span class="built_in">console</span>.log(num);  <span class="comment">// 100</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(fe); <span class="comment">// 函数体本身，因为fe这个变量在函数执行时就已经赋值完成了，所以无论在函数声明前还是后使用都是函数本身</span></span><br><span class="line">fe(); <span class="comment">// 因为fe在变量提升阶段就已经完成了赋值，所以fe是一个函数，所以可以成功执行</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fe</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'We are Front-end Engineer'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="变量提升和js运行机制"><a href="#变量提升和js运行机制" class="headerlink" title="变量提升和js运行机制"></a>变量提升和js运行机制</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(num); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">12</span>; <span class="comment">// 赋值操作，只在执行到这一行时，num才被赋值为12；</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">	name: <span class="string">"江外"</span>,</span><br><span class="line">	age: <span class="string">'10'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(zf);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">zf</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> age = <span class="number">10</span>;</span><br><span class="line">	<span class="built_in">console</span>.log(str, age);</span><br><span class="line">&#125;</span><br><span class="line">zf(<span class="string">'江外'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="js的运行机制及原理："><a href="#js的运行机制及原理：" class="headerlink" title="js的运行机制及原理："></a>js的运行机制及原理：</h3><h4 id="js运行的环境（栈内存）：作用域"><a href="#js运行的环境（栈内存）：作用域" class="headerlink" title="js运行的环境（栈内存）：作用域"></a>js运行的环境（栈内存）：作用域</h4><p>作用域是js运行的环境，另外一个功能是保存基本数据类型。在js中作用域分为：</p>
<pre><code>+全局作用域 ：当页面打开时，首先形成一个全局作用域，执行全局中的代码，全局作用域是window；
+私有作用域（函数作用域）当函数执行时，会形成一个函数作用域，这个作用域用来保存函数中的基本数据类型同时执行函数代码；
+块级作用域（类似私有作用域 ES6）</code></pre><h4 id="js运行过程"><a href="#js运行过程" class="headerlink" title="js运行过程"></a>js运行过程</h4><ul>
<li>在js代码执行前，浏览器会开辟一个全局作用域，然后执行变量提升，完成变量提升操作后，代码开始从上到下开始执行；</li>
<li>当执行时，如果遇到基本数据类型，就在作用域中存储该基本数据类型；</li>
<li>如果遇到引用数据类型，则浏览器会再次分配一个堆内存，然后把引用数据类型的内容存储到堆内存中，接下来再把这个堆内存的地址赋值给变量（此时这个地址是存储在作用域内存中的）；</li>
<li>遇到函数执行时，会经历以下几步：<ol>
<li>浏览器开辟一个私有作用域；</li>
<li>形参赋值，把执行时的实参赋值给函数形参变量；</li>
<li>私有作用域中变量提升</li>
<li>函数代码从上到下执行</li>
</ol>
</li>
</ul>
<h4 id="私有变量和全局变量"><a href="#私有变量和全局变量" class="headerlink" title="私有变量和全局变量"></a>私有变量和全局变量</h4><ul>
<li>全局变量：在全局作用域中声明的变量</li>
<li>私有变量：函数的形参以及在函数私有作用域中声明的变量</li>
</ul>
<h4 id="预解释只发生在当前作用域，如果函数不执行时，函数中的变量不会进行变量提升。"><a href="#预解释只发生在当前作用域，如果函数不执行时，函数中的变量不会进行变量提升。" class="headerlink" title="预解释只发生在当前作用域，如果函数不执行时，函数中的变量不会进行变量提升。"></a>预解释只发生在当前作用域，如果函数不执行时，函数中的变量不会进行变量提升。</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> num = <span class="number">13</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(num); <span class="comment">// 报错：因为预解释发生在当前作用域中，而当前作用域没有num的变量，num是fn的私有变量。</span></span><br></pre></td></tr></table></figure>

<h3 id="重复声明的问题"><a href="#重复声明的问题" class="headerlink" title="重复声明的问题"></a>重复声明的问题</h3><h4 id="1-同名变量只会声明一次，代表的值就是最后一次的值"><a href="#1-同名变量只会声明一次，代表的值就是最后一次的值" class="headerlink" title="1. 同名变量只会声明一次，代表的值就是最后一次的值"></a>1. 同名变量只会声明一次，代表的值就是最后一次的值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num;</span><br><span class="line"><span class="keyword">var</span> num;</span><br><span class="line"><span class="keyword">var</span> num; <span class="comment">// 这些语句没有赋值操作，当代码执行时会略过</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">100</span>; <span class="comment">// num虽然var了4次，但是并不会声明4次，只会声明一次，同时只有这一次才会将num的值赋值成100；</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">&#125;</span><br><span class="line">fn(); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<h4 id="2-变量提升时，function的优先级高于普通变量"><a href="#2-变量提升时，function的优先级高于普通变量" class="headerlink" title="2. 变量提升时，function的优先级高于普通变量"></a>2. 变量提升时，function的优先级高于普通变量</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(fe); <span class="comment">// 函数体</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fe</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 当代码执行到这里时，直接忽略，因为函数变量赋值已经在变量</span></span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'我是来自江外的FE'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fe = <span class="number">123</span>; <span class="comment">// 代码执行到这一行时，将变量fe的值修改为123</span></span><br></pre></td></tr></table></figure>

<h4 id="3-如果变量名和函数名同名，在执行到变量的赋值语句之前时，这个名字代表函数，但是当执行过变量赋值语句后，"><a href="#3-如果变量名和函数名同名，在执行到变量的赋值语句之前时，这个名字代表函数，但是当执行过变量赋值语句后，" class="headerlink" title="3. 如果变量名和函数名同名，在执行到变量的赋值语句之前时，这个名字代表函数，但是当执行过变量赋值语句后，"></a>3. 如果变量名和函数名同名，在执行到变量的赋值语句之前时，这个名字代表函数，但是当执行过变量赋值语句后，</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fe</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'FE'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fe = <span class="number">1</span>;</span><br><span class="line"><span class="comment">// fe(); // 报错，因为执行到这里的时候fe不再代表一个函数了，而是一个数字</span></span><br></pre></td></tr></table></figure>

<h3 id="变量提升的细节问题"><a href="#变量提升的细节问题" class="headerlink" title="变量提升的细节问题"></a>变量提升的细节问题</h3><h4 id="1-等号右侧的不会进行变量提升，即使右侧是函数也不会进行变量提升"><a href="#1-等号右侧的不会进行变量提升，即使右侧是函数也不会进行变量提升" class="headerlink" title="1. 等号右侧的不会进行变量提升，即使右侧是函数也不会进行变量提升"></a>1. 等号右侧的不会进行变量提升，即使右侧是函数也不会进行变量提升</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fn(); // 报错，</span></span><br><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'来自等号右侧的你'</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// console.log(x1); // 报错：x1 is not defined</span></span><br><span class="line"><span class="comment">// console.log(x); // undefined</span></span><br><span class="line"><span class="keyword">var</span> x = <span class="function"><span class="keyword">function</span> <span class="title">x1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(x1);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="2-条件语句中的变量不管条件成立与否都会参与当前作用域中的变量提升；"><a href="#2-条件语句中的变量不管条件成立与否都会参与当前作用域中的变量提升；" class="headerlink" title="2. 条件语句中的变量不管条件成立与否都会参与当前作用域中的变量提升；"></a>2. 条件语句中的变量不管条件成立与否都会参与当前作用域中的变量提升；</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(n); <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">NaN</span> === <span class="built_in">Number</span>(<span class="string">'I Love programming'</span>)) &#123;</span><br><span class="line">	<span class="keyword">var</span> n = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(n); <span class="comment">// undefined，以内条件不成立，所以赋值语句没执行，所以n仍然是undefined</span></span><br></pre></td></tr></table></figure>

<h4 id="3-函数中，return-下面的代码虽然不执行，但仍会进行函数作用域中的变量提升；"><a href="#3-函数中，return-下面的代码虽然不执行，但仍会进行函数作用域中的变量提升；" class="headerlink" title="3. 函数中，return 下面的代码虽然不执行，但仍会进行函数作用域中的变量提升；"></a>3. 函数中，return 下面的代码虽然不执行，但仍会进行函数作用域中的变量提升；</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(n); <span class="comment">// undefined</span></span><br><span class="line">	fe(); <span class="comment">// 执行了</span></span><br><span class="line">	<span class="keyword">return</span> a + b;</span><br><span class="line">	<span class="keyword">var</span> n = <span class="number">123</span>;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">fe</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'前端工程师从入门到删库跑路'</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">add();</span><br></pre></td></tr></table></figure>

<h4 id="4-函数的返回值不参与变量提升；-return右边的不会参与变量提升"><a href="#4-函数的返回值不参与变量提升；-return右边的不会参与变量提升" class="headerlink" title="4. 函数的返回值不参与变量提升； return右边的不会参与变量提升"></a>4. 函数的返回值不参与变量提升； return右边的不会参与变量提升</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">minus</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(foo);</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'函数的返回值不参与变量提升'</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">minus();</span><br></pre></td></tr></table></figure>

<h3 id="带var和不带var的区别"><a href="#带var和不带var的区别" class="headerlink" title="带var和不带var的区别"></a>带var和不带var的区别</h3><h4 id="1-在全局中，用var和function声明的变量，也相当于给window上添加一个同名属性"><a href="#1-在全局中，用var和function声明的变量，也相当于给window上添加一个同名属性" class="headerlink" title="1. 在全局中，用var和function声明的变量，也相当于给window上添加一个同名属性"></a>1. 在全局中，用var和function声明的变量，也相当于给window上添加一个同名属性</h4><ul>
<li>全局作用域是一个内置对象 window<br>console.log(window);</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">2019</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.num); <span class="comment">// 2019</span></span><br><span class="line"><span class="built_in">window</span>.num = <span class="number">2020</span>;</span><br><span class="line"><span class="built_in">console</span>.log(num); <span class="comment">// 2020 num和window.num是绑定在一起的</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'num'</span> <span class="keyword">in</span> <span class="built_in">window</span>); <span class="comment">// in 运算符 检测对象是否有某个属性，有返回true，否则false</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fe</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'FE'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.fe();</span><br><span class="line">fe();</span><br></pre></td></tr></table></figure>

<h3 id="不带var-的不会参与变量提升"><a href="#不带var-的不会参与变量提升" class="headerlink" title="不带var 的不会参与变量提升"></a>不带var 的不会参与变量提升</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(b); <span class="comment">// 报错：</span></span><br><span class="line">b = <span class="number">2</span>; <span class="comment">// 不带var 不会参与变量提升，所以不会提前声明和赋值</span></span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br></pre></td></tr></table></figure>

<h2 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h2><p>js中作用域</p>
<ul>
<li>全局作用域</li>
<li>私有作用域</li>
<li>块级作用域</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(n);</span><br><span class="line">&#125;</span><br><span class="line">fn(); <span class="comment">// 15</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(x)</span><br><span class="line">&#125;</span><br><span class="line">fn3();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn3</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	x = <span class="number">16</span>;</span><br><span class="line">&#125;</span><br><span class="line">fn2();</span><br></pre></td></tr></table></figure>

<h3 id="作用域链：变量的查找机制："><a href="#作用域链：变量的查找机制：" class="headerlink" title="作用域链：变量的查找机制："></a>作用域链：变量的查找机制：</h3><p>当在作用域中查找一个变量的时候，先看当前作用域中是否声明过这个变量，如果声明过，就使用这个变量，如果没有生命过，那么就去上级作用域（上级作用域就是函数声明时所在的作用域）查找，找到就使用，如果没有就一直向上查找，一直找到window为止，如果本次使用变量是赋值，那么就相当于给window上面增加一个属性，如果是引用变量，就会报错;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fe</span>(<span class="params"></span>) </span>&#123; <span class="comment">// fe 是在全局中定义的，所以fe的上级作用域就是全局作用域</span></span><br><span class="line">  <span class="keyword">var</span> n = <span class="number">200</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 这个function就是在fe的作用域中定义的，所以该函数的上级作用域就是fe的作用域</span></span><br><span class="line">    <span class="built_in">console</span>.log(n) <span class="comment">// 200</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fn = fe();</span><br><span class="line">fn();</span><br></pre></td></tr></table></figure>

<h3 id="上级作用域的确定："><a href="#上级作用域的确定：" class="headerlink" title="上级作用域的确定："></a>上级作用域的确定：</h3><ul>
<li>如何查找上级作用域，就看这个函数是在哪里定义的。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fe</span>(<span class="params"></span>) </span>&#123; <span class="comment">// fe 是在全局中定义的，所以fe的上级作用域就是全局作用域</span></span><br><span class="line">	<span class="keyword">var</span> n = <span class="number">200</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 这个function就是在fe的作用域中定义的，所以该函数的上级作用域就是fe的作用域</span></span><br><span class="line">		<span class="built_in">console</span>.log(n) <span class="comment">// 200</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fn = fe();</span><br><span class="line">fn();</span><br></pre></td></tr></table></figure>

<div style="text-align: right">【发上等愿，结中等缘，享下等福，择高处立，寻平处住，向宽处行】</div>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/09/17/JavaScript进阶教程2/" data-id="ck3wwokl0000vg4pp53fv5iw1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JavaScript基础教程8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/27/JavaScript基础教程8/" class="article-date">
  <time datetime="2018-08-27T13:45:45.000Z" itemprop="datePublished">2018-08-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/27/JavaScript基础教程8/">基础教程 6. JS DOM 操作和属性操作</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="一、js中获取DOM的方法"><a href="#一、js中获取DOM的方法" class="headerlink" title="一、js中获取DOM的方法"></a>一、js中获取DOM的方法</h2><h3 id="1-document-getElementById-根据id获取dom元素对象"><a href="#1-document-getElementById-根据id获取dom元素对象" class="headerlink" title="1. document.getElementById() 根据id获取dom元素对象"></a>1. document.getElementById() 根据id获取dom元素对象</h3><ul>
<li>参数：元素id</li>
<li>返回值：根据元素id获取到的DOM对象，如果获取不到返回null</li>
<li>注意：<ol>
<li>如果ID名字相同：那么获取第一个；</li>
<li>getElementById的上下文必须是 document</li>
</ol>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> parent = <span class="built_in">document</span>.getElementById(<span class="string">'parent'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(parent);</span><br></pre></td></tr></table></figure>

<h3 id="2-context-getElementsByTagName"><a href="#2-context-getElementsByTagName" class="headerlink" title="2. context.getElementsByTagName()"></a>2. context.getElementsByTagName()</h3><ul>
<li>参数：标签名</li>
<li>返回值：从context下获取的指定标签名的dom集合，获取不到时空集合</li>
<li>注意：<ol>
<li>dom集合是类数组，有length有索引</li>
<li>context不是指定的，当你想获取哪个元素的下的所有的指定标签，哪个元素就是context</li>
</ol>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lis = parent.getElementsByTagName(<span class="string">'li'</span>); <span class="comment">// 此时要获取id为parent的ul下的所有li，此时context就是parent</span></span><br><span class="line"><span class="built_in">console</span>.log(lis);</span><br></pre></td></tr></table></figure>

<h3 id="3-context-getElementsByClassName-在上下文中，根据元素class名获取元素集合"><a href="#3-context-getElementsByClassName-在上下文中，根据元素class名获取元素集合" class="headerlink" title="3. context.getElementsByClassName() 在上下文中，根据元素class名获取元素集合"></a>3. context.getElementsByClassName() 在上下文中，根据元素class名获取元素集合</h3><ul>
<li>参数：元素class名字</li>
<li>返回值：带有指定的class的元素集合，如果获取不到则返回空集合</li>
<li>context: 想要在哪个元素下查找某些class类名的元素，哪个元素就是context</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> someBox = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'some-box'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(someBox);</span><br><span class="line"><span class="keyword">var</span> child = parent.getElementsByClassName(<span class="string">'child'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(child);</span><br></pre></td></tr></table></figure>

<h3 id="4-document-getElementsByName-通过name属性获取元素对象，一般用于表单元素集合"><a href="#4-document-getElementsByName-通过name属性获取元素对象，一般用于表单元素集合" class="headerlink" title="4. document.getElementsByName 通过name属性获取元素对象，一般用于表单元素集合"></a>4. document.getElementsByName 通过name属性获取元素对象，一般用于表单元素集合</h3><ul>
<li>参数：元素name属性</li>
<li>返回值：带有指定那么属性值的元素集合，获取不到就是空集合</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> input = <span class="built_in">document</span>.getElementsByName(<span class="string">'inputField'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(input);</span><br></pre></td></tr></table></figure>

<h4 id="5-document-documentElement-获取html元素对象"><a href="#5-document-documentElement-获取html元素对象" class="headerlink" title="5. document.documentElement 获取html元素对象"></a>5. document.documentElement 获取html元素对象</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.documentElement);</span><br></pre></td></tr></table></figure>

<h3 id="6-document-body-获取body元素对象"><a href="#6-document-body-获取body元素对象" class="headerlink" title="6. document.body 获取body元素对象"></a>6. document.body 获取body元素对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">document</span>.body);</span><br></pre></td></tr></table></figure>

<h4 id="获取浏览器可视窗口的宽度和高度"><a href="#获取浏览器可视窗口的宽度和高度" class="headerlink" title="获取浏览器可视窗口的宽度和高度"></a>获取浏览器可视窗口的宽度和高度</h4><ul>
<li><p>宽度</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> winW = <span class="built_in">document</span>.documentElement.clientWidth || <span class="built_in">document</span>.body.clientWidth;</span><br><span class="line"><span class="built_in">console</span>.log(winW);</span><br></pre></td></tr></table></figure>
</li>
<li><p>高度</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> winH = <span class="built_in">document</span>.documentElement.clientHeight || <span class="built_in">document</span>.body.clientHeight;</span><br><span class="line"><span class="built_in">console</span>.log(winH);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="7-根据选择器获取（可以在移动端使用，在PC端有兼容性问题）"><a href="#7-根据选择器获取（可以在移动端使用，在PC端有兼容性问题）" class="headerlink" title="7. 根据选择器获取（可以在移动端使用，在PC端有兼容性问题）"></a>7. 根据选择器获取（可以在移动端使用，在PC端有兼容性问题）</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">context.querySelector(css选择器) 获取一个</span><br><span class="line">context.querySelectorAll(css选择器) 获取所有</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> single = <span class="built_in">document</span>.querySelector(<span class="string">'.some-box'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(single);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> multi = <span class="built_in">document</span>.querySelectorAll(<span class="string">'.some-box'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(multi);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="二、DOM节点属性"><a href="#二、DOM节点属性" class="headerlink" title="二、DOM节点属性"></a>二、DOM节点属性</h2><h3 id="1-节点："><a href="#1-节点：" class="headerlink" title="1. 节点："></a>1. 节点：</h3><blockquote>
<p>在html中所有的内容都成为节点（node）。节点是通过节点属性描述节点间关系的，并且根据节点关系获取元素对象；</p>
</blockquote>
<p>DOM节点：<br>| 节点   |    nodeType |  nodeName  |  nodeValue |<br>|———|———–|————|————-|<br>| 元素节点 |     1       |   大写标签名 |  null |<br>|———|———–|————|————-|<br>| 文本节点 |     3       |    #text    |  文本内容 |<br>|———|———–|————|————-|<br>| 注释节点 |     8       |    #comment |  注释内容 |<br>|———|———–|————|————-|<br>| document|     9       |    #document|   null |</p>
<p><code>注意：换行和空格都是文本节点</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> parent = <span class="built_in">document</span>.getElementById(<span class="string">'parent'</span>);</span><br><span class="line"><span class="keyword">var</span> second = <span class="built_in">document</span>.getElementById(<span class="string">'second'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="2-节点属性"><a href="#2-节点属性" class="headerlink" title="2. 节点属性"></a>2. 节点属性</h3><h4 id="2-1-childNodes-获取当前元素节点的所有子节点，属性值是集合"><a href="#2-1-childNodes-获取当前元素节点的所有子节点，属性值是集合" class="headerlink" title="2.1 childNodes 获取当前元素节点的所有子节点，属性值是集合"></a>2.1 childNodes 获取当前元素节点的所有子节点，属性值是集合</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(parent.childNodes);</span><br></pre></td></tr></table></figure>

<h4 id="2-2-children-获取当前元素的所有元素子节点，属性值是集合"><a href="#2-2-children-获取当前元素的所有元素子节点，属性值是集合" class="headerlink" title="2.2 children: 获取当前元素的所有元素子节点，属性值是集合"></a>2.2 children: 获取当前元素的所有元素子节点，属性值是集合</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(parent.children);</span><br></pre></td></tr></table></figure>

<h4 id="2-3-fistChild-获取当前元素的第一个子节点"><a href="#2-3-fistChild-获取当前元素的第一个子节点" class="headerlink" title="2.3 fistChild 获取当前元素的第一个子节点"></a>2.3 fistChild 获取当前元素的第一个子节点</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(parent.firstChild);</span><br></pre></td></tr></table></figure>

<h4 id="2-4-firstElementChild-获取当前元素的第一个元素子节点"><a href="#2-4-firstElementChild-获取当前元素的第一个元素子节点" class="headerlink" title="2.4 firstElementChild 获取当前元素的第一个元素子节点"></a>2.4 firstElementChild 获取当前元素的第一个元素子节点</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(parent.firstElementChild);</span><br></pre></td></tr></table></figure>

<h4 id="2-5-lastChild-获取当前元素的最后一个子节点"><a href="#2-5-lastChild-获取当前元素的最后一个子节点" class="headerlink" title="2.5 lastChild 获取当前元素的最后一个子节点"></a>2.5 lastChild 获取当前元素的最后一个子节点</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(parent.lastChild);</span><br></pre></td></tr></table></figure>

<h4 id="2-6-lastElementChild-获取当前元素的最后一个元素子节点"><a href="#2-6-lastElementChild-获取当前元素的最后一个元素子节点" class="headerlink" title="2.6 lastElementChild 获取当前元素的最后一个元素子节点"></a>2.6 lastElementChild 获取当前元素的最后一个元素子节点</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(parent.lastElementChild);</span><br></pre></td></tr></table></figure>

<h4 id="2-7-parentNode-获取当前元素的父亲节点，属性值是对象"><a href="#2-7-parentNode-获取当前元素的父亲节点，属性值是对象" class="headerlink" title="2.7 parentNode: 获取当前元素的父亲节点，属性值是对象"></a>2.7 parentNode: 获取当前元素的父亲节点，属性值是对象</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(second.parentNode);</span><br></pre></td></tr></table></figure>

<h4 id="2-8-previousSibling获取上一个哥哥节点"><a href="#2-8-previousSibling获取上一个哥哥节点" class="headerlink" title="2.8 previousSibling获取上一个哥哥节点"></a>2.8 previousSibling获取上一个哥哥节点</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(second.previousSibling);</span><br></pre></td></tr></table></figure>

<h4 id="2-9-previousElementSibling-获取上一个元素哥哥节点"><a href="#2-9-previousElementSibling-获取上一个元素哥哥节点" class="headerlink" title="2.9 previousElementSibling 获取上一个元素哥哥节点"></a>2.9 previousElementSibling 获取上一个元素哥哥节点</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(second.previousElementSibling);</span><br></pre></td></tr></table></figure>

<h4 id="2-10-nextSibling-获取下一个弟弟节点"><a href="#2-10-nextSibling-获取下一个弟弟节点" class="headerlink" title="2.10 nextSibling 获取下一个弟弟节点"></a>2.10 nextSibling 获取下一个弟弟节点</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(second.nextSibling);</span><br></pre></td></tr></table></figure>

<h4 id="2-11-nextElementSibling-获取下一个元素弟弟节点"><a href="#2-11-nextElementSibling-获取下一个元素弟弟节点" class="headerlink" title="2.11 nextElementSibling 获取下一个元素弟弟节点"></a>2.11 nextElementSibling 获取下一个元素弟弟节点</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(second.nextElementSibling);</span><br></pre></td></tr></table></figure>

<ul>
<li><ol start="3">
<li>根据节点间关系获取到的节点集合或者节点都是DOM集合或者DOM元素对象。我们可以操作这些集合或者对象，和操作DOM集合或者对象一模一样。</li>
</ol>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">parent.lastElementChild.firstElementChild.innerHTML = <span class="string">'我是通过dom节点属性添加的'</span>;</span><br><span class="line">parent.lastElementChild.firstElementChild.style.backgroundColor = <span class="string">'red'</span>;</span><br><span class="line">parent.lastElementChild.firstElementChild.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">'这是通过DOM节点属性关系绑定的事件'</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="三、动态操作DOM"><a href="#三、动态操作DOM" class="headerlink" title="三、动态操作DOM"></a>三、动态操作DOM</h2><h3 id="1-动态创建DOM元素对象-document-createElement"><a href="#1-动态创建DOM元素对象-document-createElement" class="headerlink" title="1. 动态创建DOM元素对象 document.createElement()"></a>1. 动态创建DOM元素对象 document.createElement()</h3><ul>
<li>语法：document.createElement()</li>
<li>参数：html标签名</li>
<li>返回值：新创建的DOM对象</li>
<li>注意：新建的DOM对象和我们从页面中获取的DOM对象操作起来没有任何区别；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> newDiv = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">newDiv.innerHTML = <span class="string">'我是新建的div'</span>;</span><br><span class="line">newDiv.style.backgroundColor = <span class="string">'red'</span>;</span><br><span class="line">newDiv.style.width = <span class="string">'100px'</span>;</span><br><span class="line">newDiv.style.height = <span class="string">'100px'</span>;</span><br><span class="line">newDiv.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">'我是新建div的点击事件'</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>? 页面上并没有这个div ? 为啥没有呢？ 因为这是我们动态创建的，并没有把这个新建的div插入到html文档中。</li>
</ul>
<h3 id="2-appendChild-向元素容器的末尾添加一个元素"><a href="#2-appendChild-向元素容器的末尾添加一个元素" class="headerlink" title="2. appendChild: 向元素容器的末尾添加一个元素"></a>2. appendChild: 向元素容器的末尾添加一个元素</h3><ul>
<li>语法：父级容器.appendChild(元素对象);</li>
<li>参数：元素对象（新建的也行、之前已经存在也行）</li>
<li>返回值：插入到容器中的元素对象</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> wrapper = <span class="built_in">document</span>.getElementById(<span class="string">'wrapper'</span>);</span><br><span class="line"><span class="keyword">var</span> obj = wrapper.appendChild(newDiv);</span><br></pre></td></tr></table></figure>

<h3 id="3-父级容器-removeChild"><a href="#3-父级容器-removeChild" class="headerlink" title="3. 父级容器.removeChild()"></a>3. 父级容器.removeChild()</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> originExist = <span class="built_in">document</span>.getElementById(<span class="string">'originExist'</span>);</span><br><span class="line">wrapper.removeChild(originExist);</span><br></pre></td></tr></table></figure>

<h3 id="3-insertBefore-把一个元素插入到指定容器中某一个元素标签之前"><a href="#3-insertBefore-把一个元素插入到指定容器中某一个元素标签之前" class="headerlink" title="3. insertBefore 把一个元素插入到指定容器中某一个元素标签之前"></a>3. insertBefore 把一个元素插入到指定容器中某一个元素标签之前</h3><ul>
<li>语法：父级容器.insertBefore(newEle, oldEle);</li>
<li>参数：要插入的新元素, 已经存在于容器的老元素</li>
<li>返回值：newEle</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> insertResutl = wrapper.insertBefore(newDiv, originExist);</span><br><span class="line"><span class="built_in">console</span>.log(insertResutl);</span><br></pre></td></tr></table></figure>

<h3 id="4-cloneNode-把一个节点进行克隆"><a href="#4-cloneNode-把一个节点进行克隆" class="headerlink" title="4. cloneNode() 把一个节点进行克隆"></a>4. cloneNode() 把一个节点进行克隆</h3><ul>
<li>语法：curEle.cloneNode(false)</li>
<li>参数：true表示深度克隆，把当前节点的子孙节点都克隆；false表示只克隆当前节点</li>
<li>返回值：克隆出来的节点（）</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cloneWrapper = wrapper.cloneNode();</span><br><span class="line">console.log(cloneWrapper === wrapper); #### false 克隆出来的和原来的节点没有关系</span><br></pre></td></tr></table></figure>

<h2 id="五、属性操作"><a href="#五、属性操作" class="headerlink" title="五、属性操作"></a>五、属性操作</h2><h3 id="1-setAttribute-给当前元素设置html行内属性"><a href="#1-setAttribute-给当前元素设置html行内属性" class="headerlink" title="1. setAttribute() 给当前元素设置html行内属性"></a>1. setAttribute() 给当前元素设置html行内属性</h3><ul>
<li>语法：元素对象.setAttribute(attr, value)</li>
<li>参数：属性名, 属性值</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> attributeBox = <span class="built_in">document</span>.querySelector(<span class="string">'#attributeBox'</span>);</span><br><span class="line">attributeBox.setAttribute(<span class="string">'name'</span>, <span class="string">'江外琉璃'</span>);</span><br><span class="line">attributeBox.setAttribute(<span class="string">'age'</span>, <span class="string">'10'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="2-getAttribute-获取当前html某个行内属性的属性值"><a href="#2-getAttribute-获取当前html某个行内属性的属性值" class="headerlink" title="2. getAttribute() 获取当前html某个行内属性的属性值"></a>2. getAttribute() 获取当前html某个行内属性的属性值</h3><ul>
<li>语法：元素对象.getAttribute(attr)</li>
<li>参数：属性名</li>
<li>返回值：属性值</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = attributeBox.getAttribute(<span class="string">'name'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(name);</span><br></pre></td></tr></table></figure>

<h3 id="3-removeAttribute-删除指定的属性"><a href="#3-removeAttribute-删除指定的属性" class="headerlink" title="3. removeAttribute() 删除指定的属性"></a>3. removeAttribute() 删除指定的属性</h3><ul>
<li>语法：元素对象.removeAttribute(attr)</li>
<li>参数：要删除的属性</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">attributeBox.removeAttribute(<span class="string">'age'</span>);</span><br></pre></td></tr></table></figure>

<div style="text-align: right">【发上等愿，结中等缘，享下等福，择高处立，寻平处住，向宽处行</div>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/08/27/JavaScript基础教程8/" data-id="ck3wwokkc000dg4pp24ojl66y" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/Vue/" style="font-size: 16.67px;">Vue</a> <a href="/tags/es6/" style="font-size: 13.33px;">es6</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/webpack/" style="font-size: 13.33px;">webpack</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/12/08/webpack掠影-3/">webpack掠影-3</a>
          </li>
        
          <li>
            <a href="/2019/12/08/webpack掠影-2/">webpack掠影-2</a>
          </li>
        
          <li>
            <a href="/2019/12/07/webpack掠影-1/">webpack掠影-1</a>
          </li>
        
          <li>
            <a href="/2019/10/25/JavaScript进阶教程16/">进阶教程 16. PromiseA+</a>
          </li>
        
          <li>
            <a href="/2019/10/06/JavaScript进阶教程15/">进阶教程 15. Promise 用法详解</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Mabin<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>